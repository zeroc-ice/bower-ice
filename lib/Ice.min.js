!function(){window.Ice=window.Ice||{},Ice.Slice=Ice.Slice||{},window.IceMX=window.IceMX||{},window.IceSSL=window.IceSSL||{};var Slice=Ice.Slice;!function(){var e={module:function(e){var t=window[e];return void 0===t&&(t={},window[e]=t),t},require:function(){return window}};Ice.__require=function(){return window},Ice.Slice=Ice.Slice||{},Ice.__M=e}(),function(){var __M=Ice.__M,Slice=Ice.Slice,eq=function(e,t){return e===t?!0:null===e||void 0===e||null===t||void 0===t?!1:e.prototype!==t.prototype?!1:"function"==typeof e.equals?e.equals(t):e instanceof Array?ArrayUtil.equals(e,t,eq):!1},ArrayUtil={clone:function(e){return void 0===e?e:null===e?[]:e.slice()},equals:function(e,t,n){if(e.length!=t.length)return!1;var i,r,o=n||eq;for(i=0,r=e.length;r>i;++i)if(!o.call(o,e[i],t[i]))return!1;return!0},shuffle:function(e){for(var t=e.length;t>1;--t){var n=e[t-1],i=Math.floor(Math.random()*t);e[t-1]=e[i],e[i]=n}},indexOf:function(e,t,n){if(void 0===n||null===n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(n.call(n,e[i],t))return i;return-1},filter:function(e,t,n){n=void 0===n?t:n;for(var i=[],r=0;r<e.length;++r)t.call(n,e[r],r,e)&&i.push(e[r]);return i}};ArrayUtil.eq=eq,Slice.defineSequence=function(module,name,valueHelper,fixed,elementType){var helper=null;Object.defineProperty(module,name,{get:function(){return null===helper&&(helper=Ice.StreamHelpers.generateSeqHelper(eval(valueHelper),fixed,eval(elementType))),helper}})},Ice.ArrayUtil=ArrayUtil}(),function(){Ice.Class=function(){var e,t,n;1==arguments.length?t=arguments[0]:2==arguments.length&&(e=arguments[0],t=arguments[1]),void 0!==t&&(n=t.__init__,n&&delete t.__init__);var i=n||function(){};if(void 0!==e&&(i.prototype=new e,i.prototype.constructor=i),void 0!==t)for(var r in t)i.prototype[r]=t[r];return i}}(),function(){var e=Ice.Class,t=function(e,n,i,r){if(r+="  ",null===n)return"\n"+r+e+": (null)";if(void 0===n)return"\n"+r+e+": (undefined)";if("stack"==e||"function"==typeof n)return"";if("object"!=typeof n)return"\n"+r+e+': "'+n+'"';if(-1!=i.indexOf(n))return"\n"+r+e+": (recursive)";i.push(n);var o="\n"+r+e+":";for(var s in n)0!==e.indexOf("_")&&"function"!=typeof n[s]&&(o+=r+t(s,n[s],i,r));return o},n=e(Error,{__init__:function(e){e&&(this.ice_cause=e)},ice_name:function(){return"Ice::Exception"},toString:function(){var e=this.ice_name();for(var n in this)e+=t(n,this[n],[],"");return Ice.__printStackTraces===!0&&this.stack&&(e+="\n"+this.stack),e}});n.captureStackTrace=function(e){var t=(new Error).stack;void 0!==t&&Object.defineProperty(e,"stack",{get:function(){return t}})},Ice.Exception=n;var i=e(n,{__init__:function(e){n.call(this,e),n.captureStackTrace(this)},ice_name:function(){return"Ice::LocalException"}});Ice.LocalException=i;var r=Ice.Slice;r.defineLocalException=function(e,t,n){var i=e;return i.prototype=new t,i.prototype.constructor=i,i.prototype.ice_name=function(){return n},i};var o=e(n,{__init__:function(e){n.call(this,e),n.captureStackTrace(this)},ice_name:function(){return"Ice::UserException"},__write:function(e){e.startWriteException(null),s(this,e,this.__mostDerivedType()),e.endWriteException()},__read:function(e){e.startReadException(),c(this,e,this.__mostDerivedType()),e.endReadException(!1)},__usesClasses:function(){return!1}});Ice.UserException=o;var s=function(e,t,n){void 0!==n&&n!==o&&(t.startWriteSlice(n.__id,-1,n.__parent===o),n.prototype.__writeMemberImpl&&n.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),s(e,t,n.__parent))},c=function(e,t,n){void 0!==n&&n!==o&&(t.startReadSlice(),n.prototype.__readMemberImpl&&n.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),c(e,t,n.__parent))},a=function(e){e.startWriteException(this.__slicedData),s(this,e,this.__mostDerivedType()),e.endWriteException()},h=function(e){e.startReadException(),c(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadException(!0)};r.defineUserException=function(e,t,n,i,r,o,s){var c=e;return c.__parent=t,c.prototype=new t,c.__id="::"+n,c.prototype.ice_name=function(){return n},c.prototype.constructor=c,c.prototype.__mostDerivedType=function(){return c},o&&(c.prototype.__write=a,c.prototype.__read=h),c.prototype.__writeMemberImpl=i,c.prototype.__readMemberImpl=r,s&&(c.prototype.__usesClasses=function(){return!0}),c}}(),function(){Ice.AsyncStatus={Queued:0,Sent:1}}(),function(){var e=Ice.Class({__init__:function(e,t){this.high=e,this.low=t},hashCode:function(){return this.low},equals:function(t){return this===t?!0:t instanceof e?this.high===t.high&&this.low===t.low:!1},toString:function(){return this.high+":"+this.low},toNumber:function(){if(0!==(this.high&e.SIGN_MASK)){var t=~this.low,n=~this.high;if(4294967295>t)t+=1;else if(t=0,n+=1,n>e.HIGH_MAX)return Number.NEGATIVE_INFINITY;return-1*n*e.HIGH_MASK+t}return this.high>e.HIGH_MAX?Number.POSITIVE_INFINITY:this.high*e.HIGH_MASK+this.low}});e.SIGN_MASK=2147483648,e.HIGH_MASK=4294967296,e.HIGH_MAX=2097151,Ice.Long=e}(),function(){var e={Pending:0,Success:1,Failed:2},t=function(t,n){var i=t.__state===e.Success?n.onResponse:n.onException;try{if("function"!=typeof i)n.promise.setState(t.__state,t._args);else{var r=i.apply(null,t._args);r&&"function"==typeof r.then?r.then(function(){var e=arguments;n.promise.succeed.apply(n.promise,e)},function(){var e=arguments;n.promise.fail.apply(n.promise,e)}):n.promise.succeed(r)}}catch(o){n.promise.fail.call(n.promise,o)}},n=Ice.Class({__init__:function(){this.__state=e.Pending,this.__listeners=[]},then:function(e,t){var i=new n,r=this;return setTimeout(function(){r.__listeners.push({promise:i,onResponse:e,onException:t}),r.resolve()},0),i},exception:function(e){return this.then(null,e)},"finally":function(e){var t=new n,i=this,r=function(n){return function(){var i=arguments;try{var r=e.apply(null,i);if(r&&"function"==typeof r.then){var o=function(){n.apply(t,i)};r.then(o).exception(o)}else n.apply(t,i)}catch(s){n.apply(t,i)}}};return setTimeout(function(){i.then(r(t.succeed),r(t.fail))}),t},delay:function(e){var t=new n,i=this,r=function(t,n){return function(){var i=arguments;setTimeout(function(){n.apply(t,i)},e)}};return setTimeout(function(){i.then(r(t,t.succeed),r(t,t.fail))}),t},resolve:function(){if(this.__state!==e.Pending)for(var n;n=this.__listeners.pop();)t(this,n)},setState:function(t,n){if(this.__state===e.Pending&&t!==e.Pending){this.__state=t,this._args=n;var i=this;setTimeout(function(){i.resolve()},0)}},succeed:function(){var t=arguments;return this.setState(e.Success,t),this},fail:function(){var t=arguments;return this.setState(e.Failed,t),this},succeeded:function(){return this.__state===e.Success},failed:function(){return this.__state===e.Failed},completed:function(){return this.__state!==e.Pending}});n.all=function(){if(1===arguments.length&&arguments[0]instanceof Array)return n.all.apply(this,arguments[0]);var e=new n,t=Array.prototype.slice.call(arguments),i=new Array(arguments.length),r=t.length;0===r&&e.succeed.apply(e,i);for(var o=0;o<t.length;++o)!function(n){t[n]&&"function"==typeof t[n].then?t[n].then(function(){i[n]=arguments,r--,0===r&&e.succeed.apply(e,i)},function(){e.fail.apply(e,arguments)}):(i[n]=t[n],r--,0===r&&e.succeed.apply(e,i))}(o);return e},n.try=function(e){return(new n).succeed().then(e)},n.delay=function(e){if(arguments.length>1){var t=new n,i=Array.prototype.slice.call(arguments);return e=i.pop(),t.succeed.apply(t,i).delay(e)}return(new n).succeed().delay(e)},Ice.Promise=n}(),function(){Ice.DispatchStatus={DispatchOK:0,DispatchUserException:1,DispatchAsync:2}}(),function(){var e=Ice.Class({__init__:function(e,t){this._name=e,this._value=t},equals:function(e){if(this===e)return!0;var t=Object.getPrototypeOf(this);return e instanceof t.constructor?this._value==e._value:!1},hashCode:function(){return this._value},toString:function(){return this._name}});Ice.EnumBase=e;var t=e.prototype;Object.defineProperty(t,"name",{enumerable:!0,get:function(){return this._name}}),Object.defineProperty(t,"value",{enumerable:!0,get:function(){return this._value}});var n=Ice.Class({__init__:function(e){this._enumType=e},write:function(e,t){this._enumType.__write(e,t)},writeOpt:function(e,t,n){this._enumType.__writeOpt(e,t,n)},read:function(e){return this._enumType.__read(e)},readOpt:function(e,t){return this._enumType.__readOpt(e,t)}});Ice.EnumHelper=n;var i=function(e,t){e.writeEnum(t)},r=function(e,t,n){e.writeOptValue(t,Ice.OptionalFormat.Size,Ice.BasicStream.prototype.writeEnum,n)},o=Ice.Slice;o.defineEnum=function(t){var o=function(t,n){e.call(this,t,n)};o.prototype=new e,o.prototype.constructor=o;var s=[],c=0;for(var a in t){var h=t[a],u=new o(a,h);s[h]=u,Object.defineProperty(o,a,{enumerable:!0,value:u}),h>c&&(c=h)}return Object.defineProperty(o,"minWireSize",{get:function(){return 1}}),o.__write=i,o.__read=function(e){return e.readEnum(o)},o.__writeOpt=r,o.__readOpt=function(e,t){return e.readOptEnum(t,o)},o.__helper=new n(o),Object.defineProperty(o,"valueOf",{value:function(e){return void 0===e?o:s[e]}}),Object.defineProperty(o,"maxValue",{value:c}),Object.defineProperty(o.prototype,"maxValue",{value:c}),o}}(),function(){Ice.AssertionFailedException=Ice.Class(Error,{__init__:function(e){Error.call(this),Ice.Exception.captureStackTrace(this),this.message=e}}),Ice.Debug={assert:function(e,t){if(!e)throw console.log(void 0===t?"assertion failed":t),console.log(Error().stack),new Ice.AssertionFailedException(void 0===t?"assertion failed":t)}}}(),function(){Ice.FormatType=Ice.Slice.defineEnum({DefaultFormat:0,CompactFormat:1,SlicedFormat:2})}(),function(){Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4}}(),function(){function e(e,t,n){switch(e){case 92:t.push("\\\\");break;case 39:t.push("\\'");break;case 34:t.push('\\"');break;case 8:t.push("\\b");break;case 12:t.push("\\f");break;case 10:t.push("\\n");break;case 13:t.push("\\r");break;case 9:t.push("\\t");break;default:if(e>=32&&126>=e){var i=String.fromCharCode(e);null!==n&&-1!==n.indexOf(i)?(t.push("\\"),t.push(i)):t.push(i)}else{t.push("\\");for(var r=e.toString(8),o=r.length;3>o;o++)t.push("0");t.push(r)}}}function t(e,t){var n=e.charCodeAt(t);if(!(n>=32&&126>=n)){var i;throw i=t>0?"character after `"+e.substring(0,t)+"'":"first character",i+=" is not a printable ASCII character (ordinal "+n+")",new Error(i)}return n}function n(e,n,i,o){if(r.assert(n>=0),r.assert(i<=e.length),n>=i)throw new Error("EOF while decoding string");var s;if("\\"!=e.charAt(n))s=t(e,n++);else{if(n+1==i)throw new Error("trailing backslash");switch(e.charAt(++n)){case"\\":case"'":case'"':s=e.charCodeAt(n++);break;case"b":++n,s="\b".charCodeAt(0);break;case"f":++n,s="\f".charCodeAt(0);break;case"n":++n,s="\n".charCodeAt(0);break;case"r":++n,s="\r".charCodeAt(0);break;case"t":++n,s="	".charCodeAt(0);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":for(var c="01234567",a=0,h=0;3>h&&i>n;++h){var u=e.charAt(n++);if(-1==c.indexOf(u)){--n;break}a=8*a+parseInt(u)}if(a>255){var l="octal value \\"+a.toString(8)+" ("+a+") is out of range";throw new Error(l)}s=a;break;default:s=t(e,n++)}}return o.value=n,s}function i(e,t,i,r){for(var o,s,c,a={value:0};i>t;)o=n(e,t,i,a),t=a.value,128>o?r.push(String.fromCharCode(o)):o>191&&224>o?(s=n(e,t,i,a),t=a.value,r.push(String.fromCharCode((31&o)<<6|63&s))):(s=n(e,t,i,a),t=a.value,c=n(e,t,i,a),t=a.value,r.push(String.fromCharCode((15&o)<<12|(63&s)<<6|63&c)))}var r=Ice.Debug;Ice.StringUtil={findFirstOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;i>r;r++){var o=e.charAt(r);if(-1!=t.indexOf(o))return r}return-1},findFirstNotOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;i>r;r++){var o=e.charAt(r);if(-1==t.indexOf(o))return r}return-1},escapeString:function(t,n){n=void 0===n?null:n;var i,r;if(null!==n)for(i=0,r=n.length;r>i;++i)if(n.charCodeAt(i)<32||n.charCodeAt(i)>126)throw new Error("special characters must be in ASCII range 32-126");var o,s=[];for(i=0,r=t.length;r>i;++i)o=t.charCodeAt(i),128>o?e(o,s,n):o>127&&2048>o?(e(o>>6|192,s,n),e(63&o|128,s,n)):(e(o>>12|224,s,n),e(o>>6&63|128,s,n),e(63&o|128,s,n));return s.join("")},unescapeString:function(e,t,n){t=void 0===t?0:t,n=void 0===n?e.length:n,r.assert(t>=0&&n>=t&&n<=e.length);var o=[];return i(e,t,n,o),o.join("")},splitString:function(e,t){for(var n=[],i="",r=0,o=null;r<e.length;)if(null!==o||'"'!==e.charAt(r)&&"'"!==e.charAt(r)){if(null===o&&"\\"===e.charAt(r)&&r+1<e.length&&('"'===e.charAt(r+1)||"'"===e.charAt(r+1)))++r;else if(null!==o&&"\\"===e.charAt(r)&&r+1<e.length&&e.charAt(r+1)===o)++r;else{if(null!==o&&e.charAt(r)===o){++r,o=null;continue}if(-1!==t.indexOf(e.charAt(r))&&null===o){++r,i.length>0&&(n.push(i),i="");continue}}r<e.length&&(i+=e.charAt(r++))}else o=e.charAt(r++);return i.length>0&&n.push(i),null!==o?null:n},checkQuote:function(e,t){t=void 0===t?0:t;var n=e.charAt(t);if('"'==n||"'"==n){t++;for(var i,r=e.length;r>t&&-1!=(i=e.indexOf(n,t));){if("\\"!=e.charAt(i-1))return i;t=i+1}return-1}return 0},hashCode:function(e){for(var t=0,n=e.length,i=0;n>i;i++)t=31*t+e.charCodeAt(i);return t},toInt:function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error("conversion of `"+e+"' to int failed");return t}}}(),function(){Ice.OptionalFormat=Ice.Slice.defineEnum({F1:0,F2:1,F4:2,F8:3,Size:4,VSize:5,FSize:6,Class:7})}(),function(){function setInternal(e,t,n,i,r){for(var o=e._table[r];null!==o;o=o._nextInBucket)if(o._hash===i&&e.keysEqual(t,o._key))return void(o._value=n);return void e.add(t,n,i,r)}function compareEquals(e,t){return e===t?!0:void 0===e||null===e||void 0===t||null===t?!1:e.equals(t)}function compareIdentity(e,t){return e===t}var __M=Ice.__M,StringUtil=Ice.StringUtil,HashMap=Ice.Class({__init__:function(e,t){var n,i,r;"function"==typeof e?(i=e,r=t):e instanceof HashMap&&(n=e,i=n.keyComparator,r=n.valueComparator),this._size=0,this._head=null,this._initialCapacity=32,this._loadFactor=.75,this._table=[],this._keyComparator="function"==typeof i?i:compareIdentity,this._valueComparator="function"==typeof r?r:compareIdentity;var o,s;if(n instanceof HashMap&&n._size>0){for(this._threshold=n._threshold,s=n._table.length,this._table.length=s,o=0;s>o;o++)this._table[o]=null;this.merge(n)}else for(this._threshold=this._initialCapacity*this._loadFactor,o=0;o<this._initialCapacity;o++)this._table[o]=null},set:function(e,t){var n=this.computeHash(e),i=this.hashIndex(n,this._table.length);return setInternal(this,e,t,n,i)},get:function(e){var t=this.findEntry(e,this.computeHash(e));return void 0!==t?t._value:void 0},has:function(e){return void 0!==this.findEntry(e,this.computeHash(e))},"delete":function(e){for(var t=this.computeHash(e),n=this.hashIndex(t,this._table.length),i=null,r=this._table[n];null!==r;r=r._nextInBucket){if(r._hash===t&&this.keysEqual(e,r._key))return this._size--,null!==i?i._nextInBucket=r._nextInBucket:this._table[n]=r._nextInBucket,null!==r._prev&&(r._prev._next=r._next),null!==r._next&&(r._next._prev=r._prev),this._head===r&&(this._head=r._next),r._value;i=r}return void 0},clear:function(){for(var e=0;e<this._table.length;++e)this._table[e]=null;this._head=null,this._size=0},forEach:function(e,t){t=void 0===t?e:t;for(var n=this._head;null!==n;n=n._next)e.call(t,n._key,n._value)},equals:function(e,t){if(null===e||!(e instanceof HashMap)||this._size!==e._size)return!1;for(var n=this,i=t||function(e,t){return n._valueComparator.call(n._valueComparator,e,t)},r=this._head;null!==r;r=r._next){var o=e.findEntry(r._key,r._hash);if(void 0===o||!i(r._value,o._value))return!1}return!0},clone:function(){return new HashMap(this)},merge:function(e){for(var t=e._head;null!==t;t=t._next)setInternal(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))},add:function(e,t,n,i){var r=Object.create(null,{key:{enumerable:!0,get:function(){return this._key}},value:{enumerable:!0,get:function(){return this._value}},next:{enumerable:!0,get:function(){return this._next}},_key:{enumerable:!1,writable:!0,value:e},_value:{enumerable:!1,writable:!0,value:t},_prev:{enumerable:!1,writable:!0,value:null},_next:{enumerable:!1,writable:!0,value:null},_nextInBucket:{enumerable:!1,writable:!0,value:null},_hash:{enumerable:!1,writable:!0,value:n}});r._nextInBucket=this._table[i],this._table[i]=r,r._next=this._head,null!==this._head&&(this._head._prev=r),this._head=r,this._size++,this._size>=this._threshold&&this.resize(2*this._table.length)},resize:function(e){for(var t=(this._table,[]),n=0;e>n;n++)t[n]=null;for(var i=this._head;null!==i;i=i._next){var r=this.hashIndex(i._hash,e);i._nextInBucket=t[r],t[r]=i}this._table=t,this._threshold=e*this._loadFactor},findEntry:function(e,t){for(var n=this.hashIndex(t,this._table.length),i=this._table[n];null!==i;i=i._nextInBucket)if(i._hash===t&&this.keysEqual(e,i._key))return i;return void 0},hashIndex:function(e,t){return e&t-1},computeHash:function(e){if("function"==typeof e.hashCode)return e.hashCode();var t=0,n=typeof e;if("string"===n||e instanceof String)t=StringUtil.hashCode(e);else if("number"===n||e instanceof Number)t=e.toFixed(0);else if("boolean"===n||e instanceof Boolean)t=e?1:0;else if(null!==e)throw"cannot compute hash for value of type "+n;return t},keysEqual:function(e,t){return this._keyComparator.call(this._keyComparator,e,t)}});Ice.HashMap=HashMap,HashMap.compareEquals=compareEquals,HashMap.compareIdentity=compareIdentity;var prototype=HashMap.prototype;Object.defineProperty(prototype,"size",{get:function(){return this._size}}),Object.defineProperty(prototype,"entries",{get:function(){return this._head}});var Slice=Ice.Slice;Slice.defineDictionary=function(module,name,helperName,keyHelper,valueHelper,fixed,keysEqual,valueType,valuesEqual){module[name]=void 0!==keysEqual||void 0!==valuesEqual?function(e){return new HashMap(e||keysEqual,valuesEqual)}:HashMap;var helper=null;Object.defineProperty(module,helperName,{get:function(){return null===helper&&(helper=Ice.StreamHelpers.generateDictHelper(eval(keyHelper),eval(valueHelper),fixed,eval(valueType),module[name])),helper}})}}(),function(){var e=Ice.Class,t=Object.defineProperty,n=(Ice.HashMap,Ice.OptionalFormat),i={};i.FSizeOptHelper=function(){this.writeOpt=function(e,t,i){if(void 0!==i&&e.writeOpt(t,n.FSize)){var r=e.startSize();this.write(e,i),e.endSize(r)}},this.readOpt=function(e,t){var i;return e.readOpt(t,n.FSize)&&(e.skip(4),i=this.read(e)),i}},i.VSizeOptHelper=function(){this.writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,n.VSize)&&(e.writeSize(this.minWireSize),this.write(e,i))},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(e.skipSize(),i=this.read(e)),i}},i.VSizeContainerOptHelper=function(e){this.writeOpt=function(t,i,r){if(void 0!==r&&t.writeOpt(i,n.VSize)){var o=this.size(r);t.writeSize(o>254?o*e+5:o*e+1),this.write(t,r)}},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(e.skipSize(),i=this.read(e)),i}},i.VSizeContainer1OptHelper=function(){this.writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,n.VSize)&&this.write(e,i)},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(i=this.read(e)),i}};var r=e({write:function(e,t){if(null===t||0===t.length)e.writeSize(0);else{var n=this.elementHelper;e.writeSize(t.length);for(var i=0;i<t.length;++i)n.write(e,t[i])}},read:function(e){var t=this.elementHelper,n=e.readAndCheckSeqSize(t.minWireSize),i=[];i.length=n;for(var r=0;n>r;++r)i[r]=t.read(e);return i},size:function(e){return null===e||void 0===e?0:e.length}});t(r.prototype,"minWireSize",{get:function(){return 1}});var o=new r;o.write=function(e,t){return e.writeByteSeq(t)},o.read=function(e){return e.readByteSeq()},t(o,"elementHelper",{get:function(){return Ice.ByteHelper}}),i.VSizeContainer1OptHelper.call(o);var s=function(e){var t=e.readAndCheckSeqSize(1),n=[];n.length=t;for(var i=this.elementType,r=function(t){e.readObject(function(e){n[t]=e},i)},o=0;t>o;++o)r(o);return n};i.generateSeqHelper=function(e,n,c){if(e===Ice.ByteHelper)return o;var a=new r;return n?1===e.minWireSize?i.VSizeContainer1OptHelper.call(a):i.VSizeContainerOptHelper.call(a,e.minWireSize):i.FSizeOptHelper.call(a),t(a,"elementHelper",{get:function(){return e}}),e==Ice.ObjectHelper&&(t(a,"elementType",{get:function(){return c}}),a.read=s),a};var c=e({write:function(e,t){if(null===t||0===t.size)e.writeSize(0);else{var n=this.keyHelper,i=this.valueHelper;e.writeSize(t.size);for(var r=t.entries;null!==r;r=r.next)n.write(e,r.key),i.write(e,r.value)}},read:function(e){for(var t=this.mapType,n=new t,i=e.readSize(),r=this.keyHelper,o=this.valueHelper,s=0;i>s;++s)n.set(r.read(e),o.read(e));return n},size:function(e){return null===e||void 0===e?0:e.size}});Object.defineProperty(c.prototype,"minWireSize",{get:function(){return 1}});var a=function(e){for(var t=e.readSize(),n=this.mapType,i=new n,r=this.valueType,o=function(t){e.readObject(function(e){i.set(t,e)},r)},s=this.keyHelper,c=0;t>c;++c)o(s.read(e));return i};i.generateDictHelper=function(e,n,r,o,s){var h=new c;return r?i.VSizeContainerOptHelper.call(h,e.minWireSize+n.minWireSize):i.FSizeOptHelper.call(h),t(h,"mapType",{get:function(){return s}}),t(h,"keyHelper",{get:function(){return e}}),t(h,"valueHelper",{get:function(){return n}}),n==Ice.ObjectHelper&&(t(h,"valueType",{get:function(){return o}}),h.read=a),h},Ice.StreamHelpers=i}(),function(){var e=Ice.Class,t=0,n=e({__init__:function(){this.__address=t++},hashCode:function(){return this.__address},ice_isA:function(e){return this.__mostDerivedType().__ids.indexOf(e)>=0},ice_ping:function(){},ice_ids:function(){return this.__mostDerivedType().__ids},ice_id:function(){return this.__mostDerivedType().__id},toString:function(){return"[object "+this.ice_id()+"]"},ice_preMarshal:function(){},ice_postUnmarshal:function(){},__write:function(e){e.startWriteObject(null),i(this,e,this.__mostDerivedType()),e.endWriteObject()},__read:function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),e.endReadObject(!1)},ice_instanceof:function(e){return e?this instanceof e?!0:this.__mostDerivedType().__instanceof(e):!1},__mostDerivedType:function(){return n},equals:function(e){return this===e}});n.write=function(e,t){e.writeObject(t)},n.writeOpt=function(e,t,n){e.writeOptObject(t,n)},n.read=function(e){var t={value:null};return e.readObject(function(e){t.value=e},n),t},n.readOpt=function(e,t){var i={value:void 0};return e.readOptObject(t,function(e){i.value=e},n),i},n.ice_staticId=function(){return n.__id},n.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return this.__parent?this.__parent.__instanceof(e):!1},n.__ids=["::Ice::Object"],n.__id=n.__ids[0],n.__compactId=-1,n.__preserved=!1;var i=function(e,t,r){void 0!==r&&r!==n&&(t.startWriteSlice(r.__id,r.__compactId,r.__parent===n),r.prototype.__writeMemberImpl&&r.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),i(e,t,r.__parent))},r=function(e,t,i){void 0!==i&&i!==n&&(t.startReadSlice(),i.prototype.__readMemberImpl&&i.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),r(e,t,i.__parent))},o=function(e){e.startWriteObject(this.__slicedData),i(this,e,this.__mostDerivedType()),e.endWriteObject()},s=function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadObject(!0)};Ice.Object=n;var c=Ice.Slice;c.defineLocalObject=function(e,t){var n=e||function(){};return void 0!==t&&(n.prototype=new t,n.__parent=t,n.prototype.constructor=e),n},c.defineObject=function(e,t,i,r,c,a,h,u,l){var d=e||function(){};return d.prototype=new t,d.__parent=t,d.__ids=c,d.__id=c[r],d.__compactId=a,d.__instanceof=n.__instanceof,d.__implements=i,d.write=function(e,t){e.writeObject(t)},d.writeOpt=function(e,t,n){e.writeOptObject(t,n)},d.read=function(e){var t={value:null};return e.readObject(function(e){t.value=e},d),t},d.readOpt=function(e,t){var n={value:void 0};return e.readOptObject(t,function(e){n.value=e},d),n},d.ice_staticId=function(){return c[r]},d.prototype.constructor=d,d.prototype.__mostDerivedType=function(){return d},l&&(d.prototype.__write=o,d.prototype.__read=s),d.prototype.__writeMemberImpl=h,d.prototype.__readMemberImpl=u,d}}(),function(){var e=Ice.StringUtil;Ice.HashUtil={addBoolean:function(e,t){return(e<<5)+e^(t?0:1)},addString:function(t,n){return void 0!==n&&null!==n&&(t=(t<<5)+t^e.hashCode(n)),t},addNumber:function(e,t){return(e<<5)+e^t},addHashable:function(e,t){return void 0!==t&&null!==t&&(e=(e<<5)+e^t.hashCode()),e},addArray:function(e,t,n){if(void 0!==t&&null!==t)for(var i=0;i<t.length;++i)e=n(e,t[i]);return e}}}(),function(){var e=Ice.Promise,t=Ice.Class(e,{__init__:function(t,n,i,r,o){e.call(this),void 0!==t&&(this._communicator=t,this._instance=null!==t?t.instance:null,this._operation=n,this._connection=i,this._proxy=r,this._adapter=o)}}),n=t.prototype,i=Object.defineProperty;i(n,"communicator",{get:function(){return this._communicator}}),i(n,"connection",{get:function(){return this._connection}}),i(n,"proxy",{get:function(){return this._proxy}}),i(n,"adapter",{get:function(){return this._adapter}}),i(n,"operation",{get:function(){return this._operation}}),Ice.AsyncResultBase=t}(),function(){var e=Ice.ArrayUtil,t=e.eq,n=function(e){if(this===e)return!0;if(null===e||void 0===e)return!1;if(this.prototype!==e.prototype)return!1;var n,i;for(var r in this)if(n=this[r],i=e[r],"function"!=typeof n&&!t(n,i))return!1;return!0},i=function(){var t,n=new this.constructor;for(var i in this)if(t=this[i],void 0===t||null===t)n[i]=t;else{if("function"==typeof t)continue;n[i]="function"==typeof t.clone?t.clone():t instanceof Array?e.clone(t):t}return n},r=function(e,t){if("function"==typeof t.hashCode)return Ice.HashUtil.addHashable(e,t);if(t instanceof Array)return Ice.HashUtil.addArray(e,t,r);var n=typeof t;return t instanceof String||"string"==n?Ice.HashUtil.addString(e,t):t instanceof Number||"number"==n?Ice.HashUtil.addNumber(e,t):t instanceof Boolean||"boolean"==n?Ice.HashUtil.addBoolean(e,t):void 0},o=function(){var e,t=5381;for(var n in this)e=this[n],void 0!==e&&null!==e&&"function"!=typeof e&&(t=r(t,e));return t};Ice.Slice.defineStruct=function(e,t,r,s,c,a){var h=e;return h.prototype.clone=i,h.prototype.equals=n,t&&(h.prototype.hashCode=o),s&&r&&(h.prototype.__write=r,h.prototype.__read=s,h.write=function(e,t){t.__write(e)},h.read=function(e){var t=new this;return t.__read(e),t},Object.defineProperty(h,"minWireSize",{get:function(){return c}}),a?Ice.StreamHelpers.VSizeOptHelper.call(h):Ice.StreamHelpers.FSizeOptHelper.call(h)),h}}(),function(){Ice.CompactIdRegistry=new Ice.HashMap}(),function(){var e=Ice.Long;ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);t=void 0===t?n.length:t;for(var i=new Uint8Array(new ArrayBuffer(t-e)),r=0,o=i.length;o>r;r++)i[r]=n[r+e];return i.buffer});var t="BufferOverflowException",n="BufferUnderflowException",i="IndexOutOfBoundsException",r=Ice.Class({__init__:function(e){void 0!==e?(this.b=e,this.v=new DataView(this.b)):(this.b=null,this.v=null),this._position=0,this._limit=0,this._shrinkCounter=0},empty:function(){return 0===this._limit},resize:function(e){0===e?this.clear():e>this.capacity&&this.reserve(e),this._limit=e},clear:function(){this.b=null,this.v=null,this._position=0,this._limit=0},expand:function(e){var t=0===this.capacity?e:this._position+e;t>this._limit&&this.resize(t)},reset:function(){this._limit>0&&2*this._limit<this.capacity?++this._shrinkCounter>2&&(this.reserve(this._limit),this._shrinkCounter=0):this._shrinkCounter=0,this._limit=0,this._position=0},reserve:function(e){if(e>this.capacity){var t=Math.max(e,2*this.capacity);if(t=Math.max(1024,t),this.b){var n=new Uint8Array(t);n.set(new Uint8Array(this.b)),this.b=n.buffer}else this.b=new ArrayBuffer(t);this.v=new DataView(this.b)}else{if(!(e<this.capacity))return;this.b=this.b.slice(0,this.capacity),this.v=new DataView(this.b)}},put:function(e){if(this._position===this._limit)throw new Error(t);this.v.setUint8(this._position,e),this._position++},putAt:function(e,t){if(e>=this._limit)throw new Error(i);this.v.setUint8(e,t)},putArray:function(e){if(!(e instanceof Uint8Array))throw new TypeError("argument is not a Uint8Array");if(e.byteLength>0){if(this._position+e.length>this._limit)throw new Error(t);new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position),this._position+=e.byteLength}},putShort:function(e){if(this._position+2>this._limit)throw new Error(t);this.v.setInt16(this._position,e,!0),this._position+=2},putInt:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setInt32(this._position,e,!0),this._position+=4},putIntAt:function(e,t){if(e+4>this._limit||0>e)throw new Error(i);this.v.setInt32(e,t,!0)},putFloat:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setFloat32(this._position,e,!0),this._position+=4},putDouble:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setFloat64(this._position,e,!0),this._position+=8},putLong:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setInt32(this._position,e.low,!0),this._position+=4,this.v.setInt32(this._position,e.high,!0),this._position+=4},writeString:function(e,t){var n=unescape(encodeURIComponent(t));e.writeSize(n.length),e.expand(n.length),this.putString(n,n.length)},putString:function(e,n){if(this._position+n>this._limit)throw new Error(t);for(var i=0;n>i;++i)this.v.setUint8(this._position,e.charCodeAt(i)),this._position++},get:function(){if(this._position>=this._limit)throw new Error(n);var e=this.v.getUint8(this._position);return this._position++,e},getAt:function(e){if(0>e||e>=this._limit)throw new Error(i);return this.v.getUint8(e)},getArray:function(e){if(this._position+e>this._limit)throw new Error(n);var t=this.b.slice(this._position,this._position+e);return this._position+=e,new Uint8Array(t)},getArrayAt:function(e,t){if(e+t>this._limit)throw new Error(n);return t=void 0===t?this.b.byteLength-e:t,new Uint8Array(this.b.slice(e,e+t))},getShort:function(){if(this._limit-this._position<2)throw new Error(n);var e=this.v.getInt16(this._position,!0);return this._position+=2,e},getInt:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getInt32(this._position,!0);return this._position+=4,e},getFloat:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getFloat32(this._position,!0);return this._position+=4,e},getDouble:function(){if(this._limit-this._position<8)throw new Error(n);var e=this.v.getFloat64(this._position,!0);return this._position+=8,e},getLong:function(){if(this._limit-this._position<8)throw new Error(n);var t=new e;return t.low=this.v.getInt32(this._position,!0),this._position+=4,t.high=this.v.getInt32(this._position,!0),this._position+=4,t},getString:function(e){if(this._position+e>this._limit)throw new Error(n);for(var t=new DataView(this.b,this._position,e),i="",r=0;e>r;++r)i+=String.fromCharCode(t.getUint8(r));return this._position+=e,i=decodeURIComponent(escape(i))}}),o=r.prototype;Object.defineProperty(o,"position",{get:function(){return this._position},set:function(e){e>=0&&e<=this._limit&&(this._position=e)}}),Object.defineProperty(o,"limit",{get:function(){return this._limit},set:function(e){e<=this.capacity&&(this._limit=e,this._position>e&&(this._position=e))}}),Object.defineProperty(o,"capacity",{get:function(){return null===this.b?0:this.b.byteLength}}),Object.defineProperty(o,"remaining",{get:function(){return this._limit-this._position}}),r.createNative=function(e){return new Uint8Array(void 0===e?0:e)},Ice.Buffer=r}(),function(){Slice.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",!0),Slice.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",!0),Slice.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",!0),Slice.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",!0),Slice.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",!0),Slice.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",!0),Slice.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",!0),Slice.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",!1),Slice.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",!1,"Ice.Object"),Slice.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",!1)
}(),function(){Ice.Identity=Slice.defineStruct(function(e,t){this.name=void 0!==e?e:null,this.category=void 0!==t?t:null},!0,function(e){e.writeString(this.name),e.writeString(this.category)},function(e){this.name=e.readString(),this.category=e.readString()},2,!1),Slice.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",!1,Ice.HashMap.compareEquals,"Ice.Object"),Slice.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",!1)}(),function(){Ice.ProtocolVersion=Slice.defineStruct(function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0},!0,function(e){e.writeByte(this.major),e.writeByte(this.minor)},function(e){this.major=e.readByte(),this.minor=e.readByte()},2,!0),Ice.EncodingVersion=Slice.defineStruct(function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0},!0,function(e){e.writeByte(this.major),e.writeByte(this.minor)},function(e){this.major=e.readByte(),this.minor=e.readByte()},2,!0)}(),function(){var e=function(){this.typeId="",this.compactId=-1,this.bytes=[],this.objects=[],this.hasOptionalMembers=!1,this.isLastSlice=!1};Ice.SliceInfo=e;var t=function(e){this.slices=e};Ice.SlicedData=t;var n=Ice.Class(Ice.Object,{__init__:function(e){this._unknownTypeId=e},getUnknownTypeId:function(){return this._unknownTypeId},__write:function(e){e.startWriteObject(this._slicedData),e.endWriteObject()},__read:function(e){e.startReadObject(),this._slicedData=e.endReadObject(!0)}});Ice.UnknownSlicedObject=n}(),function(){var e=Ice.HashMap,t=Ice.Debug,n=Ice.Class({__init__:function(){this._adapterEndpointsTable=new e,this._objectTable=new e(e.compareEquals)},clear:function(){this._adapterEndpointsTable.clear(),this._objectTable.clear()},getAdapterEndpoints:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._adapterEndpointsTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.endpoints):(n.value=!1,null)},addAdapterEndpoints:function(e,t){this._adapterEndpointsTable.set(e,new i(Date.now(),t))},removeAdapterEndpoints:function(e){var t=this._adapterEndpointsTable.get(e);return this._adapterEndpointsTable.delete(e),void 0!==t?t.endpoints:null},getObjectReference:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._objectTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.reference):(n.value=!1,null)},addObjectReference:function(e,t){this._objectTable.set(e,new r(Date.now(),t))},removeObjectReference:function(e){var t=this._objectTable.get(e);return this._objectTable.delete(e),void 0!==t?t.reference:null},checkTTL:function(e,n){return t.assert(0!==n),0>n?!0:Date.now()-e<=1e3*n}});Ice.LocatorTable=n;var i=function(e,t){this.time=e,this.endpoints=t},r=function(e,t){this.time=e,this.reference=t}}(),function(){Ice.InitializationException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::InitializationException"),Ice.PluginInitializationException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::PluginInitializationException"),Ice.CollocationOptimizationException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CollocationOptimizationException"),Ice.AlreadyRegisteredException=Slice.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:null,this.id=void 0!==t?t:null},Ice.LocalException,"Ice::AlreadyRegisteredException"),Ice.NotRegisteredException=Slice.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:null,this.id=void 0!==t?t:null},Ice.LocalException,"Ice::NotRegisteredException"),Ice.TwowayOnlyException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.operation=void 0!==e?e:null},Ice.LocalException,"Ice::TwowayOnlyException"),Ice.CloneNotImplementedException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CloneNotImplementedException"),Ice.UnknownException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.unknown=void 0!==e?e:null},Ice.LocalException,"Ice::UnknownException"),Ice.UnknownLocalException=Slice.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownLocalException"),Ice.UnknownUserException=Slice.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownUserException"),Ice.VersionMismatchException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::VersionMismatchException"),Ice.CommunicatorDestroyedException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CommunicatorDestroyedException"),Ice.ObjectAdapterDeactivatedException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.name=void 0!==e?e:null},Ice.LocalException,"Ice::ObjectAdapterDeactivatedException"),Ice.ObjectAdapterIdInUseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:null},Ice.LocalException,"Ice::ObjectAdapterIdInUseException"),Ice.NoEndpointException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.proxy=void 0!==e?e:null},Ice.LocalException,"Ice::NoEndpointException"),Ice.EndpointParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::EndpointParseException"),Ice.EndpointSelectionTypeParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::EndpointSelectionTypeParseException"),Ice.VersionParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::VersionParseException"),Ice.IdentityParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::IdentityParseException"),Ice.ProxyParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::ProxyParseException"),Ice.IllegalIdentityException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:null},Ice.LocalException,"Ice::IllegalIdentityException"),Ice.IllegalServantException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::IllegalServantException"),Ice.RequestFailedException=Slice.defineLocalException(function(e,t,n,i){Ice.LocalException.call(this,i),this.id=void 0!==e?e:null,this.facet=void 0!==t?t:null,this.operation=void 0!==n?n:null},Ice.LocalException,"Ice::RequestFailedException"),Ice.ObjectNotExistException=Slice.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::ObjectNotExistException"),Ice.FacetNotExistException=Slice.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::FacetNotExistException"),Ice.OperationNotExistException=Slice.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::OperationNotExistException"),Ice.SyscallException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.error=void 0!==e?e:0},Ice.LocalException,"Ice::SyscallException"),Ice.SocketException=Slice.defineLocalException(function(e,t){Ice.SyscallException.call(this,e,t)},Ice.SyscallException,"Ice::SocketException"),Ice.FileException=Slice.defineLocalException(function(e,t,n){Ice.SyscallException.call(this,e,n),this.path=void 0!==t?t:null},Ice.SyscallException,"Ice::FileException"),Ice.ConnectFailedException=Slice.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectFailedException"),Ice.ConnectionRefusedException=Slice.defineLocalException(function(e,t){Ice.ConnectFailedException.call(this,e,t)},Ice.ConnectFailedException,"Ice::ConnectionRefusedException"),Ice.ConnectionLostException=Slice.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectionLostException"),Ice.DNSException=Slice.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n),this.error=void 0!==e?e:0,this.host=void 0!==t?t:null},Ice.LocalException,"Ice::DNSException"),Ice.OperationInterruptedException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::OperationInterruptedException"),Ice.TimeoutException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::TimeoutException"),Ice.ConnectTimeoutException=Slice.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectTimeoutException"),Ice.CloseTimeoutException=Slice.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::CloseTimeoutException"),Ice.ConnectionTimeoutException=Slice.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectionTimeoutException"),Ice.InvocationTimeoutException=Slice.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::InvocationTimeoutException"),Ice.InvocationCanceledException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::InvocationCanceledException"),Ice.ProtocolException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::ProtocolException"),Ice.BadMagicException=Slice.defineLocalException(function(e,t,n){Ice.ProtocolException.call(this,e,n),this.badMagic=void 0!==t?t:null},Ice.ProtocolException,"Ice::BadMagicException"),Ice.UnsupportedProtocolException=Slice.defineLocalException(function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:null,this.supported=void 0!==n?n:null},Ice.ProtocolException,"Ice::UnsupportedProtocolException"),Ice.UnsupportedEncodingException=Slice.defineLocalException(function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:null,this.supported=void 0!==n?n:null},Ice.ProtocolException,"Ice::UnsupportedEncodingException"),Ice.UnknownMessageException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownMessageException"),Ice.ConnectionNotValidatedException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ConnectionNotValidatedException"),Ice.UnknownRequestIdException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownRequestIdException"),Ice.UnknownReplyStatusException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownReplyStatusException"),Ice.CloseConnectionException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CloseConnectionException"),Ice.ForcedCloseConnectionException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ForcedCloseConnectionException"),Ice.IllegalMessageSizeException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::IllegalMessageSizeException"),Ice.CompressionException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CompressionException"),Ice.DatagramLimitException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::DatagramLimitException"),Ice.MarshalException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::MarshalException"),Ice.ProxyUnmarshalException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::ProxyUnmarshalException"),Ice.UnmarshalOutOfBoundsException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::UnmarshalOutOfBoundsException"),Ice.NoObjectFactoryException=Slice.defineLocalException(function(e,t,n){Ice.MarshalException.call(this,e,n),this.type=void 0!==t?t:null},Ice.MarshalException,"Ice::NoObjectFactoryException"),Ice.UnexpectedObjectException=Slice.defineLocalException(function(e,t,n,i){Ice.MarshalException.call(this,e,i),this.type=void 0!==t?t:null,this.expectedType=void 0!==n?n:null},Ice.MarshalException,"Ice::UnexpectedObjectException"),Ice.MemoryLimitException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::MemoryLimitException"),Ice.StringConversionException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::StringConversionException"),Ice.EncapsulationException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::EncapsulationException"),Ice.FeatureNotSupportedException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.unsupportedFeature=void 0!==e?e:null},Ice.LocalException,"Ice::FeatureNotSupportedException"),Ice.SecurityException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::SecurityException"),Ice.FixedProxyException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::FixedProxyException"),Ice.ResponseSentException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::ResponseSentException")}(),function(){var e=Ice.Class({__init__:function(e){this._prefix=void 0!==e&&e.length>0?e+": ":""},print:function(e){this.write(e,!1)},trace:function(e,t){{var n=[];new Date}n.push("-- "),n.push(this.timestamp()),n.push(" "),n.push(this._prefix),n.push(e),n.push(": "),n.push(t),this.write(n.join(""),!0)},warning:function(e){{var t=[];new Date}t.push("-! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("warning: "),t.push(e),this.write(t.join(""),!0)},error:function(e){{var t=[];new Date}t.push("!! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("error: "),t.push(e),this.write(t.join(""),!0)},cloneWithPrefix:function(t){return new e(t)},write:function(e,t){t&&(e=e.replace(/\n/g,"\n   ")),console.log(e)},timestamp:function(){var e=new Date,t=e.getMonth()+1;t=10>t?"0"+t:t;var n=e.getDate();return n=10>n?"0"+n:n,t+"-"+n+"-"+e.getFullYear()+" "+e.toLocaleTimeString()+"."+e.getMilliseconds()}});Ice.Logger=e}(),function(){function e(e){var t=e.indexOf(".");if(-1===t)throw new Ice.VersionParseException("malformed version value `"+e+"'");var n,r=e.substring(0,t);try{n=i.toInt(r)}catch(o){throw new Ice.VersionParseException("invalid version value `"+e+"'")}if(1>n||n>255)throw new Ice.VersionParseException("range error in version `"+e+"'");return n}function t(e){var t=e.indexOf(".");if(-1===t)throw new Ice.VersionParseException("malformed version value `"+e+"'");var n,r=e.substring(t+1);try{n=i.toInt(r)}catch(o){throw new Ice.VersionParseException("invalid version value `"+e+"'")}if(0>n||n>255)throw new Ice.VersionParseException("range error in version `"+e+"'");return n}function n(e,t){return e+"."+t}var i=Ice.StringUtil,r={};Ice.Encoding_1_0=new Ice.EncodingVersion(1,0),Ice.Encoding_1_1=new Ice.EncodingVersion(1,1),Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0),r.headerSize=14,r.magic=Ice.Buffer.createNative([73,99,101,80]),r.protocolMajor=1,r.protocolMinor=0,r.protocolEncodingMajor=1,r.protocolEncodingMinor=0,r.encodingMajor=1,r.encodingMinor=1,r.requestMsg=0,r.requestBatchMsg=1,r.replyMsg=2,r.validateConnectionMsg=3,r.closeConnectionMsg=4,r.replyOK=0,r.replyUserException=1,r.replyObjectNotExist=2,r.replyFacetNotExist=3,r.replyOperationNotExist=4,r.replyUnknownLocalException=5,r.replyUnknownUserException=6,r.replyUnknownException=7,r.requestHdr=Ice.Buffer.createNative([r.magic[0],r.magic[1],r.magic[2],r.magic[3],r.protocolMajor,r.protocolMinor,r.protocolEncodingMajor,r.protocolEncodingMinor,r.requestMsg,0,0,0,0,0,0,0,0,0]),r.requestBatchHdr=Ice.Buffer.createNative([r.magic[0],r.magic[1],r.magic[2],r.magic[3],r.protocolMajor,r.protocolMinor,r.protocolEncodingMajor,r.protocolEncodingMinor,r.requestBatchMsg,0,0,0,0,0,0,0,0,0]),r.replyHdr=Ice.Buffer.createNative([r.magic[0],r.magic[1],r.magic[2],r.magic[3],r.protocolMajor,r.protocolMinor,r.protocolEncodingMajor,r.protocolEncodingMinor,r.replyMsg,0,0,0,0,0]),r.currentProtocol=new Ice.ProtocolVersion(r.protocolMajor,r.protocolMinor),r.currentProtocolEncoding=new Ice.EncodingVersion(r.protocolEncodingMajor,r.protocolEncodingMinor),r.currentEncoding=new Ice.EncodingVersion(r.encodingMajor,r.encodingMinor),r.checkSupportedProtocol=function(e){if(e.major!==r.currentProtocol.major||e.minor>r.currentProtocol.minor)throw new Ice.UnsupportedProtocolException("",e,r.currentProtocol)},r.checkSupportedProtocolEncoding=function(e){if(e.major!==r.currentProtocolEncoding.major||e.minor>r.currentProtocolEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,r.currentProtocolEncoding)},r.checkSupportedEncoding=function(e){if(e.major!==r.currentEncoding.major||e.minor>r.currentEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,r.currentEncoding)},r.getCompatibleProtocol=function(e){return e.major!==r.currentProtocol.major?e:e.minor<r.currentProtocol.minor?e:r.currentProtocol},r.getCompatibleEncoding=function(e){return e.major!==r.currentEncoding.major?e:e.minor<r.currentEncoding.minor?e:r.currentEncoding},r.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor},Ice.stringToProtocolVersion=function(n){return new Ice.ProtocolVersion(e(n),t(n))},Ice.stringToEncodingVersion=function(n){return new Ice.EncodingVersion(e(n),t(n))},Ice.protocolVersionToString=function(e){return n(e.major,e.minor)},Ice.encodingVersionToString=function(e){return n(e.major,e.minor)},Ice.Protocol=r}(),function(){Ice.EndpointSelectionType=Slice.defineEnum({Random:0,Ordered:1})}(),function(){var e=function(e,t,n){this._pattern=e,this._deprecated=t,this._deprecatedBy=n};Object.defineProperty(e.prototype,"pattern",{get:function(){return this._pattern}}),Object.defineProperty(e.prototype,"deprecated",{get:function(){return this._deprecated}}),Object.defineProperty(e.prototype,"deprecatedBy",{get:function(){return this._deprecatedBy}}),Ice.Property=e}(),function(){var e={},t=Ice.Property;e.IceProps=[new t("/^Ice.ACM.Client/",!0,null),new t("/^Ice.ACM.Server/",!0,null),new t("/^Ice.ACM.Timeout/",!1,null),new t("/^Ice.ACM.Heartbeat/",!1,null),new t("/^Ice.ACM.Close/",!1,null),new t("/^Ice.ACM/",!1,null),new t("/^Ice.ACM.Client.Timeout/",!1,null),new t("/^Ice.ACM.Client.Heartbeat/",!1,null),new t("/^Ice.ACM.Client.Close/",!1,null),new t("/^Ice.ACM.Client/",!1,null),new t("/^Ice.ACM.Server.Timeout/",!1,null),new t("/^Ice.ACM.Server.Heartbeat/",!1,null),new t("/^Ice.ACM.Server.Close/",!1,null),new t("/^Ice.ACM.Server/",!1,null),new t("/^Ice.Admin.ACM.Timeout/",!1,null),new t("/^Ice.Admin.ACM.Heartbeat/",!1,null),new t("/^Ice.Admin.ACM.Close/",!1,null),new t("/^Ice.Admin.ACM/",!1,null),new t("/^Ice.Admin.AdapterId/",!1,null),new t("/^Ice.Admin.Endpoints/",!1,null),new t("/^Ice.Admin.Locator.EndpointSelection/",!1,null),new t("/^Ice.Admin.Locator.ConnectionCached/",!1,null),new t("/^Ice.Admin.Locator.PreferSecure/",!1,null),new t("/^Ice.Admin.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Locator.Locator/",!1,null),new t("/^Ice.Admin.Locator.Router/",!1,null),new t("/^Ice.Admin.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Locator.Context../",!1,null),new t("/^Ice.Admin.Locator/",!1,null),new t("/^Ice.Admin.PublishedEndpoints/",!1,null),new t("/^Ice.Admin.ReplicaGroupId/",!1,null),new t("/^Ice.Admin.Router.EndpointSelection/",!1,null),new t("/^Ice.Admin.Router.ConnectionCached/",!1,null),new t("/^Ice.Admin.Router.PreferSecure/",!1,null),new t("/^Ice.Admin.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Router.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Router.Locator/",!1,null),new t("/^Ice.Admin.Router.Router/",!1,null),new t("/^Ice.Admin.Router.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Router.Context../",!1,null),new t("/^Ice.Admin.Router/",!1,null),new t("/^Ice.Admin.ProxyOptions/",!1,null),new t("/^Ice.Admin.ThreadPool.Size/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeMax/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeWarn/",!1,null),new t("/^Ice.Admin.ThreadPool.StackSize/",!1,null),new t("/^Ice.Admin.ThreadPool.Serialize/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadIdleTime/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadPriority/",!1,null),new t("/^Ice.Admin.MessageSizeMax/",!1,null),new t("/^Ice.Admin.DelayCreation/",!1,null),new t("/^Ice.Admin.Enabled/",!1,null),new t("/^Ice.Admin.Facets/",!1,null),new t("/^Ice.Admin.InstanceName/",!1,null),new t("/^Ice.Admin.Logger.KeepLogs/",!1,null),new t("/^Ice.Admin.Logger.KeepTraces/",!1,null),new t("/^Ice.Admin.Logger.Properties/",!1,null),new t("/^Ice.Admin.ServerId/",!1,null),new t("/^Ice.BackgroundLocatorCacheUpdates/",!1,null),new t("/^Ice.BatchAutoFlush/",!0,null),new t("/^Ice.BatchAutoFlushSize/",!1,null),new t("/^Ice.ChangeUser/",!1,null),new t("/^Ice.ClientAccessPolicyProtocol/",!1,null),new t("/^Ice.Compression.Level/",!1,null),new t("/^Ice.CollectObjects/",!1,null),new t("/^Ice.Config/",!1,null),new t("/^Ice.ConsoleListener/",!1,null),new t("/^Ice.Default.CollocationOptimized/",!1,null),new t("/^Ice.Default.EncodingVersion/",!1,null),new t("/^Ice.Default.EndpointSelection/",!1,null),new t("/^Ice.Default.Host/",!1,null),new t("/^Ice.Default.Locator.EndpointSelection/",!1,null),new t("/^Ice.Default.Locator.ConnectionCached/",!1,null),new t("/^Ice.Default.Locator.PreferSecure/",!1,null),new t("/^Ice.Default.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Default.Locator.Locator/",!1,null),new t("/^Ice.Default.Locator.Router/",!1,null),new t("/^Ice.Default.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Default.Locator.Context../",!1,null),new t("/^Ice.Default.Locator/",!1,null),new t("/^Ice.Default.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.InvocationTimeout/",!1,null),new t("/^Ice.Default.Package/",!1,null),new t("/^Ice.Default.PreferSecure/",!1,null),new t("/^Ice.Default.Protocol/",!1,null),new t("/^Ice.Default.Router.EndpointSelection/",!1,null),new t("/^Ice.Default.Router.ConnectionCached/",!1,null),new t("/^Ice.Default.Router.PreferSecure/",!1,null),new t("/^Ice.Default.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Router.InvocationTimeout/",!1,null),new t("/^Ice.Default.Router.Locator/",!1,null),new t("/^Ice.Default.Router.Router/",!1,null),new t("/^Ice.Default.Router.CollocationOptimized/",!1,null),new t("/^Ice.Default.Router.Context../",!1,null),new t("/^Ice.Default.Router/",!1,null),new t("/^Ice.Default.SlicedFormat/",!1,null),new t("/^Ice.Default.SourceAddress/",!1,null),new t("/^Ice.Default.Timeout/",!1,null),new t("/^Ice.EventLog.Source/",!1,null),new t("/^Ice.FactoryAssemblies/",!1,null),new t("/^Ice.HTTPProxyHost/",!1,null),new t("/^Ice.HTTPProxyPort/",!1,null),new t("/^Ice.ImplicitContext/",!1,null),new t("/^Ice.InitPlugins/",!1,null),new t("/^Ice.IPv4/",!1,null),new t("/^Ice.IPv6/",!1,null),new t("/^Ice.LogFile/",!1,null),new t("/^Ice.LogStdErr.Convert/",!1,null),new t("/^Ice.MessageSizeMax/",!1,null),new t("/^Ice.Nohup/",!1,null),new t("/^Ice.NullHandleAbort/",!1,null),new t("/^Ice.Override.CloseTimeout/",!1,null),new t("/^Ice.Override.Compress/",!1,null),new t("/^Ice.Override.ConnectTimeout/",!1,null),new t("/^Ice.Override.Timeout/",!1,null),new t("/^Ice.Override.Secure/",!1,null),new t("/^Ice.Package../",!1,null),new t("/^Ice.Plugin../",!1,null),new t("/^Ice.PluginLoadOrder/",!1,null),new t("/^Ice.PreferIPv6Address/",!1,null),new t("/^Ice.PrintAdapterReady/",!1,null),new t("/^Ice.PrintProcessId/",!1,null),new t("/^Ice.PrintStackTraces/",!1,null),new t("/^Ice.ProgramName/",!1,null),new t("/^Ice.RetryIntervals/",!1,null),new t("/^Ice.ServerIdleTime/",!1,null),new t("/^Ice.SOCKSProxyHost/",!1,null),new t("/^Ice.SOCKSProxyPort/",!1,null),new t("/^Ice.StdErr/",!1,null),new t("/^Ice.StdOut/",!1,null),new t("/^Ice.SyslogFacility/",!1,null),new t("/^Ice.ThreadPool.Client.Size/",!1,null),new t("/^Ice.ThreadPool.Client.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Client.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Client.StackSize/",!1,null),new t("/^Ice.ThreadPool.Client.Serialize/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadPriority/",!1,null),new t("/^Ice.ThreadPool.Server.Size/",!1,null),new t("/^Ice.ThreadPool.Server.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Server.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Server.StackSize/",!1,null),new t("/^Ice.ThreadPool.Server.Serialize/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadPriority/",!1,null),new t("/^Ice.ThreadPriority/",!1,null),new t("/^Ice.Trace.Admin.Properties/",!1,null),new t("/^Ice.Trace.Admin.Logger/",!1,null),new t("/^Ice.Trace.Locator/",!1,null),new t("/^Ice.Trace.Network/",!1,null),new t("/^Ice.Trace.Protocol/",!1,null),new t("/^Ice.Trace.Retry/",!1,null),new t("/^Ice.Trace.Slicing/",!1,null),new t("/^Ice.Trace.ThreadPool/",!1,null),new t("/^Ice.UDP.RcvSize/",!1,null),new t("/^Ice.UDP.SndSize/",!1,null),new t("/^Ice.TCP.Backlog/",!1,null),new t("/^Ice.TCP.RcvSize/",!1,null),new t("/^Ice.TCP.SndSize/",!1,null),new t("/^Ice.UseApplicationClassLoader/",!1,null),new t("/^Ice.UseSyslog/",!1,null),new t("/^Ice.Warn.AMICallback/",!1,null),new t("/^Ice.Warn.Connections/",!1,null),new t("/^Ice.Warn.Datagrams/",!1,null),new t("/^Ice.Warn.Dispatch/",!1,null),new t("/^Ice.Warn.Endpoints/",!1,null),new t("/^Ice.Warn.UnknownProperties/",!1,null),new t("/^Ice.Warn.UnusedProperties/",!1,null),new t("/^Ice.CacheMessageBuffers/",!1,null),new t("/^Ice.ThreadInterruptSafe/",!1,null)],e.validProps=[e.IceProps],e.clPropNames=["Ice"],Ice.PropertyNames=e}(),function(){var e=Ice.HashMap,t=Ice.AlreadyRegisteredException,n=Ice.NotRegisteredException,i=Ice.Class({__init__:function(){this._factoryMap=new e},add:function(e,n){var i,r;if(i=this._factoryMap.get(n),void 0!==i)throw r=new t,r.id=n,r.kindOfObject="object factory",r;this._factoryMap.set(n,e)},remove:function(e){var t,i;if(t=this._factoryMap.get(e),void 0===t)throw i=new n,i.id=e,i.kindOfObject="object factory",i;this._factoryMap.delete(e),t.destroy()},find:function(e){return this._factoryMap.get(e)},destroy:function(){var t=this._factoryMap,n=t.entries;for(this._factoryMap=new e;null!==n;)n.value.destroy(),n=n.next}});Ice.ObjectFactoryManager=i}(),function(){Slice.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.OperationMode=Slice.defineEnum({Normal:0,Nonmutating:1,Idempotent:2}),Ice.Current=Slice.defineStruct(function(e,t,n,i,r,o,s,c,a){this.adapter=void 0!==e?e:null,this.con=void 0!==t?t:null,this.id=void 0!==n?n:null,this.facet=void 0!==i?i:null,this.operation=void 0!==r?r:null,this.mode=void 0!==o?o:Ice.Normal,this.ctx=void 0!==s?s:null,this.requestId=void 0!==c?c:0,this.encoding=void 0!==a?a:null},!1)}(),function(){var e=Ice.Class(Error,{__init__:function(t){t instanceof Ice.LocalException?this._ex=t:(Ice.Debug.assert(t instanceof e),this._ex=t._ex)}}),t=e.prototype;Object.defineProperty(t,"inner",{get:function(){return this._ex}}),Ice.RetryException=e}(),function(){Ice.ObjectFactory=Ice.Class({create:function(){throw new Error("not implemented")},destroy:function(){throw new Error("not implemented")}})}(),function(){function e(e,t){var n=new p;n.__read(t),e.push("\nidentity = "+t.instance.identityToString(n));var i=Ice.StringSeqHelper.read(t);e.push("\nfacet = "),i.length>0&&e.push(l.escapeString(i[0],""));var r=t.readString();e.push("\noperation = "+r)}function t(e,t){var n=t.readInt();e.push("\nrequest id = "+n),0===n&&e.push(" (oneway)"),r(e,t)}function n(e,t){var n=t.readInt();e.push("\nnumber of requests = "+n);for(var i=0;n>i;++i)e.push("\nrequest #"+i+":"),r(e,t)}function i(t,n){var i=n.readInt();t.push("\nrequest id = "+i);var r=n.readByte();switch(t.push("\nreply status = "+r+" "),r){case u.replyOK:t.push("(ok)");break;case u.replyUserException:t.push("(user exception)");break;case u.replyObjectNotExist:case u.replyFacetNotExist:case u.replyOperationNotExist:switch(r){case u.replyObjectNotExist:t.push("(object not exist)");break;case u.replyFacetNotExist:t.push("(facet not exist)");break;case u.replyOperationNotExist:t.push("(operation not exist)");break;default:a.assert(!1)}e(t,n);break;case u.replyUnknownException:case u.replyUnknownLocalException:case u.replyUnknownUserException:switch(r){case u.replyUnknownException:t.push("(unknown exception)");break;case u.replyUnknownLocalException:t.push("(unknown local exception)");break;case u.replyUnknownUserException:t.push("(unknown user exception)");break;default:a.assert(!1)}var o=n.readString();t.push("\nunknown = "+o);break;default:t.push("(unknown)")}}function r(t,n){e(t,n);var i=n.readByte();switch(t.push("\nmode = "+i+" "),d.valueOf(i)){case d.Normal:t.push("(normal)");break;case d.Nonmutating:t.push("(nonmutating)");break;case d.Idempotent:t.push("(idempotent)");break;default:t.push("(unknown)")}var r=n.readSize();for(t.push("\ncontext = ");r-->0;){var o=n.readString(),s=n.readString();t.push(o+"/"+s),r>0&&t.push(", ")}var c=n.skipEncaps();c.equals(Ice.Encoding_1_0)||(t.push("\nencoding = "),t.push(Ice.encodingVersionToString(c)))}function o(e,t){t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte();var n=t.readByte();e.push("\nmessage type = "+n+" ("+c(n)+")");var i=t.readByte();switch(e.push("\ncompression status = "+i+" "),i){case 0:e.push("(not compressed; do not compress response, if any)");break;case 1:e.push("(not compressed; compress response, if any)");break;case 2:e.push("(compressed; compress response, if any)");break;default:e.push("(unknown)")}var r=t.readInt();return e.push("\nmessage size = "+r),n}function s(e,r){var s=o(e,r);switch(s){case u.closeConnectionMsg:case u.validateConnectionMsg:break;case u.requestMsg:t(e,r);break;case u.requestBatchMsg:n(e,r);break;case u.replyMsg:i(e,r)}return s}function c(e){switch(e){case u.requestMsg:return"request";case u.requestBatchMsg:return"batch request";case u.replyMsg:return"reply";case u.closeConnectionMsg:return"close connection";case u.validateConnectionMsg:return"validate connection";default:return"unknown"}}var a=Ice.Debug,h=Ice.HashMap,u=Ice.Protocol,l=Ice.StringUtil,d=Ice.OperationMode,p=Ice.Identity,_={};_.traceSend=function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[],o=s(r,e);t.trace(n.protocolCat,"sending "+c(o)+" "+r.join("")),e.pos=i}},_.traceRecv=function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[],o=s(r,e);t.trace(n.protocolCat,"received "+c(o)+" "+r.join("")),e.pos=i}},_.trace=function(e,t,n,i){if(i.protocol>=1){var r=t.pos;t.pos=0;var o=[];o.push(e),s(o,t),n.trace(i.protocolCat,o.join("")),t.pos=r}};new h;_.dumpStream=function(e){var t=e.pos;e.pos=0;var n=e.readBlob(e.size());_.dumpOctets(n),e.pos=t},_.dumpOctets=function(e){for(var t=8,n=[],i=0;i<e.length;i+=t){var r;for(r=i;t>r-i;r++)if(r<e.length){var o=e[r];0>o&&(o+=256);var s;s=10>o?"  "+o:100>o?" "+o:""+o,n.push(s+" ")}else n.push("    ");for(n.push('"'),r=i;r<e.length&&t>r-i;r++)n.push(e[r]>=32&&e[r]<127?String.fromCharCode(e[r]):".");
n.push('"\n')}console.log(n.join(""))},Ice.TraceUtil=_}(),function(){var e=(Ice.Promise,Ice.ReferenceMode),t=Ice.Class({__init__:function(t,n,i){this._reference=t,this._response=t.getMode()==e.ModeTwoway,this._connection=n,this._compress=i},connect:function(){return this},update:function(e,t){try{if(e===this)return t;if(e.getConnection()===this._connection)return t}catch(n){}return this},prepareBatchRequest:function(e){this._connection.prepareBatchRequest(e)},finishBatchRequest:function(e){this._connection.finishBatchRequest(e,this._compress)},abortBatchRequest:function(){this._connection.abortBatchRequest()},sendAsyncRequest:function(e){return e.__send(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e){return this._connection.asyncRequestCanceled(e)},getReference:function(){return this._reference},getConnection:function(){return this._connection}});Ice.ConnectionRequestHandler=t}(),function(){var e=Ice.UnexpectedObjectException,t=Ice.MemoryLimitException;Ice.ExUtil={throwUOE:function(t,n){var i=n.ice_id();throw new e("expected element of type `"+t+"' but received '"+i,i,t)},throwMemoryLimitException:function(e,n){throw new t("requested "+e+" bytes, maximum allowed is "+n+" bytes (see Ice.MessageSizeMax)")}}}(),function(){var __M=Ice.__M,Debug=Ice.Debug,ExUtil=Ice.ExUtil,FormatType=Ice.FormatType,HashMap=Ice.HashMap,IceObject=Ice.Object,OptionalFormat=Ice.OptionalFormat,Protocol=Ice.Protocol,TraceUtil=Ice.TraceUtil,ArrayUtil=Ice.ArrayUtil,SlicedData=Ice.SlicedData,SliceType={};SliceType.NoSlice=0,SliceType.ObjectSlice=1,SliceType.ExceptionSlice=2;var OPTIONAL_END_MARKER=255,FLAG_HAS_TYPE_ID_STRING=1,FLAG_HAS_TYPE_ID_INDEX=2,FLAG_HAS_TYPE_ID_COMPACT=3,FLAG_HAS_OPTIONAL_MEMBERS=4,FLAG_HAS_INDIRECTION_TABLE=8,FLAG_HAS_SLICE_SIZE=16,FLAG_IS_LAST_SLICE=32,IndirectPatchEntry=function(e,t){this.index=e,this.patcher=t},Class=Ice.Class,EncapsDecoder=Class({__init__:function(e,t,n,i){this._stream=e,this._encaps=t,this._sliceObjects=n,this._servantFactoryManager=i,this._patchMap=null,this._unmarshaledMap=new HashMap,this._typeIdMap=null,this._typeIdIndex=0,this._objectList=null},readOpt:function(){return!1},readPendingObjects:function(){},readTypeId:function(e){var t,n;if(null===this._typeIdMap&&(this._typeIdMap=new HashMap),e){if(n=this._stream.readSize(),t=this._typeIdMap.get(n),void 0===t)throw new Ice.UnmarshalOutOfBoundsException}else t=this._stream.readString(),this._typeIdMap.set(++this._typeIdIndex,t);return t},newInstance:function(e){var t=this._servantFactoryManager.find(e),n=null;return void 0!==t&&(n=t.create(e)),(null===n||void 0===n)&&(t=this._servantFactoryManager.find(""),void 0!==t&&(n=t.create(e))),(null===n||void 0===n)&&(n=this._stream.createObject(e)),n},addPatchEntry:function(e,t){Debug.assert(e>0);var n=this._unmarshaledMap.get(e);if(void 0!==n&&null!==n)return void t.call(null,n);null===this._patchMap&&(this._patchMap=new HashMap);var i=this._patchMap.get(e);void 0===i&&(i=[],this._patchMap.set(e,i)),i.push(t)},unmarshal:function(e,t){var n,i,r;if(this._unmarshaledMap.set(e,t),t.__read(this._stream),null!==this._patchMap&&(r=this._patchMap.get(e),void 0!==r)){for(Debug.assert(r.length>0),n=0,i=r.length;i>n;++n)r[n](t);this._patchMap.delete(e)}if(null!==this._patchMap&&0!==this._patchMap.size||null!==this._objectList){if(null===this._objectList&&(this._objectList=[]),this._objectList.push(t),null===this._patchMap||0===this._patchMap.size){for(n=0,i=this._objectList.length;i>n;n++)try{this._objectList[n].ice_postUnmarshal()}catch(o){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+o.toString())}this._objectList=[]}}else try{t.ice_postUnmarshal()}catch(o){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+o.toString())}}}),EncapsDecoder10=Class(EncapsDecoder,{__init__:function(e,t,n,i){EncapsDecoder.call(this,e,t,n,i),this._sliceType=SliceType.NoSlice},readObject:function(e){Debug.assert(null!==e);var t=this._stream.readInt();if(t>0)throw new Ice.MarshalException("invalid object id");t=-t,0===t?e.call(null,null):this.addPatchEntry(t,e)},throwException:function(){Debug.assert(this._sliceType===SliceType.NoSlice);var e=this._stream.readBool();this._sliceType=SliceType.ExceptionSlice,this._skipFirstSlice=!1,this.startSlice();for(var t=this._typeId;;){var n=this._stream.createUserException(this._typeId);if(null!==n)throw n.__read(this._stream),e&&this.readPendingObjects(),n;this.skipSlice();try{this.startSlice()}catch(i){throw i instanceof Ice.UnmarshalOutOfBoundsException&&(i.reason="unknown exception type `"+t+"'"),i}}},startInstance:function(e){Debug.assert(this._sliceType===e),this._skipFirstSlice=!0},endInstance:function(){var e;if(this._sliceType===SliceType.ObjectSlice){if(this.startSlice(),e=this._stream.readSize(),0!==e)throw new Ice.MarshalException("invalid Object slice");this.endSlice()}return this._sliceType=SliceType.NoSlice,null},startSlice:function(){var e;if(this._skipFirstSlice)return this._skipFirstSlice=!1,this._typeId;if(this._sliceType===SliceType.ObjectSlice?(e=this._stream.readBool(),this._typeId=this.readTypeId(e)):this._typeId=this._stream.readString(),this._sliceSize=this._stream.readInt(),this._sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException;return this._typeId},endSlice:function(){},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger;this._sliceType===SliceType.ObjectSlice?TraceUtil.traceSlicing("object",this._typeId,this._stream.instance.traceLevels().slicingCat,e):TraceUtil.traceSlicing("exception",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}Debug.assert(this._sliceSize>=4),this._stream.skip(this._sliceSize-4)},readPendingObjects:function(){var e,t;do for(t=this._stream.readSize(),e=t;e>0;--e)this.readInstance();while(t>0);if(null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance")},readInstance:function(){var e,t=this._stream.readInt(),n=null;if(0>=t)throw new Ice.MarshalException("invalid object id");for(this._sliceType=SliceType.ObjectSlice,this._skipFirstSlice=!1,this.startSlice(),e=this._typeId;;){if(this._typeId==IceObject.ice_staticId())throw new Ice.NoObjectFactoryException("",e);if(n=this.newInstance(this._typeId))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._typeId);this.skipSlice(),this.startSlice()}this.unmarshal(t,n)}}),EncapsDecoder11=Class(EncapsDecoder,{__init__:function(e,t,n,i){EncapsDecoder.call(this,e,t,n,i),this._current=null,this._objectIdIndex=1},readObject:function(e){Debug.assert(void 0!==e);var t=this._stream.readSize();if(0>t)throw new Ice.MarshalException("invalid object id");if(0===t)null!==e&&e.call(null,null);else if(null!==this._current&&0!==(this._current.sliceFlags&FLAG_HAS_INDIRECTION_TABLE)){if(null!==e){null===this._current.indirectPatchList&&(this._current.indirectPatchList=[]);var n=new IndirectPatchEntry;n.index=t-1,n.patcher=e,this._current.indirectPatchList.push(n)}}else this.readInstance(t,e)},throwException:function(){Debug.assert(null===this._current),this.push(SliceType.ExceptionSlice),this.startSlice();for(var e=this._current.typeId;;){var t=this._stream.createUserException(this._current.typeId);if(null!==t)throw t.__read(this._stream),t;if(this.skipSlice(),0!==(this._current.sliceFlags&FLAG_IS_LAST_SLICE)){if(0===e.indexOf("::"))throw new Ice.UnknownUserException(e.substr(2));throw new Ice.UnknownUserException(e)}this.startSlice()}},startInstance:function(e){Debug.assert(void 0!==e),Debug.assert(null!==this._current.sliceType&&this._current.sliceType===e),this._current.skipFirstSlice=!0},endInstance:function(e){var t=null;return e&&(t=this.readSlicedData()),null!==this._current.slices&&(this._current.slices.length=0,this._current.indirectionTables.length=0),this._current=this._current.previous,t},startSlice:function(){if(this._current.skipFirstSlice)return this._current.skipFirstSlice=!1,this._current.typeId;if(this._current.sliceFlags=this._stream.readByte(),this._current.sliceType===SliceType.ObjectSlice?(this._current.sliceFlags&FLAG_HAS_TYPE_ID_COMPACT)===FLAG_HAS_TYPE_ID_COMPACT?(this._current.typeId="",this._current.compactId=this._stream.readSize()):0!==(this._current.sliceFlags&(FLAG_HAS_TYPE_ID_INDEX|FLAG_HAS_TYPE_ID_STRING))?(this._current.typeId=this.readTypeId(0!==(this._current.sliceFlags&FLAG_HAS_TYPE_ID_INDEX)),this._current.compactId=-1):(this._current.typeId="",this._current.compactId=-1):(this._current.typeId=this._stream.readString(),this._current.compactId=-1),0!==(this._current.sliceFlags&FLAG_HAS_SLICE_SIZE)){if(this._current.sliceSize=this._stream.readInt(),this._current.sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException}else this._current.sliceSize=0;return this._current.typeId},endSlice:function(){var e,t,n,i=[];if(0!==(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS)&&this._stream.skipOpts(),0!==(this._current.sliceFlags&FLAG_HAS_INDIRECTION_TABLE)){for(n=this._stream.readAndCheckSeqSize(1),t=0;n>t;++t)i[t]=this.readInstance(this._stream.readSize(),null);if(0===i.length)throw new Ice.MarshalException("empty indirection table");if((null===this._current.indirectPatchList||0===this._current.indirectPatchList.length)&&0===(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS))throw new Ice.MarshalException("no references to indirection table");if(null!==this._current.indirectPatchList){for(t=0,n=this._current.indirectPatchList.length;n>t;++t){if(e=this._current.indirectPatchList[t],Debug.assert(e.index>=0),e.index>=i.length)throw new Ice.MarshalException("indirection out of range");this.addPatchEntry(i[e.index],e.patcher)}this._current.indirectPatchList.length=0}}},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger,t=this._stream.instance.traceLevels().slicingCat;this._current.sliceType===SliceType.ExceptionSlice?TraceUtil.traceSlicing("exception",this._current.typeId,t,e):TraceUtil.traceSlicing("object",this._current.typeId,t,e)}var n=this._stream.pos;if(0===(this._current.sliceFlags&FLAG_HAS_SLICE_SIZE)){if(this._current.sliceType===SliceType.ObjectSlice)throw new Ice.NoObjectFactoryException("no object factory found and compact format prevents slicing (the sender should use the sliced format instead)",this._current.typeId);if(0===this._current.typeId.indexOf("::"))throw new Ice.UnknownUserException(this._current.typeId.substring(2));throw new Ice.UnknownUserException(this._current.typeId)}Debug.assert(this._current.sliceSize>=4),this._stream.skip(this._current.sliceSize-4);var i=new Ice.SliceInfo;i.typeId=this._current.typeId,i.compactId=this._current.compactId,i.hasOptionalMembers=0!==(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS),i.isLastSlice=0!==(this._current.sliceFlags&FLAG_IS_LAST_SLICE);var r=this._stream._buf,o=r.position,s=o;if(i.hasOptionalMembers&&--s,r.position=n,i.bytes=r.getArray(s-n),r.position=o,null===this._current.slices&&(this._current.slices=[],this._current.indirectionTables=[]),0!==(this._current.sliceFlags&FLAG_HAS_INDIRECTION_TABLE)){for(var c=this._stream.readAndCheckSeqSize(1),a=[],h=0;c>h;++h)a[h]=this.readInstance(this._stream.readSize(),null);this._current.indirectionTables.push(a)}else this._current.indirectionTables.push(null);this._current.slices.push(i)},readOpt:function(e,t){return null===this._current?this._stream.readOptImpl(e,t):0!==(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS)?this._stream.readOptImpl(e,t):!1},readInstance:function(e,t){Debug.assert(e>0);var n,i=null;if(e>1)return null!==t&&this.addPatchEntry(e,t),e;for(this.push(SliceType.ObjectSlice),e=++this._objectIdIndex,this.startSlice(),n=this._current.typeId;;){if(this._current.compactId>=0&&(this._current.typeId="",0===this._current.typeId.length&&(this._current.typeId=this._stream.getTypeId(this._current.compactId))),this._current.typeId.length>0&&(i=this.newInstance(this._current.typeId),null!==i&&void 0!==i))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._current.typeId);if(this.skipSlice(),0!==(this._current.sliceFlags&FLAG_IS_LAST_SLICE)){i=new Ice.UnknownSlicedObject(n);break}this.startSlice()}if(this.unmarshal(e,i),null===this._current&&null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance");return null!==t&&t.call(null,i),e},readSlicedData:function(){var e,t,n,i,r,o;if(null===this._current.slices)return null;for(Debug.assert(this._current.slices.length===this._current.indirectionTables.length),e=0,t=this._current.slices.length;t>e;++e)for(n=this._current.indirectionTables[e],i=this._current.slices[e],i.objects=[],o=n?n.length:0,r=0;o>r;++r)this.addPatchEntry(n[r],sequencePatcher(i.objects,r,IceObject));return new SlicedData(ArrayUtil.clone(this._current.slices))},push:function(e){this._current=null===this._current?new EncapsDecoder11.InstanceData(null):this._current.next?this._current.next:new EncapsDecoder11.InstanceData(this._current),this._current.sliceType=e,this._current.skipFirstSlice=!1}});EncapsDecoder11.InstanceData=function(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.skipFirstSlice=!1,this.slices=null,this.indirectionTables=null,this.sliceFlags=0,this.sliceSize=0,this.typeId=null,this.compactId=0,this.indirectPatchList=null};var sequencePatcher=function(e,t,n){return function(i){null===i||i instanceof n||ExUtil.throwUOE(n.ice_staticId(),i),e[t]=i}},EncapsEncoder=Class({__init__:function(e,t){this._stream=e,this._encaps=t,this._marshaledMap=new HashMap,this._typeIdMap=null,this._typeIdIndex=0},writeOpt:function(){return!1},writePendingObjects:function(){return void 0},registerTypeId:function(e){null===this._typeIdMap&&(this._typeIdMap=new HashMap);var t=this._typeIdMap.get(e);return void 0!==t?t:(this._typeIdMap.set(e,++this._typeIdIndex),-1)}}),EncapsEncoder10=Class(EncapsEncoder,{__init__:function(e,t){EncapsEncoder.call(this,e,t),this._sliceType=SliceType.NoSlice,this._writeSlice=0,this._objectIdIndex=0,this._toBeMarshaledMap=new HashMap},writeObject:function(e){Debug.assert(void 0!==e),this._stream.writeInt(null!==e?-this.registerObject(e):0)},writeUserException:function(e){Debug.assert(null!==e&&void 0!==e);var t=e.__usesClasses();this._stream.writeBool(t),e.__write(this._stream),t&&this.writePendingObjects()},startInstance:function(e){this._sliceType=e},endInstance:function(){this._sliceType===SliceType.ObjectSlice&&(this.startSlice(IceObject.ice_staticId(),-1,!0),this._stream.writeSize(0),this.endSlice()),this._sliceType=SliceType.NoSlice},startSlice:function(e){if(this._sliceType===SliceType.ObjectSlice){var t=this.registerTypeId(e);0>t?(this._stream.writeBool(!1),this._stream.writeString(e)):(this._stream.writeBool(!0),this._stream.writeSize(t))}else this._stream.writeString(e);this._stream.writeInt(0),this._writeSlice=this._stream.pos},endSlice:function(){var e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)},writePendingObjects:function(){for(var e,t=this,n=function(e,n){t._stream.writeInt(n);try{e.ice_preMarshal()}catch(i){t._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+i.toString())}e.__write(t._stream)};this._toBeMarshaledMap.size>0;)this._marshaledMap.merge(this._toBeMarshaledMap),e=this._toBeMarshaledMap,this._toBeMarshaledMap=new HashMap,this._stream.writeSize(e.size),e.forEach(n);this._stream.writeSize(0)},registerObject:function(e){Debug.assert(null!==e);var t=this._toBeMarshaledMap.get(e);return void 0!==t?t:(t=this._marshaledMap.get(e),void 0!==t?t:(this._toBeMarshaledMap.set(e,++this._objectIdIndex),this._objectIdIndex))}}),EncapsEncoder11=Class(EncapsEncoder,{__init__:function(e,t){EncapsEncoder.call(this,e,t),this._current=null,this._objectIdIndex=1},writeObject:function(e){Debug.assert(void 0!==e);var t,n;null===e?this._stream.writeSize(0):null!==this._current&&this._encaps.format===FormatType.SlicedFormat?(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new HashMap),t=this._current.indirectionMap.get(e),void 0===t?(this._current.indirectionTable.push(e),n=this._current.indirectionTable.length,this._current.indirectionMap.set(e,n),this._stream.writeSize(n)):this._stream.writeSize(t)):this.writeInstance(e)},writePendingObjects:function(){return void 0},writeUserException:function(e){Debug.assert(null!==e&&void 0!==e),e.__write(this._stream)},startInstance:function(e,t){this._current=null===this._current?new EncapsEncoder11.InstanceData(null):null===this._current.next?new EncapsEncoder11.InstanceData(this._current):this._current.next,this._current.sliceType=e,this._current.firstSlice=!0,null!==t&&void 0!==t&&this.writeSlicedData(t)},endInstance:function(){this._current=this._current.previous},startSlice:function(e,t,n){if(Debug.assert(!(null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length||null!==this._current.indirectionMap&&0!==this._current.indirectionMap.size)),this._current.sliceFlagsPos=this._stream.pos,this._current.sliceFlags=0,this._encaps.format===FormatType.SlicedFormat&&(this._current.sliceFlags|=FLAG_HAS_SLICE_SIZE),n&&(this._current.sliceFlags|=FLAG_IS_LAST_SLICE),this._stream.writeByte(0),this._current.sliceType===SliceType.ObjectSlice){if(this._encaps.format===FormatType.SlicedFormat||this._current.firstSlice)if(t>=0)this._current.sliceFlags|=FLAG_HAS_TYPE_ID_COMPACT,this._stream.writeSize(t);else{var i=this.registerTypeId(e);0>i?(this._current.sliceFlags|=FLAG_HAS_TYPE_ID_STRING,this._stream.writeString(e)):(this._current.sliceFlags|=FLAG_HAS_TYPE_ID_INDEX,this._stream.writeSize(i))}}else this._stream.writeString(e);0!==(this._current.sliceFlags&FLAG_HAS_SLICE_SIZE)&&this._stream.writeInt(0),this._current.writeSlice=this._stream.pos,this._current.firstSlice=!1},endSlice:function(){var e,t,n;if(0!==(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS)&&this._stream.writeByte(OPTIONAL_END_MARKER),0!==(this._current.sliceFlags&FLAG_HAS_SLICE_SIZE)&&(e=this._stream.pos-this._current.writeSlice+4,this._stream.rewriteInt(e,this._current.writeSlice-4)),null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length){for(Debug.assert(this._encaps.format===FormatType.SlicedFormat),this._current.sliceFlags|=FLAG_HAS_INDIRECTION_TABLE,this._stream.writeSize(this._current.indirectionTable.length),t=0,n=this._current.indirectionTable.length;n>t;++t)this.writeInstance(this._current.indirectionTable[t]);this._current.indirectionTable.length=0,this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)},writeOpt:function(e,t){return null===this._current?this._stream.writeOptImpl(e,t):this._stream.writeOptImpl(e,t)?(this._current.sliceFlags|=FLAG_HAS_OPTIONAL_MEMBERS,!0):!1},writeSlicedData:function(e){if(Debug.assert(null!==e&&void 0!==e),this._encaps.format===FormatType.SlicedFormat){var t,n,i,r,o;for(t=0,n=e.slices.length;n>t;++t){if(i=e.slices[t],this.startSlice(i.typeId,i.compactId,i.isLastSlice),this._stream.writeBlob(i.bytes),i.hasOptionalMembers&&(this._current.sliceFlags|=FLAG_HAS_OPTIONAL_MEMBERS),null!==i.objects&&i.objects.length>0)for(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new HashMap),r=0,o=i.objects.length;o>r;++r)this._current.indirectionTable.push(i.objects[r]);this.endSlice()}}},writeInstance:function(e){Debug.assert(null!==e&&void 0!==e);var t=this._marshaledMap.get(e);if(void 0!==t)return void this._stream.writeSize(t);this._marshaledMap.set(e,++this._objectIdIndex);try{e.ice_preMarshal()}catch(n){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+n.toString())}this._stream.writeSize(1),e.__write(this._stream)}});EncapsEncoder11.InstanceData=function(e){Debug.assert(void 0!==e),null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.firstSlice=!1,this.sliceFlags=0,this.writeSlice=0,this.sliceFlagsPos=0,this.indirectionTable=null,this.indirectionMap=null};var ReadEncaps=Class({__init__:function(){this.start=0,this.sz=0,this.encoding=null,this.encoding_1_0=!1,this.decoder=null,this.next=null},reset:function(){this.decoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),WriteEncaps=Class({__init__:function(){this.start=0,this.format=FormatType.DefaultFormat,this.encoding=null,this.encoding_1_0=!1,this.encoder=null,this.next=null},reset:function(){this.encoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),BasicStream=Class({__init__:function(e,t,n){this._instance=e,this._closure=null,this._encoding=t,this._readEncapsStack=null,this._writeEncapsStack=null,this._readEncapsCache=null,this._writeEncapsCache=null,this._sliceObjects=!0,this._startSeq=-1,this._sizePos=-1,this._buf=void 0!==n?new Ice.Buffer(n):new Ice.Buffer},reset:function(){this._buf.reset(),this.clear()},clear:function(){null!==this._readEncapsStack&&(Debug.assert(this._readEncapsStack.next),this._readEncapsStack.next=this._readEncapsCache,this._readEncapsCache=this._readEncapsStack,this._readEncapsCache.reset(),this._readEncapsStack=null),null!==this._writeEncapsStack&&(Debug.assert(this._writeEncapsStack.next),this._writeEncapsStack.next=this._writeEncapsCache,this._writeEncapsCache=this._writeEncapsStack,this._writeEncapsCache.reset(),this._writeEncapsStack=null),this._startSeq=-1,this._sliceObjects=!0},swap:function(e){Debug.assert(this._instance===e._instance);var t,n,i,r,o;t=e._buf,e._buf=this._buf,this._buf=t,n=e._closure,e._closure=this._closure,this._closure=n,this.resetEncaps(),e.resetEncaps(),i=e._startSeq,e._startSeq=this._startSeq,this._startSeq=i,r=e._minSeqSize,e._minSeqSize=this._minSeqSize,this._minSeqSize=r,o=e._sizePos,e._sizePos=this._sizePos,this._sizePos=o},resetEncaps:function(){this._readEncapsStack=null,this._writeEncapsStack=null},resize:function(e){this._buf.resize(e),this._buf.position=e},prepareWrite:function(){return this._buf.position=0,this._buf},startWriteObject:function(e){Debug.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(SliceType.ObjectSlice,e)},endWriteObject:function(){Debug.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadObject:function(){Debug.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(SliceType.ObjectSlice)},endReadObject:function(e){return Debug.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteException:function(e){Debug.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(SliceType.ExceptionSlice,e)},endWriteException:function(){Debug.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadException:function(){Debug.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(SliceType.ExceptionSlice)},endReadException:function(e){return Debug.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteEncaps:function(e,t){void 0===e&&(null!==this._writeEncapsStack?(e=this._writeEncapsStack.encoding,t=this._writeEncapsStack.format):(e=this._encoding,t=FormatType.DefaultFormat)),Protocol.checkSupportedEncoding(e);var n=this._writeEncapsCache;null!==n?(n.reset(),this._writeEncapsCache=this._writeEncapsCache.next):n=new WriteEncaps,n.next=this._writeEncapsStack,this._writeEncapsStack=n,this._writeEncapsStack.format=t,this._writeEncapsStack.setEncoding(e),this._writeEncapsStack.start=this._buf.limit,this.writeInt(0),this._writeEncapsStack.encoding.__write(this)},endWriteEncaps:function(){Debug.assert(this._writeEncapsStack);var e=this._writeEncapsStack.start,t=this._buf.limit-e;this._buf.putIntAt(e,t);var n=this._writeEncapsStack;this._writeEncapsStack=n.next,n.next=this._writeEncapsCache,this._writeEncapsCache=n,this._writeEncapsCache.reset()},endWriteEncapsChecked:function(){if(null===this._writeEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endWriteEncaps()},writeEmptyEncaps:function(e){Protocol.checkSupportedEncoding(e),this.writeInt(6),e.__write(this)},writeEncaps:function(e){if(e.length<6)throw new Ice.EncapsulationException;this.expand(e.length),this._buf.putArray(e)},getWriteEncoding:function(){return null!==this._writeEncapsStack?this._writeEncapsStack.encoding:this._encoding},startReadEncaps:function(){var e=this._readEncapsCache;null!==e?(e.reset(),this._readEncapsCache=this._readEncapsCache.next):e=new ReadEncaps,e.next=this._readEncapsStack,this._readEncapsStack=e,this._readEncapsStack.start=this._buf.position;var t=this.readInt();if(6>t)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._readEncapsStack.sz=t;var n=new Ice.EncodingVersion;return n.__read(this),Protocol.checkSupportedEncoding(n),this._readEncapsStack.setEncoding(n),n},endReadEncaps:function(){if(Debug.assert(null!==this._readEncapsStack),this._readEncapsStack.encoding_1_0){if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){if(this._buf.position+1!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}}else if(this.skipOpts(),this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;var t=this._readEncapsStack;this._readEncapsStack=t.next,t.next=this._readEncapsCache,this._readEncapsCache=t,this._readEncapsCache.reset()},skipEmptyEncaps:function(e){Debug.assert(void 0!==e);var t=this.readInt();if(6!==t)throw new Ice.EncapsulationException;var n=this._buf.position;if(n+2>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;null!==e?e.__read(this):this._buf.position=n+2},endReadEncapsChecked:function(){if(null===this._readEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endReadEncaps()},readEncaps:function(e){Debug.assert(void 0!==e);var t=this.readInt();if(6>t)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;null!==e?(e.__read(this),this._buf.position=this._buf.position-6):this._buf.position=this._buf.position-4;try{return this._buf.getArray(t)}catch(n){throw new Ice.UnmarshalOutOfBoundsException}},getReadEncoding:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding:this._encoding},getReadEncapsSize:function(){return Debug.assert(null!==this._readEncapsStack),this._readEncapsStack.sz-6},skipEncaps:function(){var e=this.readInt();if(6>e)throw new Ice.UnmarshalOutOfBoundsException;var t=new Ice.EncodingVersion;t.__read(this);try{this._buf.position=this._buf.position+e-6}catch(n){throw new Ice.UnmarshalOutOfBoundsException}return t},startWriteSlice:function(e,t,n){Debug.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startSlice(e,t,n)},endWriteSlice:function(){Debug.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endSlice()},startReadSlice:function(){return Debug.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startSlice()},endReadSlice:function(){Debug.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endSlice()},skipSlice:function(){Debug.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.skipSlice()},readPendingObjects:function(){null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readPendingObjects():(null!==this._readEncapsStack&&this._readEncapsStack.encoding_1_0||null===this._readEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.skipSize()},writePendingObjects:function(){null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writePendingObjects():(null!==this._writeEncapsStack&&this._writeEncapsStack.encoding_1_0||null===this._writeEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.writeSize(0)},writeSize:function(e){e>254?(this.expand(5),this._buf.put(255),this._buf.putInt(e)):(this.expand(1),this._buf.put(e))},readSize:function(){try{var e=this._buf.get();if(255===e){var t=this._buf.getInt();if(0>t)throw new Ice.UnmarshalOutOfBoundsException;return t}return e}catch(n){throw new Ice.UnmarshalOutOfBoundsException}},readAndCheckSeqSize:function(e){var t=this.readSize();if(0===t)return t;if(-1===this._startSeq||this._buf.position>this._startSeq+this._minSeqSize?(this._startSeq=this._buf.position,this._minSeqSize=t*e):this._minSeqSize+=t*e,this._startSeq+this._minSeqSize>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;return t},startSize:function(){var e=this._buf.position;return this.writeInt(0),e},endSize:function(e){Debug.assert(e>=0),this.rewriteInt(this._buf.position-e-4,e)},writeBlob:function(e){null!==e&&(this.expand(e.length),this._buf.putArray(e))},readBlob:function(e){if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getArray(e)}catch(t){throw new Ice.UnmarshalOutOfBoundsException}},writeOpt:function(e,t){return Debug.assert(null!==this._writeEncapsStack),null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writeOpt(e,t):this.writeOptImpl(e,t)},readOpt:function(e,t){return Debug.assert(null!==this._readEncapsStack),null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readOpt(e,t):this.readOptImpl(e,t)},writeOptValue:function(e,t,n,i){void 0!==i&&this.writeOpt(e,t)&&n.call(this,i)},readOptValue:function(e,t,n){return this.readOpt(e,t)?n.call(this):void 0},writeByte:function(e){this.expand(1),this._buf.put(e)},rewriteByte:function(e,t){this._buf.putAt(t,e)},readByte:function(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeByteSeq:function(e){null===e||0===e.length?this.writeSize(0):(this.writeSize(e.length),this.expand(e.length),this._buf.putArray(e))},readByteSeq:function(){return this._buf.getArray(this.readAndCheckSeqSize(1))},writeBool:function(e){this.expand(1),this._buf.put(e?1:0)},rewriteBool:function(e,t){this._buf.putAt(t,e?1:0)},readBool:function(){try{return 1===this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeShort:function(e){this.expand(2),this._buf.putShort(e)},readShort:function(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeInt:function(e){this.expand(4),this._buf.putInt(e)},rewriteInt:function(e,t){this._buf.putIntAt(t,e)},readInt:function(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeLong:function(e){this.expand(8),this._buf.putLong(e)},readLong:function(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeFloat:function(e){this.expand(4),this._buf.putFloat(e)},readFloat:function(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeDouble:function(e){this.expand(8),this._buf.putDouble(e)},readDouble:function(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeString:function(e){null===e||0===e.length?this.writeSize(0):this._buf.writeString(this,e)
},readString:function(){var e=this.readSize();if(0===e)return"";if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getString(e)}catch(t){throw new Ice.UnmarshalOutOfBoundsException}},writeProxy:function(e){this._instance.proxyFactory().proxyToStream(e,this)},writeOptProxy:function(e,t){if(void 0!==t&&this.writeOpt(e,OptionalFormat.FSize)){var n=this.startSize();this.writeProxy(t),this.endSize(n)}},readProxy:function(e){return this._instance.proxyFactory().streamToProxy(this,e)},readOptProxy:function(e,t){return this.readOpt(e,OptionalFormat.FSize)?(this.skip(4),this.readProxy(t)):void 0},writeEnum:function(e){this.isWriteEncoding_1_0()?e.maxValue<127?this.writeByte(e.value):e.maxValue<32767?this.writeShort(e.value):this.writeInt(e.value):this.writeSize(e.value)},readEnum:function(e){var t;t=this.getReadEncoding().equals(Ice.Encoding_1_0)?e.maxValue<127?this.readByte():e.maxValue<32767?this.readShort():this.readInt():this.readSize();var n=e.valueOf(t);if(void 0===n)throw new Ice.MarshalException("enumerator value "+t+" is out of range");return n},readOptEnum:function(e,t){return this.readOpt(e,OptionalFormat.Size)?this.readEnum(t):void 0},writeObject:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeObject(e)},writeOptObject:function(e,t){void 0!==t&&this.writeOpt(e,OptionalFormat.Class)&&this.writeObject(t)},readObject:function(e,t){this.initReadEncaps(),this._readEncapsStack.decoder.readObject.call(this._readEncapsStack.decoder,function(n){null===n||n.ice_instanceof(t)||ExUtil.throwUOE(t.ice_staticId(),n),e(n)})},readOptObject:function(e,t,n){this.readOpt(e,OptionalFormat.Class)?this.readObject(t,n):t(void 0)},writeUserException:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeUserException(e)},throwException:function(){this.initReadEncaps(),this._readEncapsStack.decoder.throwException()},sliceObjects:function(e){this._sliceObjects=e},readOptImpl:function(e,t){var n,i,r,o;if(this.isReadEncoding_1_0())return!1;for(;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return!1;if(n=this.readByte(),n===OPTIONAL_END_MARKER)return this._buf.position-=1,!1;if(i=OptionalFormat.valueOf(7&n),r=n>>3,30===r&&(r=this.readSize()),r>e)return o=30>r?1:255>r?2:6,this._buf.position-=o,!1;if(!(e>r)){if(i!==t)throw new Ice.MarshalException("invalid optional data member `"+r+"': unexpected format");return!0}this.skipOpt(i)}},writeOptImpl:function(e,t){if(this.isWriteEncoding_1_0())return!1;var n=t.value;return 30>e?(n|=e<<3,this.writeByte(n)):(n|=240,this.writeByte(n),this.writeSize(e)),!0},skipOpt:function(e){switch(e){case OptionalFormat.F1:this.skip(1);break;case OptionalFormat.F2:this.skip(2);break;case OptionalFormat.F4:this.skip(4);break;case OptionalFormat.F8:this.skip(8);break;case OptionalFormat.Size:this.skipSize();break;case OptionalFormat.VSize:this.skip(this.readSize());break;case OptionalFormat.FSize:this.skip(this.readInt());break;case OptionalFormat.Class:this.readObject(null,Ice.Object)}},skipOpts:function(){for(var e,t,n;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return;if(e=this.readByte(),t=0>e?e+256:e,t===OPTIONAL_END_MARKER)return;n=OptionalFormat.valueOf(7&t),t>>3===30&&this.skipSize(),this.skipOpt(n)}},skip:function(e){if(e>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._buf.position+=e},skipSize:function(){var e=this.readByte();255===e&&this.skip(4)},isEmpty:function(){return this._buf.empty()},expand:function(e){this._buf.expand(e)},createObject:function(id){var obj=null,Class;try{var typeId=id.length>2?id.substr(2).replace(/::/g,"."):"";Class=eval(typeId),void 0!==Class&&(obj=new Class)}catch(ex){throw new Ice.NoObjectFactoryException("no object factory",id,ex)}return obj},getTypeId:function(e){var t=Ice.CompactIdRegistry.get(e);return void 0===t?"":t},isReadEncoding_1_0:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},isWriteEncoding_1_0:function(){return this._writeEncapsStack?this._writeEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},initReadEncaps:function(){if(null===this._readEncapsStack&&(this._readEncapsStack=this._readEncapsCache,null!==this._readEncapsStack?this._readEncapsCache=this._readEncapsCache.next:this._readEncapsStack=new ReadEncaps,this._readEncapsStack.setEncoding(this._encoding),this._readEncapsStack.sz=this._buf.limit),null===this._readEncapsStack.decoder){var e=this._instance.servantFactoryManager();this._readEncapsStack.decoder=this._readEncapsStack.encoding_1_0?new EncapsDecoder10(this,this._readEncapsStack,this._sliceObjects,e):new EncapsDecoder11(this,this._readEncapsStack,this._sliceObjects,e)}},initWriteEncaps:function(){this._writeEncapsStack||(this._writeEncapsStack=this._writeEncapsCache,this._writeEncapsStack?this._writeEncapsCache=this._writeEncapsCache.next:this._writeEncapsStack=new WriteEncaps,this._writeEncapsStack.setEncoding(this._encoding)),this._writeEncapsStack.format===FormatType.DefaultFormat&&(this._writeEncapsStack.format=this._instance.defaultsAndOverrides().defaultFormat),this._writeEncapsStack.encoder||(this._writeEncapsStack.encoder=this._writeEncapsStack.encoding_1_0?new EncapsEncoder10(this,this._writeEncapsStack):new EncapsEncoder11(this,this._writeEncapsStack))},createUserException:function(id){var userEx=null,Class;try{var typeId=id.length>2?id.substr(2).replace(/::/g,"."):"";Class=eval(typeId),void 0!==Class&&(userEx=new Class)}catch(ex){throw new Ice.MarshalException(ex)}return userEx}}),defineProperty=Object.defineProperty;defineProperty(BasicStream.prototype,"pos",{get:function(){return this._buf.position},set:function(e){this._buf.position=e}}),defineProperty(BasicStream.prototype,"size",{get:function(){return this._buf.limit}}),defineProperty(BasicStream.prototype,"instance",{get:function(){return this._instance}}),defineProperty(BasicStream.prototype,"closure",{get:function(){return this._type},set:function(e){this._type=e}}),defineProperty(BasicStream.prototype,"buffer",{get:function(){return this._buf}});var defineBuiltinHelper=function(e,t,n,i){var r={write:function(t,n){return e.call(t,n)},read:function(e){return t.call(e)},writeOpt:function(t,n,r){t.writeOptValue(n,i,e,r)},readOpt:function(e,n){return e.readOptValue(n,i,t)}};return defineProperty(r,"minWireSize",{get:function(){return n}}),r},stream=BasicStream.prototype;Ice.ByteHelper=defineBuiltinHelper(stream.writeByte,stream.readByte,1,Ice.OptionalFormat.F1),Ice.BoolHelper=defineBuiltinHelper(stream.writeBool,stream.readBool,1,Ice.OptionalFormat.F1),Ice.ShortHelper=defineBuiltinHelper(stream.writeShort,stream.readShort,2,Ice.OptionalFormat.F2),Ice.IntHelper=defineBuiltinHelper(stream.writeInt,stream.readInt,4,Ice.OptionalFormat.F4),Ice.LongHelper=defineBuiltinHelper(stream.writeLong,stream.readLong,8,Ice.OptionalFormat.F8),Ice.FloatHelper=defineBuiltinHelper(stream.writeFloat,stream.readFloat,4,Ice.OptionalFormat.F4),Ice.DoubleHelper=defineBuiltinHelper(stream.writeDouble,stream.readDouble,8,Ice.OptionalFormat.F8),Ice.StringHelper=defineBuiltinHelper(stream.writeString,stream.readString,1,Ice.OptionalFormat.VSize),Ice.ObjectHelper={write:function(e,t){e.writeObject(t)},read:function(e){var t;return e.readObject(function(e){t=e},Ice.Object),t},writeOpt:function(e,t,n){e.writeOptValue(t,Ice.OptionalFormat.Class,stream.writeObject,n)},readOpt:function(e,t){var n;return e.readOptObject(t,function(e){n=e},Ice.Object),n}},defineProperty(Ice.ObjectHelper,"minWireSize",{get:function(){return 1}}),Ice.BasicStream=BasicStream}(),function(){var e=Ice.Logger,t=null;Ice.getProcessLogger=function(){return null===t&&(t=new e("","")),t},Ice.setProcessLogger=function(e){t=e}}(),function(){Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2}}(),function(){var e=Ice.StringUtil,t=Ice.HashMap,n=(Ice.Promise,Ice.PropertyNames),i=Ice.Debug,r=(Ice.ProcessLogger,Ice.getProcessLogger),o=Ice.InitializationException,s=0,c=1,a=Ice.Class({__init__:function(e,n){if(this._properties=new t,void 0!==n&&null!==n)for(var i=n._properties.entries;null!==i;i=i.next)this._properties.set(i.key,{value:i.value.value,used:!1});if(void 0!==e&&null!==e){var r=this.parseIceCommandLineOptions(e);e.length=0;for(var o=0;o<r.length;++o)e.push(r[o])}},getProperty:function(e){return this.getPropertyWithDefault(e,"")},getPropertyWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,n.value):t},getPropertyAsInt:function(e){return this.getPropertyAsIntWithDefault(e,0)},getPropertyAsIntWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,parseInt(n.value)):t},getPropertyAsList:function(e){return this.getPropertyAsListWithDefault(e,0)},getPropertyAsListWithDefault:function(t,n){(void 0===n||null===n)&&(n=[]);var i=this._properties.get(t);if(void 0!==i){i.used=!0;var o=e.splitString(i.value,", 	\r\n");return null===o?(r().warning("mismatched quotes in property "+t+"'s value, returning default value"),n):(0===o.length&&(o=n),o)}return n},getPropertiesForPrefix:function(e){for(var n=new t,i=this._properties.entries;null!==i;i=i.next)(void 0===e||null===e||0===i.key.indexOf(e))&&(i.value.used=!0,n.set(i.key,i.value.value));return n},setProperty:function(e,t){null!==e&&void 0!==e&&(e=e.trim());var s=r();if(null===e||void 0===e||0===e.length)throw new o("Attempt to set property with empty key");var c=e.indexOf(".");if(-1!==c)for(var a=e.substr(0,c),h=0;h<n.validProps.length;++h){var u=n.validProps[h][0].pattern;c=u.indexOf("."),i.assert(-1!=c);var l=u.substring(0,c-1);if(l==a){for(var d,p=!1,_=!1,f=0;f<n.validProps[h][f].length&&!p;++f){u=n.validProps[h][f].pattern();var I=new RegExp(u);if(p=I.test(e),p&&n.validProps[h][f].deprecated&&(s.warning("deprecated property: "+e),null!==n.validProps[h][f].deprecatedBy&&(e=n.validProps[h][f].deprecatedBy)),p)break;if(I=new RegExp(u.toUpperCase()),p=I.test(e.toUpperCase())){_=!0,d=u.substr(2),d=d.substr(0,d.length-1),d=d.replace(/\\/g,"");break}}p?_&&s.warning("unknown property: `"+e+"'; did you mean `"+d+"'"):s.warning("unknown property: "+e)}}if(void 0!==t&&null!==t&&t.length>0){var g=this._properties.get(e);void 0!==g?g.value=t:this._properties.set(e,{value:t,used:!1})}else this._properties.delete(e)},getCommandLineOptions:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)e.push("--"+t.key+"="+t.pv.value);return e},parseCommandLineOptions:function(e,t){e.length>0&&"."!=e.charAt(e.length-1)&&(e+="."),e="--"+e;var n=[],i=this;return t.forEach(function(t){0===t.indexOf(e)?(-1===t.indexOf("=")&&(t+="=1"),i.parseLine(t.substring(2))):n.push(t)}),n},parseIceCommandLineOptions:function(e){for(var t=e.slice(),i=0;i<n.clPropNames.length;++i)t=this.parseCommandLineOptions(n.clPropNames[i],t);return t},parse:function(e){for(var t,n=e.match(/[^\r\n]+/g);t=n.shift();)this.parseLine(t)},parseLine:function(e){for(var t="",n="",i=s,o="",a="",h=!1,u=0;u<e.length;++u){var l=e.charAt(u);switch(i){case s:switch(l){case"\\":if(u<e.length-1)switch(l=e.charAt(++u)){case"\\":case"#":case"=":t+=o,o="",t+=l;break;case" ":0!==t.length&&(o+=l);break;default:t+=o,o="",t+="\\",t+=l}else t+=o,t+=l;break;case" ":case"	":case"\r":case"\n":0!==t.length&&(o+=l);break;case"=":o="",i=c;break;case"#":h=!0;break;default:t+=o,o="",t+=l}break;case c:switch(l){case"\\":if(u<e.length-1)switch(l=e.charAt(++u)){case"\\":case"#":case"=":n+=0===n.length?a:o,o="",a="",n+=l;break;case" ":o+=l,a+=l;break;default:n+=0===n.length?a:o,o="",a="",n+="\\",n+=l}else n+=0===n.length?a:o,n+=l;break;case" ":case"	":case"\r":case"\n":0!==n.length&&(o+=l);break;case"#":h=!0;break;default:n+=0===n.length?a:o,o="",a="",n+=l}}if(h)break}return n+=a,i===s&&0!==t.length||i==c&&0===t.length?void r().warning('invalid config file entry: "'+e+'"'):void(0!==t.length&&this.setProperty(t,n))},clone:function(){return new a(null,this)},getUnusedProperties:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)t.pv.used||e.push(t.key);return e}});a.createProperties=function(e,t){return new a(e,t)},Ice.Properties=a}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.StringUtil,i=Ice.Class({__init__:function(e,n){this._instance=e,this._adapterName=n,this._servantMapMap=new t(t.compareEquals),this._defaultServantMap=new t,this._locatorMap=new t},addServant:function(i,r,o){e.assert(null!==this._instance),null===o&&(o="");var s=this._servantMapMap.get(r);if(void 0===s)s=new t,this._servantMapMap.set(r,s);else if(s.has(o)){var c=new Ice.AlreadyRegisteredException;throw c.id=this._instance.identityToString(r),c.kindOfObject="servant",o.length>0&&(c.id+=" -f "+n.escapeString(o,"")),c}s.set(o,i)},addDefaultServant:function(t,n){e.assert(null!==this._instance);var i=this._defaultServantMap.get(n);if(void 0!==i){var r=new Ice.AlreadyRegisteredException;throw r.kindOfObject="default servant",r.id=n,r}this._defaultServantMap.set(n,t)},removeServant:function(t,i){e.assert(null!==this._instance),null===i&&(i="");var r=this._servantMapMap.get(t);if(void 0===r||!r.has(i)){var o=new Ice.NotRegisteredException;throw o.id=this._instance.identityToString(t),o.kindOfObject="servant",i.length>0&&(o.id+=" -f "+n.escapeString(i,"")),o}var s=r.get(i);return r.delete(i),0===r.size&&this._servantMapMap.delete(t),s},removeDefaultServant:function(t){e.assert(null!==this._instance);var n=this._defaultServantMap.get(t);if(void 0===n){var i=new Ice.NotRegisteredException;throw i.kindOfObject="default servant",i.id=t,i}return this._defaultServantMap.delete(t),n},removeAllFacets:function(t){e.assert(null!==this._instance);var n=this._servantMapMap.get(t);if(void 0===n){var i=new Ice.NotRegisteredException;throw i.id=this._instance.identityToString(t),i.kindOfObject="servant",i}return this._servantMapMap.delete(t),n},findServant:function(e,t){null===t&&(t="");var n=this._servantMapMap.get(e),i=null;return void 0===n?(i=this._defaultServantMap.get(e.category),void 0===i&&(i=this._defaultServantMap.get(""))):i=n.get(t),void 0===i?null:i},findDefaultServant:function(t){e.assert(null!==this._instance);var n=this._defaultServantMap.get(t);return void 0===n?null:n},findAllFacets:function(n){e.assert(null!==this._instance);var i=this._servantMapMap.get(n);return void 0!==i?i.clone():new t},hasServant:function(t){var n=this._servantMapMap.get(t);return void 0===n?!1:(e.assert(n.size>0),!0)},addServantLocator:function(t,i){e.assert(null!==this._instance);var r=this._locatorMap.get(i);if(void 0!==r){var o=new Ice.AlreadyRegisteredException;throw o.id=n.escapeString(i,""),o.kindOfObject="servant locator",o}this._locatorMap.set(i,t)},removeServantLocator:function(t){e.assert(null!==this._instance);var i=this._locatorMap.get(t);if(void 0===i){var r=new Ice.NotRegisteredException;throw r.id=n.escapeString(t,""),r.kindOfObject="servant locator",r}return this._locatorMap.delete(t),i},findServantLocator:function(e){var t=this._locatorMap.get(e);return void 0===t?null:t},destroy:function(){e.assert(null!==this._instance);var t=this._instance.initializationData().logger;this._servantMapMap.clear();var n=this._locatorMap.clone();this._locatorMap.clear(),this._instance=null;for(var i=n.entries;null!==i;i=i.next){var r=i.value;try{r.deactivate(i.key)}catch(o){var s="exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+i.key+"'\n"+o.toString();t.error(s)}}}});Ice.ServantManager=i}(),function(){function e(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t}Ice.generateUUID=e}(),function(){var e=Ice.HashMap,t=Ice.CommunicatorDestroyedException,n=Ice.Class({__init__:function(t){this._logger=t,this._destroyed=!1,this._tokenId=0,this._tokens=new e},destroy:function(){var e=this;this._tokens.forEach(function(t){e.cancel(t)}),this._destroyed=!0,this._tokens.clear()},schedule:function(e,n){if(this._destroyed)throw new t;var i=this._tokenId++,r=this,o=setTimeout(function(){r.handleTimeout(i)},n);return this._tokens.set(i,{callback:e,id:o,isInterval:!1}),i},scheduleRepeated:function(e,n){if(this._destroyed)throw new t;var i=this._tokenId++,r=this,o=setInterval(function(){r.handleInterval(i)},n);return this._tokens.set(i,{callback:e,id:o,isInterval:!0}),i},cancel:function(e){if(this._destroyed)return!1;var t=this._tokens.get(e);return void 0===t?!1:(this._tokens.delete(e),t.isInterval?clearInterval(t.id):clearTimeout(t.id),!0)},handleTimeout:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t){this._tokens.delete(e);try{t.callback()}catch(n){this._logger.warning("uncaught exception while executing timer:\n"+n)}}}},handleInterval:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t)try{t.callback()}catch(n){this._logger.warning("uncaught exception while executing timer:\n"+n)}}}});Ice.Timer=n}(),function(){var e=Ice.Class({__init__:function(e,t,n,i){this._instance=e,this._traceLevel=e.traceLevels().network,this._traceCategory=e.traceLevels().networkCat,this._logger=e.initializationData().logger,this._properties=e.initializationData().properties,this._type=t,this._protocol=n,this._secure=i},traceLevel:function(){return this._traceLevel},traceCategory:function(){return this._traceCategory},logger:function(){return this._logger},protocol:function(){return this._protocol},type:function(){return this._type},secure:function(){return this._secure},properties:function(){return this._properties},defaultHost:function(){return this._instance.defaultsAndOverrides().defaultHost},defaultSourceAddress:function(){return this._instance.defaultsAndOverrides().defaultSourceAddress},defaultEncoding:function(){return this._instance.defaultsAndOverrides().defaultEncoding},defaultTimeout:function(){return this._instance.defaultsAndOverrides().defaultTimeout},messageSizeMax:function(){return this._instance.messageSizeMax()}});Ice.ProtocolInstance=e}(),function(){function e(e){return 26>e?String.fromCharCode(r+e):52>e?String.fromCharCode(o+(e-26)):62>e?String.fromCharCode(s+(e-52)):62==e?"+":"/"}function t(e){return e>="A"&&"Z">=e?e.charCodeAt(0)-r:e>="a"&&"z">=e?e.charCodeAt(0)-o+26:e>="0"&&"9">=e?e.charCodeAt(0)-s+52:"+"==e?62:63}var n=Ice.Buffer,i={},r="A".charCodeAt(0),o="a".charCodeAt(0),s="0".charCodeAt(0);i.encode=function(t){if(null===t||0===t.length)return"";for(var n,i,r,o,s,c,a,h=(4*t.length/3+1,[]),u=0;u<t.length;u+=3)n=255&t[u],i=0,r=0,u+1<t.length&&(i=255&t[u+1]),u+2<t.length&&(r=255&t[u+2]),o=n>>2&255,s=255&((3&n)<<4|i>>4),c=255&((15&i)<<2|r>>6),a=63&r,h.push(e(o)),h.push(e(s)),h.push(u+1<t.length?e(c):"="),h.push(u+2<t.length?e(a):"=");for(var l=h.join(""),d=[],p=0;l.length-p>76;)d.push(l.substring(p,p+76)),d.push("\r\n"),p+=76;return d.push(l.substring(p)),d.join("")},i.decode=function(e){for(var r=[],o=0;o<e.length;o++){var s=e.charAt(o);i.isBase64(s)&&r.push(s)}if(0===r.length)return null;var c=3*r.length/4+1,a=new n;a.resize(c);for(var h,u,l,d,p,_,f,I,g=0;g<r.length;g+=4)p="A",_="A",f="A",I="A",p=r[g],g+1<r.length&&(_=r[g+1]),g+2<r.length&&(f=r[g+2]),g+3<r.length&&(I=r[g+3]),h=255&t(p),u=255&t(_),l=255&t(f),d=255&t(I),a.put(h<<2|u>>4),"="!=f&&a.put((15&u)<<4|l>>2),"="!=I&&a.put((3&l)<<6|d);return a.remaining>0?a.getArrayAt(0,a.position):a.getArrayAt(0)},i.isBase64=function(e){return e>="A"&&"Z">=e?!0:e>="a"&&"z">=e?!0:e>="0"&&"9">=e?!0:"+"==e?!0:"/"==e?!0:"="==e?!0:!1},Ice.Base64=i}(),function(){Slice.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",!1,"Ice.Endpoint")}(),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,n=(Ice.Promise,Ice.Protocol),i=Ice.UserException,r=Ice.BasicStream,o=Ice.Class(e,{__init__:function(t,i,o,s,c,a){e.call(this,t,i,o,s,c),void 0!==t&&(this._completed=a,this._is=null,this._os=null!==t?new r(this._instance,n.currentProtocolEncoding):null,this._state=0,this._exception=null,this._sentSynchronously=!1)},cancel:function(){this.__cancel(new Ice.InvocationCanceledException)},isCompleted:function(){return(this._state&o.Done)>0},isSent:function(){return(this._state&o.Sent)>0},throwLocalException:function(){if(null!==this._exception)throw this._exception},sentSynchronously:function(){return this._sentSynchronously},__markSent:function(e){t.assert(0===(this._state&o.Done)),this._state|=o.Sent,e&&(this._state|=o.Done|o.OK,this._cancellationHandler=null,this.succeed(this))},__markFinished:function(e,n){t.assert(0===(this._state&o.Done)),this._state|=o.Done,e&&(this._state|=o.OK),this._cancellationHandler=null,n?n(this):this.succeed(this)},__markFinishedEx:function(e){t.assert(0===(this._state&o.Done)),this._exception=e,this._state|=o.Done,this._cancellationHandler=null,this.fail(e,this)},__cancel:function(e){this._cancellationException=e,this._cancellationHandler&&this._cancellationHandler.asyncRequestCanceled(this,e)},__cancelable:function(e){if(this._cancellationException)try{throw this._cancellationException}finally{this._cancellationException=null}this._cancellationHandler=e},__os:function(){return this._os},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(t.assert(0!==(this._state&o.Done)),0===(this._state&o.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof i&&this._is.endReadEncaps(),e}}});o.OK=1,o.Done=2,o.Sent=4,Ice.AsyncResult=o}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResult,n=Ice.BasicStream,i=Ice.Debug,r=Ice.HashMap,o=Ice.RetryException,s=(Ice.OperationMode,Ice.Protocol),c=Ice.Identity,a=Ice.Class(t,{__init__:function(e,i,r,o,c){void 0!==e?(t.call(this,e,i,r,o,c),this._os=new n(this._instance,s.currentProtocolEncoding)):t.call(this)},__os:function(){return this._os},__sent:function(){this.__markSent(!0)},__completedEx:function(e){this.__markFinishedEx(e)},__retryException:function(){i.assert(!1)}}),h=Ice.Class(a,{__init__:function(e,n){void 0!==e?(a.call(this,e.ice_getCommunicator(),n,null,e,null),this._mode=null,this._cnt=0,this._sent=!1,this._handler=null):t.call(this)},__completedEx:function(e){try{this._instance.retryQueue().add(this,this.__handleException(e))}catch(e){this.__markFinishedEx(e)}},__retryException:function(e){try{this.__handleRetryException(e.inner),this._instance.retryQueue().add(this,0)}catch(e){this.__completedEx(e)}},__retry:function(){this.__invokeImpl(!1)},__abort:function(e){this.__markFinishedEx(e)},__invokeImpl:function(t){try{if(t){var n=this._proxy.__reference().getInvocationTimeout();if(n>0){var i=this;this._timeoutToken=this._instance.timer().schedule(function(){i.__cancel(new Ice.InvocationTimeoutException)},n)}}for(;;)try{this._sent=!1,this._handler=this._proxy.__getRequestHandler();var r=this._handler.sendAsyncRequest(this);return void((r&e.Sent)>0&&t&&(this._sentSynchronously=!0))}catch(s){if(s instanceof o)this.__handleRetryException(s.inner);else{var c=this.__handleException(s);if(c>0)return void this._instance.retryQueue().add(this,c)}}}catch(s){this.__markFinishedEx(s)}},__markSent:function(e){this._sent=!0,e&&this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),a.prototype.__markSent.call(this,e)},__markFinishedEx:function(e){this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),a.prototype.__markFinishedEx.call(this,e)},__handleRetryException:function(){this._proxy.__setRequestHandler(this._handler,null)},__handleException:function(e){var t={value:0};return this._cnt=this._proxy.__handleException(e,this._handler,this._mode,this._sent,t,this._cnt),t.value}}),u=Ice.Class(h,{__init__:function(e,t,n){void 0!==e?(h.call(this,e,t),this._encoding=s.getCompatibleEncoding(this._proxy.__reference().getEncoding()),this._completed=n):h.call(this)},__prepare:function(e,t,n){if(s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this._mode=t,null===n&&(n=u._emptyContext),this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())for(;;)try{this._handler=this._proxy.__getRequestHandler(),this._handler.prepareBatchRequest(this._os);break}catch(i){if(!(i instanceof o))throw this._proxy.__setRequestHandler(this._handler,null),this._handler=null,i;this._proxy.__setRequestHandler(this._handler,null)}else this._os.writeBlob(s.requestHdr);var c=this._proxy.__reference();c.getIdentity().__write(this._os);var a=c.getFacet();if(null===a||0===a.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[a]),this._os.writeString(this._operation),this._os.writeByte(t.value),void 0!==n){if(null!==n&&!(n instanceof r))throw new Error("illegal context value, expecting null or HashMap");Ice.ContextHelper.write(this._os,n)}else{var h=c.getInstance().getImplicitContext(),l=c.getContext();null===h?Ice.ContextHelper.write(this._os,l):h.write(l,this._os)}},__sent:function(){this.__markSent(!this._proxy.ice_isTwoway())},__send:function(e,t,n){return e.sendAsyncRequest(this,t,n)},__abort:function(e){(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&null!==this._handler&&this._handler.abortBatchRequest(),h.prototype.__abort.call(this,e)},__invoke:function(){return(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&null!==this._handler?(this._sentSynchronously=!0,this._handler.finishBatchRequest(this._os),void this.__markFinished(!0)):void this.__invokeImpl(!0)},__completed:function(e){i.assert(this._proxy.ice_isTwoway());var t;try{switch(null===this._is&&(this._is=new n(this._instance,s.currentProtocolEncoding)),this._is.swap(e),t=this._is.readByte()){case s.replyOK:case s.replyUserException:break;case s.replyObjectNotExist:case s.replyFacetNotExist:case s.replyOperationNotExist:var r=new c;r.__read(this._is);var o,a=Ice.StringSeqHelper.read(this._is);if(a.length>0){if(a.length>1)throw new Ice.MarshalException;o=a[0]}else o="";var h=this._is.readString(),u=null;switch(t){case s.replyObjectNotExist:u=new Ice.ObjectNotExistException;break;case s.replyFacetNotExist:u=new Ice.FacetNotExistException;break;case s.replyOperationNotExist:u=new Ice.OperationNotExistException;break;default:i.assert(!1)}throw u.id=r,u.facet=o,u.operation=h,u;case s.replyUnknownException:case s.replyUnknownLocalException:case s.replyUnknownUserException:var l=this._is.readString(),d=null;switch(t){case s.replyUnknownException:d=new Ice.UnknownException;break;case s.replyUnknownLocalException:d=new Ice.UnknownLocalException;break;case s.replyUnknownUserException:d=new Ice.UnknownUserException;break;default:i.assert(!1)}throw d.unknown=l,d;default:throw new Ice.UnknownReplyStatusException}this.__markFinished(t==s.replyOK,this._completed)}catch(p){this.__completedEx(p)}},__startWriteParams:function(e){return this._os.startWriteEncaps(this._encoding,e),this._os},__endWriteParams:function(){this._os.endWriteEncaps()},__writeEmptyParams:function(){this._os.writeEmptyEncaps(this._encoding)},__writeParamEncaps:function(e){null===e||0===e.length?this._os.writeEmptyEncaps(this._encoding):this._os.writeEncaps(e)},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(i.assert(0!==(this._state&t.Done)),0===(this._state&t.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof Ice.UserException&&this._is.endReadEncaps(),e}}});u._emptyContext=new r;var l=Ice.Class(h,{__init__:function(e,t){h.call(this,e,t)},__send:function(e){return e.flushAsyncBatchRequests(this)},__invoke:function(){s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this.__invokeImpl(!0)},__handleRetryException:function(e){throw this._proxy.__setRequestHandler(this._handler,null),e},__handleException:function(e){throw this._proxy.__setRequestHandler(this._handler,null),e}}),d=Ice.Class(h,{__init__:function(e,t){h.call(this,e,t)},__send:function(t){return this.__markFinished(!0,function(e){e.succeed(t)}),e.Sent},__invoke:function(){this.__invokeImpl(!0)}}),p=Ice.Class(a,{__init__:function(e,t,n){a.call(this,t,n,e,null,null)},__invoke:function(){try{var t=this._connection.flushAsyncBatchRequests(this);(t&e.Sent)>0&&(this._sentSynchronously=!0)}catch(n){this.__completedEx(n)}}});Ice.OutgoingAsync=u,Ice.ProxyFlushBatch=l,Ice.ProxyGetConnection=d,Ice.ConnectionFlushBatch=p}(),function(){var e=Ice.ArrayUtil,t=Ice.AsyncResultBase,n=(Ice.AsyncResult,Ice.Debug),i=(Ice.FormatType,Ice.HashMap),r=Ice.OutgoingAsync,o=Ice.ProxyFlushBatch,s=Ice.ProxyGetConnection,c=Ice.ReferenceMode,a=Ice.OperationMode,h=Ice.Class({__init__:function(){this._reference=null,this._requestHandler=null},hashCode:function(){return this._reference.hashCode()},ice_getCommunicator:function(){return this._reference.getCommunicator()},toString:function(){return this._reference.toString()},ice_getIdentity:function(){return this._reference.getIdentity().clone()},ice_identity:function(e){if(void 0===e||null===e||0===e.name.length)throw new Ice.IllegalIdentityException;if(e.equals(this._reference.getIdentity()))return this;var t=new h;return t.__setup(this._reference.changeIdentity(e)),t},ice_getContext:function(){return new i(this._reference.getContext())},ice_context:function(e){return this.__newInstance(this._reference.changeContext(e))},ice_getFacet:function(){return this._reference.getFacet()},ice_facet:function(e){if((void 0===e||null===e)&&(e=""),e===this._reference.getFacet())return this;var t=new h;return t.__setup(this._reference.changeFacet(e)),t},ice_getAdapterId:function(){return this._reference.getAdapterId()},ice_adapterId:function(e){return(void 0===e||null===e)&&(e=""),e===this._reference.getAdapterId()?this:this.__newInstance(this._reference.changeAdapterId(e))},ice_getEndpoints:function(){return e.clone(this._reference.getEndpoints())},ice_endpoints:function(t){return(void 0===t||null===t)&&(t=[]),e.equals(t,this._reference.getEndpoints())?this:this.__newInstance(this._reference.changeEndpoints(t))},ice_getLocatorCacheTimeout:function(){return this._reference.getLocatorCacheTimeout()},ice_locatorCacheTimeout:function(e){if(-1>e)throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e);return e===this._reference.getLocatorCacheTimeout()?this:this.__newInstance(this._reference.changeLocatorCacheTimeout(e))},ice_getInvocationTimeout:function(){return this._reference.getInvocationTimeout()},ice_invocationTimeout:function(e){if(1>e&&-1!==e)throw new Error("invalid value passed to ice_invocationTimeout: "+e);return e===this._reference.getInvocationTimeout()?this:this.__newInstance(this._reference.changeInvocationTimeout(e))},ice_isConnectionCached:function(){return this._reference.getCacheConnection()},ice_connectionCached:function(e){return e===this._reference.getCacheConnection()?this:this.__newInstance(this._reference.changeCacheConnection(e))},ice_getEndpointSelection:function(){return this._reference.getEndpointSelection()},ice_endpointSelection:function(e){return e===this._reference.getEndpointSelection()?this:this.__newInstance(this._reference.changeEndpointSelection(e))},ice_isSecure:function(){return this._reference.getSecure()},ice_secure:function(e){return e===this._reference.getSecure()?this:this.__newInstance(this._reference.changeSecure(e))},ice_getEncodingVersion:function(){return this._reference.getEncoding().clone()},ice_encodingVersion:function(e){return e.equals(this._reference.getEncoding())?this:this.__newInstance(this._reference.changeEncoding(e))},ice_isPreferSecure:function(){return this._reference.getPreferSecure()},ice_preferSecure:function(e){return e===this._reference.getPreferSecure()?this:this.__newInstance(this._reference.changePreferSecure(e))
},ice_getRouter:function(){var e=this._reference.getRouterInfo();return null!==e?e.getRouter():null},ice_router:function(e){var t=this._reference.changeRouter(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getLocator:function(){var e=this._reference.getLocatorInfo();return null!==e?e.getLocator():null},ice_locator:function(e){var t=this._reference.changeLocator(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_isTwoway:function(){return this._reference.getMode()===c.ModeTwoway},ice_twoway:function(){return this._reference.getMode()===c.ModeTwoway?this:this.__newInstance(this._reference.changeMode(c.ModeTwoway))},ice_isOneway:function(){return this._reference.getMode()===c.ModeOneway},ice_oneway:function(){return this._reference.getMode()===c.ModeOneway?this:this.__newInstance(this._reference.changeMode(c.ModeOneway))},ice_isBatchOneway:function(){return this._reference.getMode()===c.ModeBatchOneway},ice_batchOneway:function(){return this._reference.getMode()===c.ModeBatchOneway?this:this.__newInstance(this._reference.changeMode(c.ModeBatchOneway))},ice_isDatagram:function(){return this._reference.getMode()===c.ModeDatagram},ice_datagram:function(){return this._reference.getMode()===c.ModeDatagram?this:this.__newInstance(this._reference.changeMode(c.ModeDatagram))},ice_isBatchDatagram:function(){return this._reference.getMode()===c.ModeBatchDatagram},ice_batchDatagram:function(){return this._reference.getMode()===c.ModeBatchDatagram?this:this.__newInstance(this._reference.changeMode(c.ModeBatchDatagram))},ice_compress:function(e){var t=this._reference.changeCompress(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_timeout:function(e){if(1>e&&-1!==e)throw new Error("invalid value passed to ice_timeout: "+e);var t=this._reference.changeTimeout(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnectionId:function(){return this._reference.getConnectionId()},ice_connectionId:function(e){var t=this._reference.changeConnectionId(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnection:function(){var e=new s(this,"ice_getConnection");try{e.__invoke()}catch(t){e.__abort(t)}return e},ice_getCachedConnection:function(){return this._requestHandler?this._requestHandler.getConnection():null},ice_flushBatchRequests:function(){var e=new o(this,"ice_flushBatchRequests");try{e.__invoke()}catch(t){e.__abort(t)}return e},equals:function(e){return this===e?!0:e instanceof h?this._reference.equals(e._reference):!1},__reference:function(){return this._reference},__copyFrom:function(e){n.assert(null===this._reference),n.assert(null===this._requestHandler),this._reference=e._reference,this._requestHandler=e._requestHandler},__handleException:function(e,t,n,i,r,o){if(this.__setRequestHandler(t,null),!(e instanceof Ice.LocalException&&(!i||n==a.Nonmutating||n==a.Idempotent||e instanceof Ice.CloseConnectionException||e instanceof Ice.ObjectNotExistException)))throw e;try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,r,o)}catch(s){throw s instanceof Ice.CommunicatorDestroyedException?e:s}},__checkAsyncTwowayOnly:function(e){if(!this.ice_isTwoway())throw new Error("`"+e+"' can only be called with a twoway proxy")},__getRequestHandler:function(){var e;if(this._reference.getCacheConnection()){if(null!==this._requestHandler)return this._requestHandler;e=this._reference.getInstance().requestHandlerFactory().getRequestHandler(this._reference,this),this._requestHandler=e}else e=this._reference.getInstance().requestHandlerFactory().getRequestHandler(this._reference,this);return e.connect(this)},__setRequestHandler:function(e,t){this._reference.getCacheConnection()&&null!==e&&this._requestHandler&&this._requestHandler!==t&&(this._requestHandler=this._requestHandler.update(e,t))},__setup:function(e){n.assert(null===this._reference),this._reference=e},__newInstance:function(e){var t=new this.constructor;return t.__setup(e),t},ice_instanceof:function(e){return e?this instanceof e?!0:this.constructor.__instanceof(e):!1}});h.__invoke=function(e,t,n,i,o,s,c,a,u){(null!==c||a.length>0)&&e.__checkAsyncTwowayOnly(t);var l=new r(e,t,function(e){h.__completed(e,c,a)});try{if(l.__prepare(t,n,o),null===s)l.__writeEmptyParams();else{var d=l.__startWriteParams(i);s.call(null,d,u),l.__endWriteParams()}l.__invoke()}catch(p){l.__abort(p)}return l},h.__completed=function(e,t,n){if(h.__check(e,n))try{if(null===t)e.__readEmptyParams(),e.succeed(e);else{var i=t(e);e.succeed.apply(e,i)}}catch(r){return void h.__dispatchLocalException(e,r)}},h.__returns_bool=function(e,t){t.push(e.readBool())},h.__returns_byte=function(e,t){t.push(e.readByte())},h.__returns_short=function(e,t){t.push(e.readShort())},h.__returns_int=function(e,t){t.push(e.readInt())},h.__returns_long=function(e,t){t.push(e.readLong())},h.__returns_float=function(e,t){t.push(e.readFloat())},h.__returns_double=function(e,t){t.push(e.readDouble())},h.__returns_string=function(e,t){t.push(e.readString())},h.__returns_ObjectPrx=function(e,t){t.push(e.readProxy())},h.__returns_Object=function(e,t){e.readObject(function(e){t.push(e)},Ice.Object),e.readPendingObjects()},h.__check=function(e,t){try{e.__throwUserException()}catch(n){if(n instanceof Ice.UserException){if(null!==t)for(var i=0;i<t.length;++i)if(n instanceof t[i])return e.fail(n,e),!1;return e.fail(new Ice.UnknownUserException(n.ice_name()),e),!1}return e.fail(n,e),!1}return!0},h.__dispatchLocalException=function(e,t){e.fail(t,e)},h.ice_staticId=Ice.Object.ice_staticId,h.checkedCast=function(e,n,i){var r=null;if(void 0===e||null===e)r=new t(null,"checkedCast",null,null,null),r.succeed(null,r);else{void 0!==n&&(e=e.ice_facet(n));var o=this;r=new t(e.ice_getCommunicator(),"checkedCast",null,e,null),e.ice_isA(this.ice_staticId(),i).then(function(t,n){if(n){var i=new o;i.__copyFrom(e),r.succeed(i,r)}else r.succeed(null,r)}).exception(function(e){e instanceof Ice.FacetNotExistException?r.succeed(null,r):r.fail(e,r)})}return r},h.uncheckedCast=function(e,t){var n=null;return void 0!==e&&null!==e&&(n=new this,void 0!==t&&(e=e.ice_facet(t)),n.__copyFrom(e)),n},Object.defineProperty(h,"minWireSize",{get:function(){return 2}}),h.write=function(e,t){e.writeProxy(t)},h.read=function(e){return e.readProxy(this)},h.writeOpt=function(e,t,n){e.writeOptProxy(t,n)},h.readOpt=function(e,t){return e.readOptProxy(t,this)},h.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return this.__parent?this.__parent.__instanceof(e):!1};var u=Ice.Slice;u.defineProxy=function(e,t,n){var i=function(){e.call(this)};return i.__parent=e,i.__implements=n,i.prototype=new e,i.prototype.constructor=i,i.ice_staticId=t,i.checkedCast=h.checkedCast,i.uncheckedCast=h.uncheckedCast,i.write=h.write,i.writeOpt=h.writeOpt,i.read=h.read,i.readOpt=h.readOpt,i.__instanceof=h.__instanceof,Object.defineProperty(i,"minWireSize",{get:function(){return 2}}),i},Ice.ObjectPrx=h}(),function(){var e=Ice.Class,t=e({__init__:function(e){this._instance=e,this._requests=[]},add:function(e,t){if(null===this._instance)throw new Ice.CommunicatorDestroyedException;var i=new n(this,e);e.__cancelable(i),i.token=this._instance.timer().schedule(function(){i.run()},t),this._requests.push(i)},destroy:function(){for(var e=0;e<this._requests.length;++e)this._instance.timer().cancel(this._requests[e].token),this._requests[e].destroy();this._requests=[],this._instance=null},remove:function(e){var t=this._requests.indexOf(e);t>=0&&this._requests.splice(t,1)},cancel:function(e){var t=this._requests.indexOf(e);return t>=0?(this._requests.splice(t,1),this._instance.timer().cancel(e.token)):!1}});Ice.RetryQueue=t;var n=e({__init__:function(e,t){this.queue=e,this.outAsync=t},run:function(){this.outAsync.__retry(),this.queue.remove(this)},destroy:function(){try{this.outAsync.__abort(new Ice.CommunicatorDestroyedException)}catch(e){}},asyncRequestCanceled:function(e,t){this.queue.cancel(this)&&this.outAsync.__completedEx(t)}})}(),function(){var e=Ice.ArrayUtil,t=Ice.Debug,n=Ice.HashMap,i=Ice.Promise,r=Ice.Class({__init__:function(e){this._router=e,t.assert(null!==this._router),this._clientEndpoints=null,this._serverEndpoints=null,this._adapter=null,this._identities=new n(n.compareEquals),this._evictedIdentities=[]},destroy:function(){this._clientEndpoints=[],this._serverEndpoints=[],this._adapter=null,this._identities.clear()},equals:function(e){return this===e?!0:e instanceof r?this._router.equals(e._router):!1},hashCode:function(){return this._router.hashCode()},getRouter:function(){return this._router},getClientEndpoints:function(){var e=new i;if(null!==this._clientEndpoints)e.succeed(this._clientEndpoints);else{var t=this;this._router.getClientProxy().then(function(n){t.setClientEndpoints(n,e)}).exception(function(t){e.fail(t)})}return e},getServerEndpoints:function(){if(null!==this._serverEndpoints)return(new i).succeed(this._serverEndpoints);var e=this;return this._router.getServerProxy().then(function(t){return e.setServerEndpoints(t)})},addProxy:function(e){if(t.assert(null!==e),this._identities.has(e.ice_getIdentity()))return(new i).succeed();var n=this;return this._router.addProxies([e]).then(function(t){n.addAndEvictProxies(e,t)})},setAdapter:function(e){this._adapter=e},getAdapter:function(){return this._adapter},clearCache:function(e){this._identities.delete(e.getIdentity())},setClientEndpoints:function(e,t){if(null===this._clientEndpoints)if(null===e)this._clientEndpoints=this._router.__reference().getEndpoints(),t.succeed(this._clientEndpoints);else{e=e.ice_router(null);var n=this;this._router.ice_getConnection().then(function(i){var r=e.ice_timeout(i.timeout());n._clientEndpoints=r.__reference().getEndpoints(),t.succeed(n._clientEndpoints)}).exception(function(e){t.fail(e)})}else t.succeed(this._clientEndpoints)},setServerEndpoints:function(e){if(null===e)throw new Ice.NoEndpointException;return e=e.ice_router(null),this._serverEndpoints=e.__reference().getEndpoints(),this._serverEndpoints},addAndEvictProxies:function(t,n){var i=e.indexOf(this._evictedIdentities,t.ice_getIdentity(),function(e,t){return e.equals(t)});i>=0?this._evictedIdentities.splice(i,1):this._identities.set(t.ice_getIdentity(),1);for(var r=0;r<n.length;++r)this._identities.delete(n[r].ice_getIdentity())}});Ice.RouterInfo=r}(),function(){function parseParam(p){var type=p[0],t=typeof type;return"number"===t?type=builtinHelpers[p[0]]:"string"===t&&(type=eval(type)),{type:type,isObject:p[1]===!0,tag:p[2]}}function parseOperation(e,t){var n,i,r={};r.name=e,r.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal,r.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal,r.amd=t[3]?!0:!1,r.format=t[4]?Ice.FormatType.valueOf(t[4]):Ice.FormatType.DefaultFormat,r.servantMethod=r.amd?e+"_async":t[0]?t[0]:e;var o;t[5]&&(o=parseParam(t[5]),o.pos=0),r.returns=o;var s=[],c=[];if(t[6])for(n=0;n<t[6].length;++n)i=parseParam(t[6][n]),i.pos=n,s.push(i),i.tag&&c.push(i);c.sort(function(e,t){return e.tag-t.tag}),r.inParams=s,r.inParamsOpt=c;var a=[],h=[];if(t[7]){var u=o?1:0;for(n=0;n<t[7].length;++n)i=parseParam(t[7][n]),i.pos=n+u,a.push(i),i.tag&&h.push(i)}o&&o.tag&&h.push(o),h.sort(function(e,t){return e.tag-t.tag}),r.outParams=a,r.outParamsOpt=h;var l=[];if(t[8])for(n=0;n<t[8].length;++n)l.push(t[8][n]);return r.exceptions=l,r.sendsClasses=t[9]===!0,r.returnsClasses=t[10]===!0,r}function unmarshalParams(e,t,n,i,r,o,s){var c,a,h;for(c=0;c<n.length;++c)a=n[c],a.tag||(h=a.type.read(e),o[a.pos+s]=h);for(t&&(h=t.type.read(e),o[t.pos+s]=h),c=0;c<i.length;++c)a=i[c],h=a.type.readOpt(e,a.tag),o[a.pos+s]=h;r&&e.readPendingObjects()}function marshalParams(e,t,n,i,r,o){var s,c;for(s=0;s<i.length;++s)c=i[s],c.tag||c.type.write(e,t[c.pos]);for(n&&n.type.write(e,t[n.pos]),s=0;s<r.length;++s)c=r[s],c.type.writeOpt(e,c.tag,t[c.pos]);o&&e.writePendingObjects()}function getServantMethodFromInterfaces(e,t,n){for(var i,r=0;void 0===i&&r<e.length;++r){var o=e[r];i=o[t],void 0===i&&(-1===n.indexOf(o)&&n.push(o),o.__implements&&(i=getServantMethodFromInterfaces(o.__implements,t,n)))}return i}function getServantMethod(e,t){var n,i=dispatchPrefix+t,r=e[i];if(void 0===r){n=[];for(var o=e;o&&void 0===r;)o.__implements&&(r=getServantMethodFromInterfaces(o.__implements,i,n)),o=o.__parent;void 0!==r&&(e[i]=r)}if(void 0===r){var s;e.__ops&&(s=e.__ops.find(t));var c;if(void 0===s){for(var a=e.__parent;void 0===s&&a;)a.__ops&&void 0!==(s=a.__ops.find(t))&&(c=a),a=a.__parent;for(var h=0;void 0===s&&h<n.length;++h){var u=n[h];u.__ops&&void 0!==(s=u.__ops.find(t))&&(c=u)}}void 0!==s&&(r=function(e,t,n){return __dispatchImpl(e,s,t,n)},e[i]=r,c&&(c[i]=r))}return r}function addProxyOperation(e,t,n){var i=n[0]?n[0]:t,r=null;e.prototype[i]=function(){var e=arguments;null===r&&(r=parseOperation(t,n));var i=e[r.inParams.length],o=null;r.inParams.length>0&&(o=function(e,t){marshalParams(e,t,void 0,r.inParams,r.inParamsOpt,r.sendsClasses)});var s=null;return(r.returns||r.outParams.length>0)&&(s=function(e){var t,n=[],i=e.__startReadParams();if(r.returns&&!r.returns.tag&&(t=r.returns),unmarshalParams(i,t,r.outParams,r.outParamsOpt,r.returnsClasses,n,0),e.__endReadParams(),r.returnsClasses||r.outParamsOpt.length>0){var o=0;r.returns&&r.returns.isObject&&void 0!==n[r.returns.pos+o]&&(n[r.returns.pos+o]=n[r.returns.pos+o].value);for(var s=0;s<r.outParams.length;++s){var c=r.outParams[s];c.isObject&&void 0!==n[c.pos+o]&&(n[c.pos+o]=n[c.pos+o].value)}}return n.push(e),n}),Ice.ObjectPrx.__invoke(this,r.name,r.sendMode,r.format,i,o,s,r.exceptions,Array.prototype.slice.call(e))}}var __M=Ice.__M,Class=Ice.Class,builtinHelpers=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Object,Ice.ObjectPrx],OpTable=Class({__init__:function(e){this.raw=e,this.parsed={}},find:function(e){var t=this.parsed[e];return void 0===t&&void 0!==this.raw[e]&&(t=parseOperation(e,this.raw[e]),this.parsed[e]=t),t}}),Upcall=Class({__init__:function(e,t){this.incomingAsync=e,this.op=t},ice_response:function(){var e=arguments;if(this.incomingAsync.__validateResponse(!0))try{this.__sendResponse(e),this.incomingAsync.__response()}catch(t){this.incomingAsync.__exception(t)}},ice_exception:function(e){this.__checkException(e)?this.incomingAsync.__validateResponse(!1)&&(this.__sendException(e),this.incomingAsync.__response()):this.incomingAsync.ice_exception(e)},__sendResponse:function(e){if(void 0===this.op.returns&&0===this.op.outParams.length){if(e&&e.length>0)throw new Error("ice_response called with invalid arguments");this.incomingAsync.__writeEmptyParams()}else{var t,n=this.incomingAsync.__startWriteParams(this.op.format);this.op.returns&&!this.op.returns.tag&&(t=this.op.returns),marshalParams(n,e,t,this.op.outParams,this.op.outParamsOpt,this.op.returnsClasses),this.incomingAsync.__endWriteParams(!0)}},__checkException:function(e){for(var t=0;t<this.op.exceptions.length;++t)if(e instanceof this.op.exceptions[t])return!0;return!1},__sendException:function(e){this.incomingAsync.__writeUserException(e,this.op.format)}}),__dispatchImpl=function(e,t,n,i){var r=e[t.servantMethod];if(void 0===r||"function"!=typeof r){var o=i.adapter.getCommunicator(),s="servant for identity "+o.identityToString(i.id)+" does not define operation `"+t.servantMethod+"'";throw new Ice.UnknownException(s)}var c=new Upcall(n,t);try{var a=t.amd?[null]:[];if(0===t.inParams.length)n.readEmptyParams();else{var h=n.startReadParams(),u=t.amd?1:0;if(unmarshalParams(h,void 0,t.inParams,t.inParamsOpt,t.sendsClasses,a,u),n.endReadParams(),t.inParams.length>0&&(t.sendsClasses||t.inParamsOpt.length>0))for(var l=0;l<t.inParams.length;++l){var d=t.inParams[l];d.isObject&&void 0!==a[d.pos+u]&&(a[d.pos+u]=a[d.pos+u].value)}}if(a.push(i),t.amd){a[0]=c;try{r.apply(e,a)}catch(p){c.ice_exception(p)}return Ice.DispatchStatus.DispatchAsync}var _=t.outParams.length;t.returns&&++_;var f=r.apply(e,a);if(_>1&&!(f instanceof Array))throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array of length "+_);return 1===_&&(f=[f]),c.__sendResponse(f),Ice.DispatchStatus.DispatchOK}catch(p){if(c.__checkException(p))return c.__sendException(p),Ice.DispatchStatus.DispatchUserException;throw p}},dispatchPrefix="__op_",Slice=Ice.Slice;Slice.defineOperations=function(e,t,n){if(n&&(e.__ops=new OpTable(n)),e.prototype.__dispatch=function(t,n){var i=getServantMethod(e,n.operation);if(void 0===i||"function"!=typeof i)throw new Ice.OperationNotExistException(n.id,n.facet,n.operation);return i.call(i,this,t,n)},n)for(var i in n)addProxyOperation(t,i,n[i]);if(t.__implements)for(var r in t.__implements){var o=t.__implements[r].prototype;for(var s in o)"function"==typeof o[s]&&void 0===t.prototype[s]&&(t.prototype[s]=o[s])}},Slice.defineOperations(Ice.Object,Ice.ObjectPrx,{ice_ping:[,1,1,,,,,,],ice_isA:[,1,1,,,[1],[[7]],,],ice_id:[,1,1,,,[7],,,],ice_ids:[,1,1,,,["Ice.StringSeqHelper"],,,]})}(),function(){Ice.Router=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Ice.RouterPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.Router.ice_staticId,void 0),Slice.defineOperations(Ice.Router,Ice.RouterPrx,{getClientProxy:[,2,1,,,[9],,,,,],getServerProxy:[,2,1,,,[9],,,,,],addProxies:[,2,2,,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]}),Ice.RouterFinder=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RouterFinder"],-1,void 0,void 0,!1),Ice.RouterFinderPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.RouterFinder.ice_staticId,void 0),Slice.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,{getRouter:[,,,,,["Ice.RouterPrx"],,,,,]})}(),function(){Object.defineProperty(Ice,"TCPEndpointType",{value:1}),Object.defineProperty(Ice,"UDPEndpointType",{value:3}),Object.defineProperty(Ice,"WSEndpointType",{value:4}),Object.defineProperty(Ice,"WSSEndpointType",{value:5}),Ice.EndpointInfo=Slice.defineLocalObject(function(e,t){this.timeout=void 0!==e?e:0,this.compress=void 0!==t?t:!1}),Ice.Endpoint=Slice.defineLocalObject(),Ice.IPEndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r){Ice.EndpointInfo.call(this,e,t),this.host=void 0!==n?n:null,this.port=void 0!==i?i:0,this.sourceAddress=void 0!==r?r:null},Ice.EndpointInfo),Ice.TCPEndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)},Ice.IPEndpointInfo),Ice.UDPEndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,s){Ice.IPEndpointInfo.call(this,e,t,n,i,r),this.mcastInterface=void 0!==o?o:null,this.mcastTtl=void 0!==s?s:0},Ice.IPEndpointInfo),Ice.WSEndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r,o){Ice.IPEndpointInfo.call(this,e,t,n,i,r),this.resource=void 0!==o?o:null},Ice.IPEndpointInfo),Ice.OpaqueEndpointInfo=Slice.defineLocalObject(function(e,t,n,i){Ice.EndpointInfo.call(this,e,t),this.rawEncoding=void 0!==n?n:null,this.rawBytes=void 0!==i?i:null},Ice.EndpointInfo)}(),function(){Ice.AdapterNotFoundException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterNotFoundException",void 0,void 0,!1,!1),Ice.InvalidReplicaGroupIdException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::InvalidReplicaGroupIdException",void 0,void 0,!1,!1),Ice.AdapterAlreadyActiveException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterAlreadyActiveException",void 0,void 0,!1,!1),Ice.ObjectNotFoundException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ObjectNotFoundException",void 0,void 0,!1,!1),Ice.ServerNotFoundException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ServerNotFoundException",void 0,void 0,!1,!1),Ice.Locator=Slice.defineObject(void 0,Ice.Object,void 0,0,["::Ice::Locator","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.Locator.ice_staticId,void 0),Slice.defineOperations(Ice.Locator,Ice.LocatorPrx,{findObjectById:[,2,1,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,,["Ice.LocatorRegistryPrx"],,,,,]}),Ice.LocatorRegistry=Slice.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorRegistry","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorRegistryPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.LocatorRegistry.ice_staticId,void 0),Slice.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,{setAdapterDirectProxy:[,2,2,1,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,1,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,1,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]}),Ice.LocatorFinder=Slice.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorFinder","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorFinderPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.LocatorFinder.ice_staticId,void 0),Slice.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,{getLocator:[,,,,,["Ice.LocatorPrx"],,,,,]})}(),function(){var e=Ice.Class,t=e(Ice.Endpoint,{toString:function(){return this.protocol()+this.options()},initWithOptions:function(e){var t,n=[],i="`"+this.protocol();for(t=0;t<e.length;++t)i+=-1!==e[t].search(/[ \t\n\r]+/)?' "'+e[t]+'"':" "+e[t];for(i+="'",t=0;t<e.length;){var r=e[t++];if(r.length<2||"-"!=r.charAt(0))n.push(r);else{var o=null;t<e.length&&"-"!=e[t].charAt(0)&&(o=e[t++]),this.checkOption(r,o,i)||(n.push(r),null!==o&&n.push(o))}}for(e.length=0,t=0;t<n.length;t++)e.push(n[t])},equals:function(e){return e instanceof t?0===this.compareTo(e):!1},checkOption:function(){return!1}});Ice.EndpointI=t}(),function(){Ice.Address=function(e,t){this.host=e,this.port=t}}(),function(){var e=Ice.Address,t=Ice.HashUtil,n=Ice.StringUtil,i=Ice.Class,r=Ice.EndpointParseException,o=i(Ice.EndpointI,{__init__:function(e,t,n,i,r){this._instance=e,this._host=void 0===t?null:t,this._port=void 0===n?null:n,this._sourceAddr=void 0===i?null:i,this._connectionId=void 0===r?"":r},streamWrite:function(e){e.startWriteEncaps(),this.streamWriteImpl(e),e.endWriteEncaps()},getInfo:function(){var e=new Ice.IPEndpointInfo;return this.fillEndpointInfo(e),e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},secure:function(){return this._instance.secure()},connectionId:function(){return this._connectionId},changeConnectionId:function(e){return e===this._connectionId?this:this.createEndpoint(this._host,this._port,e)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this.hashInit(5381)),this._hashCode},options:function(){var e="";if(null!==this._host&&this._host.length>0){e+=" -h ";var t=-1!=this._host.indexOf(":");t&&(e+='"'),e+=this._host,t&&(e+='"')}return e+=" -p "+this._port,null!==this._sourceAddr&&this._sourceAddr.length>0&&(e+=" --sourceAddr "+this._sourceAddr),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof o?this._port<e._port?-1:e._port<this._port?1:this._host!=e._host?this._host<e._host?-1:1:this._sourceAddr!=e._sourceAddr?this._sourceAddr<e._sourceAddr?-1:1:this._connectionId!=e._connectionId?this._connectionId<e._connectionId?-1:1:0:this.type()<e.type()?-1:1},getAddress:function(){return new e(this._host,this._port)},toConnectorString:function(){return this._host+":"+this._port},streamWriteImpl:function(e){e.writeString(this._host),e.writeInt(this._port)},hashInit:function(e){return e=t.addNumber(e,this.type()),e=t.addString(e,this._host),e=t.addNumber(e,this._port),e=t.addString(e,this._sourceAddr),e=t.addString(e,this._connectionId)},fillEndpointInfo:function(e){var t=this;e.type=function(){return t.type()},e.datagram=function(){return t.datagram()},e.secure=function(){return t.secure()},e.host=this._host,e.port=this._port,e.sourceAddress=this._sourceAddr},initWithOptions:function(e,t){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),null===this._host||0===this._host.length)this._host=this._instance.defaultHost();else if("*"==this._host){if(!t)throw new r("`-h *' not valid for proxy endpoint `"+this+"'");this._host=""}if(null===this._host&&(this._host=""),null===this._sourceAddr)t||(this._sourceAddr=this._instance.defaultSourceAddress());else if(t)throw new r("`--sourceAddress not valid for object adapter endpoint `"+this+"'")},initWithStream:function(e){this._host=e.readString(),this._port=e.readInt()},checkOption:function(e,t,i){if("-h"===e){if(null===t)throw new r("no argument provided for -h option in endpoint "+i);this._host=t}else if("-p"===e){if(null===t)throw new r("no argument provided for -p option in endpoint "+i);try{this._port=n.toInt(t)}catch(o){throw new r("invalid port value `"+t+"' in endpoint "+i)}if(this._port<0||this._port>65535)throw new r("port value `"+t+"' out of range in endpoint "+i)}else{if("--sourceAddress"!==e)return!1;if(null===t)throw new r("no argument provided for --sourceAddress option in endpoint "+i);this._sourceAddr=t}return!0}});Ice.IPEndpointI=o}(),function(){Ice.ConnectionInfo=Slice.defineLocalObject(function(e,t,n){this.incoming=void 0!==e?e:!1,this.adapterName=void 0!==t?t:null,this.connectionId=void 0!==n?n:null}),Ice.ConnectionCallback=Slice.defineLocalObject(),Ice.ACMClose=Slice.defineEnum({CloseOff:0,CloseOnIdle:1,CloseOnInvocation:2,CloseOnInvocationAndIdle:3,CloseOnIdleForceful:4}),Ice.ACMHeartbeat=Slice.defineEnum({HeartbeatOff:0,HeartbeatOnInvocation:1,HeartbeatOnIdle:2,HeartbeatAlways:3}),Ice.ACM=Slice.defineStruct(function(e,t,n){this.timeout=void 0!==e?e:0,this.close=void 0!==t?t:Ice.CloseOff,this.heartbeat=void 0!==n?n:Ice.HeartbeatOff},!0),Ice.Connection=Slice.defineLocalObject(),Ice.IPConnectionInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,s){Ice.ConnectionInfo.call(this,e,t,n),this.localAddress=void 0!==i?i:"",this.localPort=void 0!==r?r:-1,this.remoteAddress=void 0!==o?o:"",this.remotePort=void 0!==s?s:-1},Ice.ConnectionInfo),Ice.TCPConnectionInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,s){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,s)},Ice.IPConnectionInfo),Ice.UDPConnectionInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,s,c,a){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,s),this.mcastAddress=void 0!==c?c:null,this.mcastPort=void 0!==a?a:-1},Ice.IPConnectionInfo),Ice.WSConnectionInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,s){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,s)},Ice.IPConnectionInfo)}(),function(){Ice.TraceLevels=function(e){var t="Network",n="Protocol",i="Retry",r="Locator",o="Slicing",s="Ice.Trace.",c=e.getPropertyAsInt(s+t),a=e.getPropertyAsInt(s+n),h=e.getPropertyAsInt(s+i),u=e.getPropertyAsInt(s+r),l=e.getPropertyAsInt(s+o);return e.getPropertyAsInt(s+"ThreadPool"),Object.create(null,{network:{get:function(){return c}},networkCat:{get:function(){return t}},protocol:{get:function(){return a}},protocolCat:{get:function(){return n}},retry:{get:function(){return h}},retryCat:{get:function(){return i}},location:{get:function(){return u}},locationCat:{get:function(){return r}},slicing:{get:function(){return l}},slicingCat:{get:function(){return o}}})}}(),function(){var e=Ice.BasicStream,t=Ice.Current,n=Ice.Debug,i=Ice.FormatType,r=Ice.Context,o=Ice.Identity,s=Ice.Protocol,c=Ice.StringUtil,a=Ice.Class({__init__:function(n,i,r,c,a,h){this._instance=n,this._response=c,this._compress=a,this._response&&(this._os=new e(n,s.currentProtocolEncoding)),this._connection=i,this._current=new t,this._current.id=new o,this._current.adapter=r,this._current.con=this._connection,this._current.requestId=h,this._servant=null,this._locator=null,this._cookie={value:null},c&&(this._os.writeBlob(s.replyHdr),this._os.writeInt(h)),this._is=null,this._cb=null,this._active=!0},__startWriteParams:function(e){return this._response&&(n.assert(this._os.size==s.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(0),this._os.startWriteEncaps(this._current.encoding,e)),this._os},__endWriteParams:function(e){if(this._response){var t=this._os.pos;this._os.pos=s.headerSize+4,this._os.writeByte(e?s.replyOK:s.replyUserException),this._os.pos=t,this._os.endWriteEncaps()}},__writeEmptyParams:function(){this._response&&(n.assert(this._os.size===s.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(s.replyOK),this._os.writeEmptyEncaps(this._current.encoding))},__writeParamEncaps:function(e,t){this._response&&(n.assert(this._os.size===s.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(t?s.replyOK:s.replyUserException),null===e||0===e.length?this._os.writeEmptyEncaps(this._current.encoding):this._os.writeEncaps(e))},__writeUserException:function(e,t){var n=this.__startWriteParams(t);n.writeUserException(e),this.__endWriteParams(!1)},__warning:function(e){n.assert(null!==this._instance);var t=[];if(t.push("dispatch exception:"),t.push("\nidentity: "+this._instance.identityToString(this._current.id)),t.push("\nfacet: "+c.escapeString(this._current.facet,"")),t.push("\noperation: "+this._current.operation),null!==this._connection){var i=this._connection.getInfo();if(i instanceof Ice.IPConnectionInfo){var r=i;t.push("\nremote host: "+r.remoteAddress+" remote port: "+r.remotePort)}}e.stack&&(t.push("\n"),t.push(e.stack)),this._instance.initializationData().logger.warning(t.join(""))},__servantLocatorFinished:function(){n.assert(null!==this._locator&&null!==this._servant);try{return this._locator.finished(this._current,this._servant,this._cookie.value),!0}catch(e){return e instanceof Ice.UserException?(n.assert(null!==this._connection),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUserException),this._os.startWriteEncaps(),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),this._connection=null):this.__handleException(e),!1}},__handleException:function(e){n.assert(null!==this._connection);var t,i=this._instance.initializationData().properties;e instanceof Ice.RequestFailedException?(null===e.id&&(e.id=this._current.id),null===e.facet&&(e.facet=this._current.facet),(null===e.operation||0===e.operation.length)&&(e.operation=this._current.operation),i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),e instanceof Ice.ObjectNotExistException?this._os.writeByte(s.replyObjectNotExist):e instanceof Ice.FacetNotExistException?this._os.writeByte(s.replyFacetNotExist):e instanceof Ice.OperationNotExistException?this._os.writeByte(s.replyOperationNotExist):n.assert(!1),e.id.__write(this._os),null===e.facet||0===e.facet.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[e.facet]),this._os.writeString(e.operation),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownLocalException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownLocalException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownUserException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownUserException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.LocalException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownLocalException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UserException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownUserException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownException),this._os.writeString(e.stack?e.stack:""),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()),this._connection=null
},invoke:function(e,t){this._is=t;this._is.pos;this._current.id.__read(this._is);var o=Ice.StringSeqHelper.read(this._is);if(o.length>0){if(o.length>1)throw new Ice.MarshalException;this._current.facet=o[0]}else this._current.facet="";this._current.operation=this._is.readString(),this._current.mode=Ice.OperationMode.valueOf(this._is.readByte()),this._current.ctx=new r;for(var c=this._is.readSize();c-->0;){var a=this._is.readString(),h=this._is.readString();this._current.ctx.set(a,h)}if(null!==e&&(this._servant=e.findServant(this._current.id,this._current.facet),null===this._servant&&(this._locator=e.findServantLocator(this._current.id.category),null===this._locator&&this._current.id.category.length>0&&(this._locator=e.findServantLocator("")),null!==this._locator)))try{this._servant=this._locator.locate(this._current,this._cookie)}catch(u){if(u instanceof Ice.UserException){var l=this._is.skipEncaps();return this._response?(this._os.writeByte(s.replyUserException),this._os.startWriteEncaps(l,i.DefaultFormat),this._os.writeUserException(u),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),void(this._connection=null)}return this._is.skipEncaps(),void this.__handleException(u)}try{if(null===this._servant)throw this._is.skipEncaps(),null!==e&&e.hasServant(this._current.id)?new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation):new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation);if(this._servant.__dispatch(this,this._current)===Ice.DispatchStatus.DispatchAsync)return;if(null!==this._locator&&!this.__servantLocatorFinished())return}catch(u){if(null!==this._servant&&null!==this._locator&&!this.__servantLocatorFinished())return;return void this.__handleException(u)}n.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null},startReadParams:function(){return this._current.encoding=this._is.startReadEncaps(),this._is},endReadParams:function(){this._is.endReadEncaps()},readEmptyParams:function(){this._current.encoding=new Ice.EncodingVersion,this._is.skipEmptyEncaps(this._current.encoding)},readParamEncaps:function(){return this._current.encoding=new Ice.EncodingVersion,this._is.readEncaps(this._current.encoding)},__response:function(){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;n.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null}catch(e){this._connection.invokeException(e,1)}},__exception:function(e){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;this.__handleException(e)}catch(t){this._connection.invokeException(t,1)}},__validateResponse:function(){return this._active?(this._active=!1,!0):!1},ice_exception:function(e){this._active&&(this._active=!1,null!==this._connection?this.__exception(e):this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e))}});Ice.IncomingAsync=a}(),function(){Object.defineProperty(IceSSL,"EndpointType",{value:2}),IceSSL.EndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)},Ice.IPEndpointInfo)}(),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,n=Ice.Identity,i=(Ice.Promise,Ice.PropertyNames),r=Ice.ServantManager,o=(Ice.StringUtil,["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","RegisterProcess","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"]),s=0,c=5,a=6,h=Ice.Class({__init__:function(e,n,i,o,c,a,h){if(this._instance=e,this._communicator=n,this._objectAdapterFactory=i,this._servantManager=new r(e,o),this._name=o,this._routerEndpoints=[],this._routerInfo=null,this._state=s,this._noConfig=a,this._noConfig)return this._reference=this._instance.referenceFactory().createFromString("dummy -t",""),this._messageSizeMax=this._instance.messageSizeMax(),void h.succeed(this,h);var u=this._instance.initializationData().properties,l=[],d=this.filterProperties(l);if(0!==l.length&&u.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){for(var p=["found unknown properties for object adapter `"+o+"':"],_=0;_<l.length;++_)p.push("\n    "+l[_]);this._instance.initializationData().logger.warning(p.join(""))}if(null===c&&d){var f=new Ice.InitializationException;throw f.reason="object adapter `"+this._name+"' requires configuration",f}var I=u.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+I,"")}catch(g){if(g instanceof Ice.ProxyParseException){var f=new Ice.InitializationException;throw f.reason="invalid proxy options `"+I+"' for object adapter `"+o+"'",f}throw g}var m=this._instance.messageSizeMax()/1024,v=u.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",m);this._messageSizeMax=1>v||v>2147483647/1024?2147483647:1024*v;try{if(null===c&&(c=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))),null!==c){if(this._routerInfo=this._instance.routerManager().find(c),t.assert(null!==this._routerInfo),null!==this._routerInfo.getAdapter())throw new Ice.AlreadyRegisteredException("object adapter with router",this._instance.identityToString(c.ice_getIdentity()));var y=this;this._routerInfo.getServerEndpoints().then(function(e){var t;for(t=0;t<e.length;++t)y._routerEndpoints.push(e[t]);for(y._routerEndpoints.sort(function(e,t){return e.compareTo(t)}),t=0;t<y._routerEndpoints.length-1;){var n=y._routerEndpoints[t],i=y._routerEndpoints[t+1];n.equals(i)?y._routerEndpoints.splice(t,1):++t}return y._routerInfo.setAdapter(y),y._instance.outgoingConnectionFactory().setRouterInfo(y._routerInfo)}).then(function(){h.succeed(y,h)},function(e){h.fail(e,h)})}else{var w=u.getProperty(this._name+".Endpoints");if(w.length>0)throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported");h.succeed(this,h)}}catch(f){throw this.destroy(),f}},getName:function(){return this._noConfig?"":this._name},getCommunicator:function(){return this._communicator},activate:function(){},hold:function(){this.checkForDeactivation()},waitForHold:function(){var t=new e(this._communicator,"waitForHold",null,null,this);return this.checkForDeactivation(t)?t:t.succeed(t)},deactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return this._state<c&&(this._state=c,this._instance.outgoingConnectionFactory().removeAdapter(this)),t.succeed(t)},waitForDeactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return t.succeed(t)},isDeactivated:function(){return this._state>=c},destroy:function(){var t=new e(this._communicator,"destroy",null,null,this),n=this,i=function(){return n._state<a&&(n._state=a,n._servantManager.destroy(),n._objectAdapterFactory.removeObjectAdapter(n)),t.succeed(t)};return this._state<c?this.deactivate().then(i):i()},add:function(e,t){return this.addFacet(e,t,"")},addFacet:function(e,t,n){this.checkForDeactivation(),this.checkIdentity(t),this.checkServant(e);var i=t.clone();return this._servantManager.addServant(e,i,n),this.newProxy(i,n)},addWithUUID:function(e){return this.addFacetWithUUID(e,"")},addFacetWithUUID:function(e,t){return this.addFacet(e,new n(Ice.generateUUID(),""),t)},addDefaultServant:function(e,t){this.checkServant(e),this.checkForDeactivation(),this._servantManager.addDefaultServant(e,t)},remove:function(e){return this.removeFacet(e,"")},removeFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeServant(e,t)},removeAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeAllFacets(e)},removeDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.removeDefaultServant(e)},find:function(e){return this.findFacet(e,"")},findFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findServant(e,t)},findAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findAllFacets(e)},findByProxy:function(e){this.checkForDeactivation();var t=e.__reference();return this.findFacet(t.getIdentity(),t.getFacet())},findDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.findDefaultServant(e)},addServantLocator:function(e,t){this.checkForDeactivation(),this._servantManager.addServantLocator(e,t)},removeServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.removeServantLocator(e)},findServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.findServantLocator(e)},createProxy:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this.newProxy(e,"")},createDirectProxy:function(e){return this.createProxy(e)},createIndirectProxy:function(){throw new Ice.FeatureNotSupportedException("setLocator not supported")},setLocator:function(){throw new Ice.FeatureNotSupportedException("setLocator not supported")},refreshPublishedEndpoints:function(){throw new Ice.FeatureNotSupportedException("refreshPublishedEndpoints not supported")},getEndpoints:function(){return[]},getPublishedEndpoints:function(){return[]},getServantManager:function(){return this._servantManager},messageSizeMax:function(){return this._messageSizeMax},newProxy:function(e,t){for(var n=[],i=0;i<this._routerEndpoints.length;++i)n.push(this._routerEndpoints[i]);var r=this._instance.referenceFactory().create(e,t,this._reference,n);return this._instance.proxyFactory().referenceToProxy(r)},checkForDeactivation:function(e){if(this._state>=c){var t=new Ice.ObjectAdapterDeactivatedException;if(t.name=this.getName(),void 0!==e)return e.fail(t,e),!0;throw t}return!1},checkIdentity:function(e){if(void 0===e.name||null===e.name||0===e.name.length)throw new Ice.IllegalIdentityException(e);(void 0===e.category||null===e.category)&&(e.category="")},checkServant:function(e){if(void 0===e||null===e)throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")},filterProperties:function(e){var t,n=!0,r=this._name+".";for(t=0;t<i.clPropNames.length;++t)if(0===r.indexOf(i.clPropNames[t]+".")){n=!1;break}for(var s=!0,c=this._instance.initializationData().properties.getPropertiesForPrefix(r),a=c.entries;null!==a;a=a.next){var h=!1;for(t=0;t<o.length;++t)if(a.key===r+o[t]){s=!1,h=!0;break}!h&&n&&e.push(a.key)}return s}});Ice.ObjectAdapterI=h}(),function(){function e(e){return"local address = <not available>\nremote address = "+e.host+":"+e.port}function t(e,t){return s>e?new Ice.ConnectFailedException(t.code,t):1e3===t.code||1006===t.code?new Ice.ConnectionLostException:new Ice.SocketException(t.code,t)}var n=Ice.Debug,i=(Ice.ExUtil,Ice.Network,Ice.SocketOperation),r=(Ice.Connection,Ice.LocalException,Ice.SocketException,0),o=1,s=2,c=3,a=4,h=-1!==navigator.userAgent.indexOf("Firefox"),u=Ice.Class({__init__:function(e){this._logger=e.logger(),this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288)},setCallbacks:function(e,t,n){this._connectedCallback=e,this._bytesAvailableCallback=t;var i=this;this._bytesWrittenCallback=function(e,t){i._fd&&(i._fd.bufferedAmount<1024||this._exception?n(e,t):setTimeout(function(){i._bytesWrittenCallback(e,t)},50))}},initialize:function(){try{if(this._exception)throw this._exception;if(this._state===r){this._state=o,this._fd=new WebSocket(this._url,"ice.zeroc.com"),this._fd.binaryType="arraybuffer";var c=this;return this._fd.onopen=function(e){c.socketConnected(e)},this._fd.onmessage=function(e){c.socketBytesAvailable(e.data)},this._fd.onclose=function(e){c.socketClosed(e)},i.Connect}this._state===o&&(this._desc=e(this._addr),this._state=s)}catch(a){throw this._exception||(this._exception=t(this._state,a)),this._exception}return n.assert(this._state===s),i.None},register:function(){this._registered=!0,(this._hasBytesAvailable||this._exception)&&(this._bytesAvailableCallback(),this._hasBytesAvailable=!1)},unregister:function(){this._registered=!1},close:function(){if(null===this._fd)return void n.assert(this._exception);if(this._fd.readyState===WebSocket.CONNECTING&&h)return void(this._state=c);n.assert(null!==this._fd);try{this._state=a,this._fd.close()}catch(e){throw t(this._state,e)}finally{this._fd=null}},write:function(e){function t(e){e._bytesWrittenCallback(0,0)}if(this._exception)throw this._exception;if(0===e.remaining)return!0;var i=this;if(this._fd.bufferedAmount>1024)return setTimeout(function(){i._bytesWrittenCallback(0,0)},50),!1;var r=e.remaining;for(n.assert(r>0),n.assert(this._fd),this._maxSendPacketSize>0&&r>this._maxSendPacketSize&&(r=this._maxSendPacketSize);r>0;){var o=e.b.slice(e.position,e.position+r);if(this._fd.send(o),e.position=e.position+r,r=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining,this._fd.bufferedAmount>0&&r>0)return setTimeout(t(i),50),!1}return!0},read:function(e,t){if(this._exception)throw this._exception;if(t.value=!1,0===this._readBuffers.length)return!1;var i=this._readBuffers[0].byteLength-this._readPosition;n.assert(i>0);for(e.remaining;e.remaining>0;)if(i>e.remaining&&(i=e.remaining),new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,i),e.position),e.position+=i,this._readPosition+=i,this._readPosition===this._readBuffers[0].byteLength){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;i=this._readBuffers[0].byteLength}return t.value=this._readBuffers.byteLength>0,0===e.remaining},type:function(){return this._secure?"wss":"ws"},getInfo:function(){n.assert(null!==this._fd);var e=this.createInfo();return e.localAddress="",e.localPort=-1,e.remoteAddress=this._addr.host,e.remotePort=this._addr.port,e},createInfo:function(){return new Ice.WSConnectionInfo},checkSendSize:function(){},toString:function(){return this._desc},socketConnected:function(){return this._state==c?void this.close():(n.assert(null!==this._connectedCallback),void this._connectedCallback())},socketBytesAvailable:function(e){n.assert(null!==this._bytesAvailableCallback),e.byteLength>0&&(this._readBuffers.push(e),this._registered?this._bytesAvailableCallback():this._hasBytesAvailable||(this._hasBytesAvailable=!0))},socketClosed:function(e){return this._state==c?void this.close():(this._exception=t(this._state,e),void(this._state<s?this._connectedCallback():this._registered&&this._bytesAvailableCallback()))}});u.createOutgoing=function(e,t,n,i){var o=new u(e),s=t?"wss":"ws";return s+="://"+n.host,80!==n.port&&(s+=":"+n.port),s+=i?i:"/",o._url=s,o._fd=null,o._addr=n,o._desc="local address = <not available>\nremote address = "+n.host+":"+n.port,o._state=r,o._secure=t,o._exception=null,o},Ice.WSTransceiver=u}(),function(){var e=Ice.HashUtil,t=(Ice.StringUtil,Ice.EndpointI),n=Ice.Class,i=n(t,{__init__:function(e,t,n){this._instance=e,this._delegate=t,this._resource=void 0===n?"":n},getInfo:function(){var e=new Ice.WSEndpointInfo;return e.resource=this._resource,this._delegate.fillEndpointInfo(e),e},type:function(){return this._delegate.type()},protocol:function(){return this._delegate.protocol()},streamWrite:function(e){e.startWriteEncaps(),this._delegate.streamWriteImpl(e),e.writeString(this._resource),e.endWriteEncaps()},timeout:function(){return this._delegate.timeout()},changeTimeout:function(e){return e===this._delegate.timeout()?this:new i(this._instance,this._delegate.changeTimeout(e),this._resource)},changeConnectionId:function(e){return e===this._delegate.connectionId()?this:new i(this._instance,this._delegate.changeConnectionId(e),this._resource)},compress:function(){return this._delegate.compress()},changeCompress:function(e){return e===this._delegate.compress()?this:new i(this._instance,this._delegate.changeCompress(e),this._resource)},datagram:function(){return this._delegate.datagram()},secure:function(){return this._delegate.secure()},connect:function(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this._delegate.hashCode(),this._hashCode=e.addString(this._hashCode,this._resource)),this._hashCode},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof i))return this.type()<e.type()?-1:1;var t=this._delegate.compareTo(e._delegate);return 0!==t?t:this._resource!==e._resource?this._resource<e._resource?-1:1:0},options:function(){var e=this._delegate.options();return null!==this._resource&&this._resource.length>0&&(e+=" -r ",e+=-1!==this._resource.indexOf(":")?'"'+this._resource+'"':this._resource),e},toConnectorString:function(){return this._delegate.toConnectorString()},initWithStream:function(e){this._resource=e.readString()},checkOption:function(e,t,n){if("-r"!==e)return!1;if(null===t)throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+n);return this._resource=t,!0}});i.prototype.connectable="undefined"!=typeof Ice.WSTransceiver?function(){return!0}:function(){return!1},Ice.WSEndpoint=i}(),function(){var e=Ice.Base64,t=Ice.Debug,n=Ice.HashUtil,i=(Ice.Protocol,Ice.StringUtil),r=Ice.EndpointParseException,o=Ice.Class,s=o(Ice.EndpointI,{__init__:function(e){this._rawEncoding=Ice.Encoding_1_0,this._type=void 0===e?-1:e,this._rawBytes=null},streamWrite:function(e){e.startWriteEncaps(this._rawEncoding,Ice.FormatType.DefaultFormat),e.writeBlob(this._rawBytes),e.endWriteEncaps()},getInfo:function(){return new c(-1,!1,this._rawEncoding,this._rawBytes,this._type)},type:function(){return this._type},protocol:function(){return"opaque"},timeout:function(){return-1},changeTimeout:function(){return this},changeConnectionId:function(){return this},compress:function(){return!1},changeCompress:function(){return this},datagram:function(){return!1},secure:function(){return!1},rawBytes:function(){return this._rawBytes},transceiver:function(e){return e.value=null,null},acceptor:function(e){return e.value=this,null},connect:function(){return null},hashCode:function(){if(void 0===this._hashCode){var e=5381;e=n.addNumber(e,this._type),e=n.addHashable(e,this._rawEncoding),e=n.addArray(e,this._rawBytes,n.addNumber),this._hashCode=e}return this._hashCode},options:function(){var t="";return t+=" -t "+this._type,t+=" -e "+Ice.encodingVersionToString(this._rawEncoding),t+=" -v "+e.encode(this._rawBytes)},equals:function(e){if(!(e instanceof s))return!1;if(this===e)return!0;if(this._type!==e._type)return!1;if(!this._rawEncoding.equals(e._rawEncoding))return!1;if(this._rawBytes.length!==e._rawBytes.length)return!1;for(var t=0;t<this._rawBytes.length;t++)if(this._rawBytes[t]!==e._rawBytes[t])return!1;return!0},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof s))return this.type()<e.type()?-1:1;if(this._type<e._type)return-1;if(e._type<this._type)return 1;if(this._rawEncoding.major<e._rawEncoding.major)return-1;if(e._rawEncoding.major<this._rawEncoding.major)return 1;if(this._rawEncoding.minor<e._rawEncoding.minor)return-1;if(e._rawEncoding.minor<this._rawEncoding.minor)return 1;if(this._rawBytes.length<e._rawBytes.length)return-1;if(e._rawBytes.length<this._rawBytes.length)return 1;for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t])return-1;if(e._rawBytes[t]<this._rawBytes[t])return 1}return 0},checkOption:function(t,n,o){switch(t.charAt(1)){case"t":if(this._type>-1)throw new r("multiple -t options in endpoint "+o);if(null===n)throw new r("no argument provided for -t option in endpoint "+o);var s;try{s=i.toInt(n)}catch(c){throw new r("invalid type value `"+n+"' in endpoint "+o)}if(0>s||s>65535)throw new r("type value `"+n+"' out of range in endpoint "+o);return this._type=s,!0;case"v":if(this._rawBytes)throw new r("multiple -v options in endpoint "+o);if(null===n||0===n.length)throw new r("no argument provided for -v option in endpoint "+o);for(var a=0;a<n.length;++a)if(!e.isBase64(n.charAt(a)))throw new r("invalid base64 character `"+n.charAt(a)+"' (ordinal "+n.charCodeAt(a)+") in endpoint "+o);return this._rawBytes=e.decode(n),!0;case"e":if(null===n)throw new r("no argument provided for -e option in endpoint "+o);try{this._rawEncoding=Ice.stringToEncodingVersion(n)}catch(h){throw new r("invalid encoding version `"+n+"' in endpoint "+o+":\n"+h.str)}return!0;default:return!1}},initWithOptions:function(e){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),t.assert(this._rawEncoding),this._type<0)throw new r("no -t option in endpoint `"+this+"'");if(null===this._rawBytes||0===this._rawBytes.length)throw new r("no -v option in endpoint `"+this+"'")},initWithStream:function(e){this._rawEncoding=e.getReadEncoding();var t=e.getReadEncapsSize();this._rawBytes=e.readBlob(t)}}),c=o(Ice.OpaqueEndpointInfo,{__init__:function(e,t,n,i,r){Ice.OpaqueEndpointInfo.call(this,-1,!1,n,i),this._type=r},type:function(){return this._type},datagram:function(){return!1},secure:function(){return!1}});Ice.OpaqueEndpointI=s}(),function(){var e=Ice.ArrayUtil,t=Ice.Debug,n=Ice.HashMap,i=Ice.HashUtil,r=Ice.OpaqueEndpointI,o=Ice.Promise,s=(Ice.Protocol,Ice.ReferenceMode),c=Ice.StringUtil,a=Ice.StringSeqHelper,h=Ice.EndpointSelectionType,u=Ice.Identity,l=Ice.RouterPrx,d=Ice.LocatorPrx,p=Ice.PropertyNames,_=Ice.Class,f=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"],I=_({__init__:function(e,t){this._instance=e,this._communicator=t,this._defaultRouter=null,this._defaultLocator=null},create:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),i,null,null)},createWithAdapterId:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),null,i,null)},createFixed:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var n=new m(this._instance,this._communicator,e,"",t.endpoint().datagram()?s.ModeDatagram:s.ModeTwoway,t.endpoint().secure(),this._instance.defaultsAndOverrides().defaultEncoding,t);return n},copy:function(e){var t=e.getIdentity();return 0===t.name.length&&0===t.category.length?null:e.clone()},createFromString:function(e,n){if(void 0===e||null===e||0===e.length)return null;var i,r=" 	\n\r",o=0;if(i=c.findFirstNotOf(e,r,o),-1==i)throw new Ice.ProxyParseException("no non-whitespace characters found in `"+e+"'");var a=null;if(o=c.checkQuote(e,i),-1===o)throw new Ice.ProxyParseException("mismatched quotes around identity in `"+e+"'");if(0===o?(o=c.findFirstOf(e,r+":@",i),-1===o&&(o=e.length),a=e.substring(i,o)):(i++,a=e.substring(i,o),o++),i===o)throw new Ice.ProxyParseException("no identity in `"+e+"'");var h=this._instance.stringToIdentity(a);if(0===h.name.length){if(h.category.length>0)throw new Ice.IllegalIdentityException(h);if(-1!=c.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid characters after identity in `"+e+"'");return null}for(var u="",l=s.ModeTwoway,d=!1,p=this._instance.defaultsAndOverrides().defaultEncoding,_=Ice.Protocol_1_0,f="";;){if(i=c.findFirstNotOf(e,r,o),-1===i)break;if(":"==e.charAt(i)||"@"==e.charAt(i))break;if(o=c.findFirstOf(e,r+":@",i),-1==o&&(o=e.length),i==o)break;var I=e.substring(i,o);if(2!=I.length||"-"!=I.charAt(0))throw new Ice.ProxyParseException("expected a proxy option but found `"+I+"' in `"+e+"'");var g=null,m=c.findFirstNotOf(e,r,o);if(-1!=m){var v=e.charAt(m);if("@"!=v&&":"!=v&&"-"!=v){if(i=m,o=c.checkQuote(e,i),-1==o)throw new Ice.ProxyParseException("mismatched quotes around value for "+I+" option in `"+e+"'");0===o?(o=c.findFirstOf(e,r+":@",i),-1===o&&(o=e.length),g=e.substring(i,o)):(i++,g=e.substring(i,o),o++)}}switch(I.charAt(1)){case"f":if(null===g)throw new Ice.ProxyParseException("no argument provided for -f option in `"+e+"'");try{u=c.unescapeString(g,0,g.length)}catch(y){throw new Ice.ProxyParseException("invalid facet in `"+e+"': "+y.message)}break;case"t":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -t option in `"+e+"'");l=s.ModeTwoway;break;case"o":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -o option in `"+e+"'");l=s.ModeOneway;break;case"O":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -O option in `"+e+"'");l=s.ModeBatchOneway;break;case"d":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -d option in `"+e+"'");l=s.ModeDatagram;break;case"D":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -D option in `"+e+"'");l=s.ModeBatchDatagram;break;case"s":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -s option in `"+e+"'");d=!0;break;case"e":if(null===g)throw new Ice.ProxyParseException("no argument provided for -e option in `"+e+"'");try{p=Ice.stringToEncodingVersion(g)}catch(w){throw new Ice.ProxyParseException("invalid encoding version `"+g+"' in `"+e+"':\n"+w.str)}break;case"p":if(null===g)throw new Ice.ProxyParseException("no argument provided for -p option in `"+e+"'");try{_=Ice.stringToProtocolVersion(g)}catch(w){throw new Ice.ProxyParseException("invalid protocol version `"+g+"' in `"+e+"':\n"+w.str)}break;default:throw new Ice.ProxyParseException("unknown option `"+I+"' in `"+e+"'")}}if(-1===i)return this.createImpl(h,u,l,d,_,p,null,null,n);var E=[];if(":"==e.charAt(i)){var S=[];for(o=i;o<e.length&&":"==e.charAt(o);){for(i=o+1,o=i;;){if(o=e.indexOf(":",o),-1==o){o=e.length;break}for(var x=!1,b=i;;){if(b=e.indexOf('"',b),-1==b||b>o)break;if(b=e.indexOf('"',++b),-1==b)break;if(b>o){x=!0;break}++b}if(!x)break;++o}var C=e.substring(i,o),P=this._instance.endpointFactoryManager().create(C,!1);null!==P?E.push(P):S.push(C)}if(0===E.length)throw t.assert(S.length>0),new Ice.EndpointParseException("invalid endpoint `"+S[0]+"' in `"+e+"'");if(0!==S.length&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){var O=[];O.push("Proxy contains unknown endpoints:");for(var M=0;M<S.length;++M)O.push(" `"),O.push(S[M]),O.push("'");this._instance.initializationData().logger.warning(O.join(""))}return this.createImpl(h,u,l,d,_,p,E,null,n)}if("@"==e.charAt(i)){if(i=c.findFirstNotOf(e,r,i+1),-1==i)throw new Ice.ProxyParseException("missing adapter id in `"+e+"'");var k=null;if(o=c.checkQuote(e,i),-1===o)throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+e+"'");if(0===o?(o=c.findFirstOf(e,r,i),-1===o&&(o=e.length),k=e.substring(i,o)):(i++,k=e.substring(i,o),o++),o!==e.length&&-1!==c.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid trailing characters after `"+e.substring(0,o+1)+"' in `"+e+"'");try{f=c.unescapeString(k,0,k.length)}catch(y){throw new Ice.ProxyParseException("invalid adapter id in `"+e+"': "+y.message)}if(0===f.length)throw new Ice.ProxyParseException("empty adapter id in `"+e+"'");return this.createImpl(h,u,l,d,_,p,null,f,n)}throw new Ice.ProxyParseException("malformed proxy `"+e+"'")},createFromStream:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var n,i=a.read(t);if(i.length>0){if(i.length>1)throw new Ice.ProxyUnmarshalException;n=i[0]}else n="";var r=t.readByte();if(0>r||r>s.ModeLast)throw new Ice.ProxyUnmarshalException;var o=t.readBool(),c=null,h=null;t.getReadEncoding().equals(Ice.Encoding_1_0)?(c=Ice.Protocol_1_0,h=Ice.Encoding_1_0):(c=new Ice.ProtocolVersion,c.__read(t),h=new Ice.EncodingVersion,h.__read(t));var u=null,l=null,d=t.readSize();if(d>0){u=[];for(var p=0;d>p;p++)u[p]=this._instance.endpointFactoryManager().read(t)}else l=t.readString();return this.createImpl(e,n,r,o,c,h,u,l,null)},setDefaultRouter:function(e){if(null===this._defaultRouter?null===e:this._defaultRouter.equals(e))return this;var t=new I(this._instance,this._communicator);return t._defaultLocator=this._defaultLocator,t._defaultRouter=e,t},getDefaultRouter:function(){return this._defaultRouter},setDefaultLocator:function(e){if(null===this._defaultLocator?null===e:this._defaultLocator.equals(e))return this;var t=new I(this._instance,this._communicator);return t._defaultRouter=this._defaultRouter,t._defaultLocator=e,t},getDefaultLocator:function(){return this._defaultLocator},checkForUnknownProperties:function(e){var t,n,i=[];for(t=0;t<p.clPropNames.length;++t)if(0===e.indexOf(p.clPropNames[t]+"."))return;for(var r=this._instance.initializationData().properties.getPropertiesForPrefix(e+"."),o=r.entries;null!==o;o=o.next){var s=!1;for(t=0,n=f.length;n>t;++t)if(o.key===e+"."+f[t]){s=!0;break}s||i.push(o.key)}if(i.length>0){var c=[];for(c.push("found unknown properties for proxy '"),c.push(e),c.push("':"),t=0,n=i.length;n>t;++t)c.push("\n    "),c.push(i[t]);this._instance.initializationData().logger.warning(c.join(""))}},createImpl:function(e,t,n,i,r,o,s,c,a){var u=this._instance.defaultsAndOverrides(),p=null;null!==this._defaultLocator&&(p=this._instance.locatorManager().find(this._defaultLocator.__reference().getEncoding().equals(o)?this._defaultLocator:this._defaultLocator.ice_encodingVersion(o)));var _=this._instance.routerManager().find(this._defaultRouter),f=!0,I=u.defaultPreferSecure,g=u.defaultEndpointSelection,m=u.defaultLocatorCacheTimeout,y=u.defaultInvocationTimeout;if(null!==a&&a.length>0){var w=this._instance.initializationData().properties;w.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0&&this.checkForUnknownProperties(a);var E;E=a+".Locator";var S=d.uncheckedCast(this._communicator.propertyToProxy(E));null!==S&&(p=this._instance.locatorManager().find(S.__reference().getEncoding().equals(o)?S:S.ice_encodingVersion(o))),E=a+".Router";var x=l.uncheckedCast(this._communicator.propertyToProxy(E));if(null!==x){var b=".Router";if(a.lastIndexOf(b)==a.length-b.length){var C="`"+E+"="+w.getProperty(E)+"': cannot set a router on a router; setting ignored";this._instance.initializationData().logger.warning(C)}else _=this._instance.routerManager().find(x)}if(E=a+".ConnectionCached",f=w.getPropertyAsIntWithDefault(E,f?1:0)>0,E=a+".PreferSecure",I=w.getPropertyAsIntWithDefault(E,I?1:0)>0,E=a+".EndpointSelection",w.getProperty(E).length>0){var P=w.getProperty(E);if("Random"==P)g=h.Random;else{if("Ordered"!=P)throw new Ice.EndpointSelectionTypeParseException("illegal value `"+P+"'; expected `Random' or `Ordered'");g=h.Ordered}}E=a+".LocatorCacheTimeout";var O=w.getProperty(E);0!==O.length&&(m=w.getPropertyAsIntWithDefault(E,m),-1>m&&(m=-1,this._instance.initializationData().logger.warning("invalid value for"+E+"`"+w.getProperty(E)+"': defaulting to -1"))),E=a+".InvocationTimeout",O=w.getProperty(E),0!==O.length&&(y=w.getPropertyAsIntWithDefault(E,y),1>y&&-1!==y&&(y=-1,this._instance.initializationData().logger.warning("invalid value for"+E+"`"+w.getProperty(E)+"': defaulting to -1")))}return new v(this._instance,this._communicator,e,t,n,i,r,o,s,c,p,_,f,I,g,m,y)}});Ice.ReferenceFactory=I;var g=_({__init__:function(e,n,i,r,o,s,c,a,h){t.assert(void 0===i||null!==i.name),t.assert(void 0===i||null!==i.category),t.assert(void 0===r||null!==r),this._instance=e,this._communicator=n,this._mode=o,this._secure=s,this._identity=i,this._context=g._emptyContext,this._facet=r,this._protocol=c,this._encoding=a,this._invocationTimeout=h,this._hashInitialized=!1,this._overrideCompress=!1,this._compress=!1
},getMode:function(){return this._mode},getSecure:function(){return this._secure},getProtocol:function(){return this._protocol},getEncoding:function(){return this._encoding},getIdentity:function(){return this._identity},getFacet:function(){return this._facet},getInstance:function(){return this._instance},getContext:function(){return this._context},getInvocationTimeout:function(){return this._invocationTimeout},getCommunicator:function(){return this._communicator},getEndpoints:function(){return t.assert(!1),null},getAdapterId:function(){return t.assert(!1),""},getRouterInfo:function(){return t.assert(!1),null},getLocatorInfo:function(){return t.assert(!1),null},getCacheConnection:function(){return t.assert(!1),!1},getPreferSecure:function(){return t.assert(!1),!1},getEndpointSelection:function(){return t.assert(!1),null},getLocatorCacheTimeout:function(){return t.assert(!1),0},getConnectionId:function(){return t.assert(!1),""},changeContext:function(e){(void 0===e||null===e)&&(e=g._emptyContext);var t=this._instance.referenceFactory().copy(this);return t._context=0===e.size?g._emptyContext:new n(e),t},changeMode:function(e){if(e===this._mode)return this;var t=this._instance.referenceFactory().copy(this);return t._mode=e,t},changeSecure:function(e){if(e===this._secure)return this;var t=this._instance.referenceFactory().copy(this);return t._secure=e,t},changeIdentity:function(e){if(e.equals(this._identity))return this;var t=this._instance.referenceFactory().copy(this);return t._identity=new u(e.name,e.category),t},changeFacet:function(e){if(e===this._facet)return this;var t=this._instance.referenceFactory().copy(this);return t._facet=e,t},changeInvocationTimeout:function(e){if(e===this._invocationTimeout)return this;var t=this._instance.referenceFactory().copy(this);return t._invocationTimeout=e,t},changeEncoding:function(e){if(e.equals(this._encoding))return this;var t=this._instance.referenceFactory().copy(this);return t._encoding=e,t},changeCompress:function(e){if(this._overrideCompress&&this._compress===e)return this;var t=this._instance.referenceFactory().copy(this);return t._compress=e,t._overrideCompress=!0,t},changeAdapterId:function(){return t.assert(!1),null},changeEndpoints:function(){return t.assert(!1),null},changeLocator:function(){return t.assert(!1),null},changeRouter:function(){return t.assert(!1),null},changeCacheConnection:function(){return t.assert(!1),null},changePreferSecure:function(){return t.assert(!1),null},changeEndpointSelection:function(){return t.assert(!1),null},changeLocatorCacheTimeout:function(){return t.assert(!1),null},changeTimeout:function(){return t.assert(!1),null},changeConnectionId:function(){return t.assert(!1),null},hashCode:function(){if(this._hashInitialized)return this._hashValue;var e=5381;if(e=i.addNumber(e,this._mode),e=i.addBoolean(e,this._secure),e=i.addHashable(e,this._identity),null!==this._context&&void 0!==this._context)for(var t=this._context.entries;null!==t;t=t.next)e=i.addString(e,t.key),e=i.addString(e,t.value);return e=i.addString(e,this._facet),e=i.addBoolean(e,this._overrideCompress),this._overrideCompress&&(e=i.addBoolean(e,this._compress)),e=i.addHashable(e,this._protocol),e=i.addHashable(e,this._encoding),e=i.addNumber(e,this._invocationTimeout),this._hashValue=e,this._hashInitialized=!0,this._hashValue},isIndirect:function(){return t.assert(!1),!1},isWellKnown:function(){return t.assert(!1),!1},streamWrite:function(e){0===this._facet.length?e.writeSize(0):(e.writeSize(1),e.writeString(this._facet)),e.writeByte(this._mode),e.writeBool(this._secure),e.getWriteEncoding().equals(Ice.Encoding_1_0)||(this._protocol.__write(e),this._encoding.__write(e))},toString:function(){var e=[],t=this._instance.identityToString(this._identity);if(-1!=t.search(/[ :@]/)?(e.push('"'),e.push(t),e.push('"')):e.push(t),this._facet.length>0){e.push(" -f ");var n=c.escapeString(this._facet,"");-1!=n.search(/[ :@]/)?(e.push('"'),e.push(n),e.push('"')):e.push(n)}switch(this._mode){case s.ModeTwoway:e.push(" -t");break;case s.ModeOneway:e.push(" -o");break;case s.ModeBatchOneway:e.push(" -O");break;case s.ModeDatagram:e.push(" -d");break;case s.ModeBatchDatagram:e.push(" -D")}return this._secure&&e.push(" -s"),this._protocol.equals(Ice.Protocol_1_0)||(e.push(" -p "),e.push(Ice.protocolVersionToString(this._protocol))),e.push(" -e "),e.push(Ice.encodingVersionToString(this._encoding)),e.join("")},toProperty:function(){return t.assert(!1),null},getConnection:function(){t.assert(!1)},equals:function(e){return this._mode!==e._mode?!1:this._secure!==e._secure?!1:this._identity.equals(e._identity)&&this._context.equals(e._context)?this._facet!==e._facet?!1:this._overrideCompress!==e._overrideCompress?!1:this._overrideCompress&&this._compress!==e._compress?!1:this._protocol.equals(e._protocol)&&this._encoding.equals(e._encoding)?this._invocationTimeout!==e._invocationTimeout?!1:!0:!1:!1},clone:function(){return t.assert(!1),null},copyMembers:function(e){e._context=this._context,e._overrideCompress=this._overrideCompress,e._compress=this._compress}});g._emptyContext=new n,g._emptyEndpoints=[],Ice.Reference=g;var m=_(g,{__init__:function(e,t,n,i,r,o,s,c){g.call(this,e,t,n,i,r,o,Ice.Protocol_1_0,s),this._fixedConnection=c},getEndpoints:function(){return g._emptyEndpoints},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return!1},getPreferSecure:function(){return!1},getEndpointSelection:function(){return h.Random},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeAdapterId:function(){throw new Ice.FixedProxyException},changeEndpoints:function(){throw new Ice.FixedProxyException},changeLocator:function(){throw new Ice.FixedProxyException},changeRouter:function(){throw new Ice.FixedProxyException},changeCacheConnection:function(){throw new Ice.FixedProxyException},changePreferSecure:function(){throw new Ice.FixedProxyException},changeEndpointSelection:function(){throw new Ice.FixedProxyException},changeLocatorCacheTimeout:function(){throw new Ice.FixedProxyException},changeTimeout:function(){throw new Ice.FixedProxyException},changeConnectionId:function(){throw new Ice.FixedProxyException},isIndirect:function(){return!1},isWellKnown:function(){return!1},streamWrite:function(){throw new Ice.FixedProxyException},toString:function(){throw new Ice.FixedProxyException},toProperty:function(){throw new Ice.FixedProxyException},clone:function(){var e=new m(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getEncoding(),this._fixedConnection);return this.copyMembers(e),e},getConnectionInternal:function(e){switch(this.getMode()){case s.ModeTwoway:case s.ModeOneway:case s.ModeBatchOneway:if(this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("");break;case s.ModeDatagram:case s.ModeBatchDatagram:if(!this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("")}var t,n=this.getInstance().defaultsAndOverrides();if(t=n.overrideSecure?n.overrideSecureValue:this.getSecure(),t&&!this._fixedConnection.endpoint().secure())throw new Ice.NoEndpointException("");return this._fixedConnection.throwException(),e.value=n.overrideCompress?n.overrideCompressValue:this._overrideCompress?this._compress:this._fixedConnection.endpoint().compress(),this._fixedConnection},getConnection:function(){var e=new o;try{var t={value:!1},n=this.getConnectionInternal(t);e.succeed(n,t.value)}catch(i){e.fail(i)}return e},equals:function(e){return this===e?!0:e instanceof m&&g.prototype.equals.call(this,e)?this._fixedConnection.equals(e._fixedConnection):!1}});Ice.FixedReference=m;var v=_(g,{__init__:function(e,n,i,r,o,s,c,a,h,u,l,d,p,_,f,I,m){g.call(this,e,n,i,r,o,s,c,a,m),this._endpoints=h,this._adapterId=u,this._locatorInfo=l,this._routerInfo=d,this._cacheConnection=p,this._preferSecure=_,this._endpointSelection=f,this._locatorCacheTimeout=I,this._overrideTimeout=!1,this._timeout=-1,null===this._endpoints&&(this._endpoints=g._emptyEndpoints),null===this._adapterId&&(this._adapterId=""),this._connectionId="",t.assert(0===this._adapterId.length||0===this._endpoints.length)},getEndpoints:function(){return this._endpoints},getAdapterId:function(){return this._adapterId},getRouterInfo:function(){return this._routerInfo},getLocatorInfo:function(){return this._locatorInfo},getCacheConnection:function(){return this._cacheConnection},getPreferSecure:function(){return this._preferSecure},getEndpointSelection:function(){return this._endpointSelection},getLocatorCacheTimeout:function(){return this._locatorCacheTimeout},getConnectionId:function(){return this._connectionId},changeEncoding:function(e){var t=g.prototype.changeEncoding.call(this,e);if(t!==this){var n=t._locatorInfo;null===n||n.getLocator().ice_getEncodingVersion().equals(e)||(t._locatorInfo=this.getInstance().locatorManager().find(n.getLocator().ice_encodingVersion(e)))}return t},changeCompress:function(e){var t=g.prototype.changeCompress.call(this,e);if(t!==this&&this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeCompress(e);t._endpoints=n}return t},changeAdapterId:function(e){if(this._adapterId===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._adapterId=e,t._endpoints=g._emptyEndpoints,t},changeEndpoints:function(t){if(e.equals(t,this._endpoints,function(e,t){return e.equals(t)}))return this;var n=this.getInstance().referenceFactory().copy(this);return n._endpoints=t,n._adapterId="",n.applyOverrides(n._endpoints),n},changeLocator:function(e){var t=this.getInstance().locatorManager().find(e);if(null!==t&&null!==this._locatorInfo&&t.equals(this._locatorInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._locatorInfo=t,n},changeRouter:function(e){var t=this.getInstance().routerManager().find(e);if(null!==t&&null!==this._routerInfo&&t.equals(this._routerInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._routerInfo=t,n},changeCacheConnection:function(e){if(e===this._cacheConnection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._cacheConnection=e,t},changePreferSecure:function(e){if(e===this._preferSecure)return this;var t=this.getInstance().referenceFactory().copy(this);return t._preferSecure=e,t},changeEndpointSelection:function(e){if(e===this._endpointSelection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._endpointSelection=e,t},changeLocatorCacheTimeout:function(e){if(this._locatorCacheTimeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._locatorCacheTimeout=e,t},changeTimeout:function(e){if(this._overrideTimeout&&this._timeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._timeout=e,t._overrideTimeout=!0,this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeTimeout(e);t._endpoints=n}return t},changeConnectionId:function(e){if(this._connectionId===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._connectionId=e,this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeConnectionId(e);t._endpoints=n}return t},isIndirect:function(){return 0===this._endpoints.length},isWellKnown:function(){return 0===this._endpoints.length&&0===this._adapterId.length},streamWrite:function(e){if(g.prototype.streamWrite.call(this,e),e.writeSize(this._endpoints.length),this._endpoints.length>0){t.assert(0===this._adapterId.length);for(var n=0;n<this._endpoints.length;++n)e.writeShort(this._endpoints[n].type()),this._endpoints[n].streamWrite(e)}else e.writeString(this._adapterId)},toString:function(){var e=[];if(e.push(g.prototype.toString.call(this)),this._endpoints.length>0)for(var t=0;t<this._endpoints.length;++t){var n=this._endpoints[t].toString();null!==n&&n.length>0&&(e.push(":"),e.push(n))}else if(this._adapterId.length>0){e.push(" @ ");var i=c.escapeString(this._adapterId,null);-1!=i.search(/[ :@]/)?(e.push('"'),e.push(i),e.push('"')):e.push(i)}return e.join("")},toProperty:function(e){var t,i=new n;if(i.set(e,this.toString()),i.set(e+".CollocationOptimized","0"),i.set(e+".ConnectionCached",this._cacheConnection?"1":"0"),i.set(e+".PreferSecure",this._preferSecure?"1":"0"),i.set(e+".EndpointSelection",this._endpointSelection===h.Random?"Random":"Ordered"),i.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout),i.set(e+".InvocationTimeout",""+this.getInvocationTimeout()),null!==this._routerInfo){var r=this._routerInfo.getRouter(),o=r.__reference().toProperty(e+".Router");for(t=o.entries;null!==t;t=t.next)i.set(t.key,t.value)}if(null!==this._locatorInfo){var s=this._locatorInfo.getLocator(),c=s.__reference().toProperty(e+".Locator");for(t=c.entries;null!==t;t=t.next)i.set(t.key,t.value)}return i},hashCode:function(){return this._hashInitialized||(g.prototype.hashCode.call(this),this._hashValue=i.addString(this._hashValue,this._adapterId)),this._hashValue},equals:function(t){return this===t?!0:t instanceof v&&g.prototype.equals.call(this,t)&&(null===this._locatorInfo?null===t._locatorInfo:this._locatorInfo.equals(t._locatorInfo))&&(null===this._routerInfo?null===t._routerInfo:this._routerInfo.equals(t._routerInfo))?this._cacheConnection!==t._cacheConnection?!1:this._preferSecure!==t._preferSecure?!1:this._endpointSelection!==t._endpointSelection?!1:this._locatorCacheTimeout!==t._locatorCacheTimeout?!1:this._connectionId!==t._connectionId?!1:this._overrideTimeout!==t._overrideTimeout?!1:this._overrideTimeout&&this._timeout!==t._timeout?!1:e.equals(this._endpoints,t._endpoints,function(e,t){return e.equals(t)})?this._adapterId!==t._adapterId?!1:!0:!1:!1},getConnection:function(){var e=new o;if(null!==this._routerInfo){var t=this;this._routerInfo.getClientEndpoints().then(function(n){n.length>0?(t.applyOverrides(n),t.createConnection(n).then(function(t,n){e.succeed(t,n)},function(t){e.fail(t)})):t.getConnectionNoRouterInfo(e)}).exception(function(t){e.fail(t)})}else this.getConnectionNoRouterInfo(e);return e},getConnectionNoRouterInfo:function(e){if(this._endpoints.length>0)return void this.createConnection(this._endpoints).then(function(t,n){e.succeed(t,n)}).exception(function(t){e.fail(t)});var n=this;null!==this._locatorInfo?this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then(function(i,r){return 0===i.length?void e.fail(new Ice.NoEndpointException(n.toString())):(n.applyOverrides(i),void n.createConnection(i).then(function(t,n){e.succeed(t,n)},function(i){if(i instanceof Ice.NoEndpointException)e.fail(i);else{if(t.assert(null!==n._locatorInfo),n.getLocatorInfo().clearCache(n),r){var o=n.getInstance().traceLevels();if(o.retry>=2){var s="connection to cached endpoints failed\nremoving endpoints from cache and trying one more time\n"+i.toString();n.getInstance().initializationData().logger.trace(o.retryCat,s)}return void n.getConnectionNoRouterInfo(e)}e.fail(i)}}))}).exception(function(t){e.fail(t)}):e.fail(new Ice.NoEndpointException(this.toString()))},clone:function(){var e=new v(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);return this.copyMembers(e),e},copyMembers:function(e){g.prototype.copyMembers.call(this,e),e._overrideTimeout=this._overrideTimeout,e._timeout=this._timeout,e._connectionId=this._connectionId},applyOverrides:function(e){for(var t=0;t<e.length;++t)e[t]=e[t].changeConnectionId(this._connectionId),this._overrideCompress&&(e[t]=e[t].changeCompress(this._compress)),this._overrideTimeout&&(e[t]=e[t].changeTimeout(this._timeout))},filterEndpoints:function(n){for(var i=[],o=0;o<n.length;++o)n[o]instanceof r||!n[o].connectable()||i.push(n[o]);switch(this.getMode()){case s.ModeTwoway:case s.ModeOneway:case s.ModeBatchOneway:i=e.filter(i,function(e){return!e.datagram()});break;case s.ModeDatagram:case s.ModeBatchDatagram:i=e.filter(i,function(e){return e.datagram()})}switch(this.getEndpointSelection()){case h.Random:e.shuffle(i);break;case h.Ordered:break;default:t.assert(!1)}var c=this.getInstance().defaultsAndOverrides();if(c.overrideSecure?c.overrideSecureValue:this.getSecure())i=e.filter(i,function(e){return e.secure()});else{var a=this.getPreferSecure(),u=function(e,t){var n=e.secure(),i=t.secure();return n&&i||!n&&!i?0:!n&&i?a?1:-1:a?-1:1};i.sort(u)}return i},createConnection:function(e){var t=this.filterEndpoints(e);if(0===t.length)return(new o).fail(new Ice.NoEndpointException(this.toString()));var n,i=new o,r=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||1==t.length)n=new y(this,null,i),r.create(t,!1,this.getEndpointSelection()).then(function(e,t){n.setConnection(e,t)}).exception(function(e){n.setException(e)});else{var s=[t[0]];n=new y(this,t,i),r.create(s,!0,this.getEndpointSelection()).then(function(e,t){n.setConnection(e,t)}).exception(function(e){n.setException(e)})}return i}});Ice.RoutableReference=v;var y=_({__init__:function(e,t,n){this.ref=e,this.endpoints=t,this.promise=n,this.i=0,this.exception=null},setConnection:function(e,t){null!==this.ref.getRouterInfo()&&null!==this.ref.getRouterInfo().getAdapter()&&e.setAdapter(this.ref.getRouterInfo().getAdapter()),this.promise.succeed(e,t)},setException:function(e){if(null===this.exception&&(this.exception=e),null===this.endpoints||++this.i===this.endpoints.length)return void this.promise.fail(this.exception);var t=this.i!=this.endpoints.length-1,n=[this.endpoints[this.i]],i=this;this.ref.getInstance().outgoingConnectionFactory().create(n,t,this.ref.getEndpointSelection()).then(function(e,t){i.setConnection(e,t)}).exception(function(e){i.setException(e)})}})}(),function(){var e=Ice.Debug,t=Ice.HashUtil,n=Ice.StringUtil,i="undefined"!=typeof Ice.TcpTransceiver?Ice.TcpTransceiver:null,r=Ice.Class,o=r(Ice.IPEndpointI,{__init__:function(e,t,n,i,r,o,s){Ice.IPEndpointI.call(this,e,t,n,i,o),this._timeout=void 0===r?e?e.defaultTimeout():void 0:r,this._compress=void 0===s?!1:s},getInfo:function(){var e=this.secure()?new IceSSL.EndpointInfo:new Ice.TCPEndpointInfo;return this.fillEndpointInfo(e),e},timeout:function(){return this._timeout},changeTimeout:function(e){return e===this._timeout?this:new o(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)},changeConnectionId:function(e){return e===this._connectionId?this:new o(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)},compress:function(){return this._compress},changeCompress:function(e){return e===this._compress?this:new o(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)},datagram:function(){return!1},connectable:function(){return!this.secure()},connect:function(){return e.assert(!this.secure()),i.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)},options:function(){var e=Ice.IPEndpointI.prototype.options.call(this);return e+=-1==this._timeout?" -t infinite":" -t "+this._timeout,this._compress&&(e+=" -z"),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof o?this._timeout<e._timeout?-1:e._timeout<this._timeout?1:!this._compress&&e._compress?-1:!e._compress&&this._compress?1:Ice.IPEndpointI.prototype.compareTo.call(this,e):this.type()<e.type()?-1:1},streamWriteImpl:function(e){Ice.IPEndpointI.prototype.streamWriteImpl.call(this,e),e.writeInt(this._timeout),e.writeBool(this._compress)},hashInit:function(e){return e=Ice.IPEndpointI.prototype.hashInit.call(this,e),e=t.addNumber(e,this._timeout),e=t.addBoolean(e,this._compress)},fillEndpointInfo:function(e){Ice.IPEndpointI.prototype.fillEndpointInfo.call(this,e),e.timeout=this._timeout,e.compress=this._compress},initWithStream:function(e){Ice.IPEndpointI.prototype.initWithStream.call(this,e),this._timeout=e.readInt(),this._compress=e.readBool()},checkOption:function(e,t,i){if(Ice.IPEndpointI.prototype.checkOption.call(this,e,t,i))return!0;if("-t"===e){if(null===t)throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+i);if("infinite"==t)this._timeout=-1;else{var r=!1;try{this._timeout=n.toInt(t)}catch(o){r=!0}if(r||this._timeout<1)throw new Ice.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+i)}}else{if("-z"!==e)return!1;if(null!==t)throw new Ice.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+i);this._compress=!0}return!0},createEndpoint:function(e,t,n){return new o(this._instance,e,t,this._sourceAddr,this._timeout,n,this._compress)}});Ice.TcpEndpointI=o}(),function(){var e=Ice.WSEndpoint,t=Ice.Class({__init__:function(e,t){this._instance=e,this._delegate=t},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(t,n){var i=new e(this._instance,this._delegate.create(t,n));return i.initWithOptions(t),i},read:function(t){var n=new e(this._instance,this._delegate.read(t));return n.initWithStream(t),n},destroy:function(){this._delegate.destroy(),this._instance=null}});Ice.WSEndpointFactory=t}(),function(){var e=Ice.Debug,t=Ice.BasicStream,n=Ice.EndpointParseException,i=Ice.OpaqueEndpointI,r=Ice.Protocol,o=Ice.StringUtil,s=Ice.Class({__init__:function(e){this._instance=e,this._factories=[]},add:function(t){for(var n=0;n<this._factories.length;++n)e.assert(this._factories[n].type()!=t.type());this._factories.push(t)},get:function(e){for(var t=0;t<this._factories.length;++t)if(this._factories[t].type()===e)return this._factories[t];return null},create:function(e,s){var c=e.trim();if(0===c.length)throw new n("value has no non-whitespace characters");var a=o.splitString(c," 	\n\r");if(0===a.length)throw new n("value has no non-whitespace characters");var h=a[0];a.splice(0,1),"default"===h&&(h=this._instance.defaultsAndOverrides().defaultProtocol);for(var u=0,l=this._factories.length;l>u;++u)if(this._factories[u].protocol()===h){var d=this._factories[u].create(a,s);if(a.length>0)throw new n("unrecognized argument `"+a[0]+"' in endpoint `"+e+"'");return d}if("opaque"===h){var p=new i;if(p.initWithOptions(a),a.length>0)throw new n("unrecognized argument `"+a[0]+"' in endpoint `"+e+"'");for(u=0,l=this._factories.length;l>u;++u)if(this._factories[u].type()==p.type()){var _=new t(this._instance,r.currentProtocolEncoding);_.writeShort(p.type()),p.streamWrite(_),_.pos=0,_.readShort(),_.startReadEncaps();var f=this._factories[u].read(_);return _.endReadEncaps(),f}return p}return null},read:function(e){for(var t,n=e.readShort(),r=0;r<this._factories.length;++r)if(this._factories[r].type()==n)return e.startReadEncaps(),t=this._factories[r].read(e),e.endReadEncaps(),t;return e.startReadEncaps(),t=new i(n),t.initWithStream(e),e.endReadEncaps(),t},destroy:function(){for(var e=0;e<this._factories.length;++e)this._factories[e].destroy();this._factories=[]}});Ice.EndpointFactoryManager=s}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResultBase,n=Ice.BasicStream,i=Ice.ConnectionFlushBatch,r=Ice.Debug,o=Ice.ExUtil,s=Ice.HashMap,c=Ice.IncomingAsync,a=Ice.RetryException,h=Ice.Promise,u=Ice.Protocol,l=Ice.SocketOperation,d=(Ice.Timer,Ice.TraceUtil),p=Ice.ProtocolVersion,_=Ice.EncodingVersion,f=Ice.ACM,I=Ice.ACMClose,g=Ice.ACMHeartbeat,m=0,v=1,y=2,w=3,E=4,S=5,x=6,b=function(e){this.stream=new n(e,u.currentProtocolEncoding),this.invokeNum=0,this.requestId=0,this.compress=!1,this.servantManager=null,this.adapter=null,this.outAsync=null,this.heartbeatCallback=null},C=Ice.Class,P=C({__init__:function(e,t,i,r,o,c,a){this._communicator=e,this._instance=t,this._monitor=i,this._transceiver=r,this._desc=r.toString(),this._type=r.type(),this._endpoint=o,this._incoming=c,this._adapter=a;var h=t.initializationData();this._logger=h.logger,this._traceLevels=t.traceLevels(),this._timer=t.timer(),this._writeTimeoutId=0,this._writeTimeoutScheduled=!1,this._readTimeoutId=0,this._readTimeoutScheduled=!1,this._hasMoreData={value:!1},this._warn=h.properties.getPropertyAsInt("Ice.Warn.Connections")>0,this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0,this._acmLastActivity=null!==this._monitor&&this._monitor.getACM().timeout>0?Date.now():-1,this._nextRequestId=1,this._messageSizeMax=a?a.messageSizeMax():t.messageSizeMax(),this._batchAutoFlushSize=t.batchAutoFlushSize(),this._batchStream=new n(t,u.currentProtocolEncoding),this._batchStreamInUse=!1,this._batchRequestNum=0,this._batchRequestCompress=!1,this._batchMarker=0,this._sendStreams=[],this._readStream=new n(t,u.currentProtocolEncoding),this._readHeader=!1,this._writeStream=new n(t,u.currentProtocolEncoding),this._readStreamPos=-1,this._writeStreamPos=-1,this._dispatchCount=0,this._state=m,this._shutdownInitiated=!1,this._initialized=!1,this._validated=!1,this._readProtocol=new p,this._readProtocolEncoding=new _,this._asyncRequests=new s,this._exception=null,this._startPromise=null,this._closePromises=[],this._holdPromises=[],this._finishedPromises=[],this._servantManager=null!==this._adapter?this._adapter.getServantManager():null,this._callback=null},start:function(){r.assert(null===this._startPromise);try{if(this._state>=S)return r.assert(null!==this._exception),(new h).fail(this._exception);this._startPromise=new h;var e=this;this._transceiver.setCallbacks(function(){e.message(l.Write)},function(){e.message(l.Read)},function(t,n){if(e.message(l.Write),e._instance.traceLevels().network>=3&&t>0){var i=[];i.push("sent "),i.push(t),e._endpoint.datagram()||(i.push(" of "),i.push(n)),i.push(" bytes via "),i.push(e._endpoint.protocol()),i.push("\n"),i.push(this.toString()),e._instance.initializationData().logger.trace(e._instance.traceLevels().networkCat,i.join(""))}}),this.initialize()}catch(t){return t instanceof Ice.LocalException&&this.exception(t),(new h).fail(t)}return this._startPromise},activate:function(){this._state<=v||(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.setState(y))},hold:function(){this._state<=v||this.setState(w)},destroy:function(e){switch(e){case P.ObjectAdapterDeactivated:this.setState(E,new Ice.ObjectAdapterDeactivatedException);break;case P.CommunicatorDestroyed:this.setState(E,new Ice.CommunicatorDestroyedException)}},close:function(e){var n=new t(this._communicator,"close",this,null,null);return e?(this.setState(S,new Ice.ForcedCloseConnectionException),n.succeed(n)):(this._closePromises.push(n),this.checkClose()),n},checkClose:function(){if(0===this._asyncRequests.size&&this._closePromises.length>0){this.setState(E,new Ice.CloseConnectionException);for(var e=0;e<this._closePromises.length;++e)this._closePromises[e].succeed(this._closePromises[e]);this._closePromises=[]}},isActiveOrHolding:function(){return this._state>v&&this._state<E},isFinished:function(){return this._state!==x||0!==this._dispatchCount?!1:(r.assert(this._state===x),!0)},throwException:function(){if(null!==this._exception)throw r.assert(this._state>=E),this._exception},waitUntilHolding:function(){var e=new h;return this._holdPromises.push(e),this.checkState(),e},waitUntilFinished:function(){var e=new h;return this._finishedPromises.push(e),this.checkState(),e},monitor:function(e,t){this._state===y&&((t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4)&&(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnInvocation||this._dispatchCount>0)&&this.heartbeat(),this._readStream.size>u.headerSize||!this._writeStream.isEmpty()||t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout&&(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0?this.setState(S,new Ice.ConnectionTimeoutException):t.close!=Ice.ACMClose.CloseOnInvocation&&0===this._dispatchCount&&this._batchStream.isEmpty()&&0===this._asyncRequests.size&&this.setState(E,new Ice.ConnectionTimeoutException)))},sendAsyncRequest:function(e,t,n){var i=0,o=e.__os();if(null!==this._exception)throw new a(this._exception);r.assert(this._state>v),r.assert(this._state<E),this._transceiver.checkSendSize(o),e.__cancelable(this),n&&(i=this._nextRequestId++,0>=i&&(this._nextRequestId=1,i=this._nextRequestId++),o.pos=u.headerSize,o.writeInt(i));var s;try{s=this.sendMessage(O.create(e,e.__os(),t,i))}catch(c){throw c instanceof Ice.LocalException?(this.setState(S,c),r.assert(null!==this._exception),this._exception):c}return n&&this._asyncRequests.set(i,e),s},prepareBatchRequest:function(e){if(null!==this._exception)throw this._batchStream.isEmpty()?new a(this._exception):this._exception;if(r.assert(this._state>v),r.assert(this._state<E),this._batchStream.isEmpty())try{this._batchStream.writeBlob(u.requestBatchHdr)}catch(t){throw t instanceof Ice.LocalException&&this.setState(S,t),t}this._batchStreamInUse=!0,this._batchMarker=this._batchStream.size,this._batchStream.swap(e)},finishBatchRequest:function(e,t){try{if(this._batchStream.swap(e),null!==this._exception)return;var i=!1;if(this._batchAutoFlushSize>0){this._batchStream.size>this._batchAutoFlushSize&&(i=!0);try{this._transceiver.checkSendSize(this._batchStream.buffer)}catch(o){if(!(o instanceof Ice.LocalException))throw o;if(!(this._batchRequestNum>0))throw o;i=!0}}if(i){var s=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker;var c=this._batchStream.readBlob(s);this._batchStream.resize(this._batchMarker,!1);try{this._batchStream.pos=u.headerSize,this._batchStream.writeInt(this._batchRequestNum),this.sendMessage(O.createForStream(this._batchStream,this._batchRequestCompress,!0))}catch(o){throw o instanceof Ice.LocalException?(this.setState(S,o),r.assert(null!==this._exception),this._exception):o}this._batchStream=new n(this._instance,u.currentProtocolEncoding),this._batchRequestNum=0,this._batchRequestCompress=!1,this._batchMarker=0,this._batchStream.writeBlob(u.requestBatchHdr),this._batchStream.writeBlob(c)}++this._batchRequestNum,t&&(this._batchRequestCompress=!0),r.assert(this._batchStreamInUse),this._batchStreamInUse=!1}catch(o){throw o instanceof Ice.LocalException&&this.abortBatchRequest(),o}},abortBatchRequest:function(){this._batchStream=new n(this._instance,u.currentProtocolEncoding),this._batchRequestNum=0,this._batchRequestCompress=!1,this._batchMarker=0,r.assert(this._batchStreamInUse),this._batchStreamInUse=!1},flushBatchRequests:function(){var e=new i(this,this._communicator,"flushBatchRequests");return e.__invoke(),e},flushAsyncBatchRequests:function(t){if(null!==this._exception)throw this._exception;var i;if(0===this._batchRequestNum)return t.__sent(),e.Sent;t.__cancelable(this),this._batchStream.pos=u.headerSize,this._batchStream.writeInt(this._batchRequestNum),this._batchStream.swap(t.__os());try{i=this.sendMessage(O.create(t,t.__os(),this._batchRequestCompress,0))}catch(o){throw o instanceof Ice.LocalException?(this.setState(S,o),r.assert(null!==this._exception),this._exception):o}return this._batchStream=new n(this._instance,u.currentProtocolEncoding),this._batchRequestNum=0,this._batchRequestCompress=!1,this._batchMarker=0,i},setCallback:function(e){if(this._state>=S){if(null!==e){var t=this;setTimeout(function(){try{e.closed(this)}catch(n){t._logger.error("connection callback exception:\n"+n+"\n"+t._desc)}},0)}}else this._callback=e},setACM:function(e,t,n){null===this._monitor||this._state>=S||(this._state==y&&this._monitor.remove(this),this._monitor=this._monitor.acm(e,t,n),this._state==y&&this._monitor.add(this),this._monitor.getACM().timeout<=0?this._acmLastActivity=-1:this._state==y&&-1==this._acmLastActivity&&(this._acmLastActivity=Date.now()))},getACM:function(){return null!==this._monitor?this._monitor.getACM():new f(0,I.CloseOff,g.HeartbeatOff)
},asyncRequestCanceled:function(e,t){for(var n=0;n<this._sendStreams.length;n++){var i=this._sendStreams[n];if(i.outAsync===e)return i.requestId>0&&this._asyncRequests.delete(i.requestId),i.canceled(),0!==n&&this._sendStreams.splice(n,1),void e.__completedEx(t)}if(e instanceof Ice.OutgoingAsync)for(var r=this._asyncRequests.entries;null!==r;r=r.next)if(r.value===e)return this._asyncRequests.delete(r.key),void e.__completedEx(t)},sendResponse:function(e,t){r.assert(this._state>v);try{if(0===--this._dispatchCount&&(this._state===x&&this.reap(),this.checkState()),this._state>=S)throw r.assert(null!==this._exception),this._exception;this.sendMessage(O.createForStream(e,0!==t,!0)),this._state===E&&0===this._dispatchCount&&this.initiateShutdown()}catch(n){if(!(n instanceof Ice.LocalException))throw n;this.setState(S,n)}},sendNoResponse:function(){r.assert(this._state>v);try{if(0===--this._dispatchCount&&(this._state===x&&this.reap(),this.checkState()),this._state>=S)throw r.assert(null!==this._exception),this._exception;this._state===E&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(S,e)}},endpoint:function(){return this._endpoint},setAdapter:function(e){this._state<=v||this._state>=E||(r.assert(this._state<E),this._adapter=e,null!==this._adapter?(this._servantManager=this._adapter.getServantManager(),null===this._servantManager&&(this._adapter=null)):this._servantManager=null)},getAdapter:function(){return this._adapter},getEndpoint:function(){return this._endpoint},createProxy:function(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))},message:function(e){if(!(this._state>=S)){this.unscheduleTimeout(e),this._hasMoreData.value=0!==(e&l.Read);var t=null;try{if(0!==(e&l.Write)&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer))return r.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(l.Write,this._endpoint.timeout());r.assert(0===this._writeStream.buffer.remaining)}if(0!==(e&l.Read)&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer))return;r.assert(0===this._readStream.buffer.remaining),this._readHeader=!1;var n=this._readStream.pos;if(n<u.headerSize)throw new Ice.IllegalMessageSizeException;this._readStream.pos=0;var i=this._readStream.readByte(),s=this._readStream.readByte(),c=this._readStream.readByte(),a=this._readStream.readByte();if(i!==u.magic[0]||s!==u.magic[1]||c!==u.magic[2]||a!==u.magic[3]){var h=new Ice.BadMagicException;throw h.badMagic=Ice.Buffer.createNative([i,s,c,a]),h}this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte(),this._readStream.readByte();var d=this._readStream.readInt();if(d<u.headerSize)throw new Ice.IllegalMessageSizeException;d>this._messageSizeMax&&o.throwMemoryLimitException(d,this._messageSizeMax),d>this._readStream.size&&this._readStream.resize(d),this._readStream.pos=n}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram())throw new Ice.DatagramLimitException;if(!this.read(this._readStream.buffer))return r.assert(!this._readStream.isEmpty()),void this.scheduleTimeout(l.Read,this._endpoint.timeout());r.assert(0===this._readStream.buffer.remaining)}}if(this._state<=v){if(this._state===m&&!this.initialize())return;if(this._state<=v&&!this.validate())return;this._transceiver.unregister(),this.setState(w),null!==this._startPromise&&++this._dispatchCount}else r.assert(this._state<=E),0!==(e&l.Read)&&(t=this.parseMessage()),0!==(e&l.Write)&&this.sendNextMessage()}catch(p){if(p instanceof Ice.DatagramLimitException)return this._warnUdp&&this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded"),this._readStream.resize(u.headerSize),this._readStream.pos=0,void(this._readHeader=!0);if(p instanceof Ice.SocketException)return void this.setState(S,p);if(p instanceof Ice.LocalException)return void(this._endpoint.datagram()?(this._warn&&this._logger.warning("datagram connection exception:\n"+p+"\n"+this._desc),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0):this.setState(S,p));throw p}if(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.dispatch(t),this._hasMoreData.value){var _=this;setTimeout(function(){_.message(l.Read)},0)}}},dispatch:function(e){var t=0;if(null!==this._startPromise&&(this._startPromise.succeed(),this._startPromise=null,++t),null!==e&&(null!==e.outAsync&&(e.outAsync.__completed(e.stream),++t),e.invokeNum>0&&this.invokeAll(e.stream,e.invokeNum,e.requestId,e.compress,e.servantManager,e.adapter),e.heartbeatCallback)){try{e.heartbeatCallback.heartbeat(this)}catch(n){this._logger.error("connection callback exception:\n"+n+"\n"+this._desc)}e.heartbeatCallback=null,++t}if(t>0&&(this._dispatchCount-=t,0===this._dispatchCount)){if(this._state!==E||this._shutdownInitiated)this._state===x&&this.reap();else try{this.initiateShutdown()}catch(n){if(!(n instanceof Ice.LocalException))throw n;this.setState(S,n)}this.checkState()}},finish:function(){r.assert(this._state===S),this.unscheduleTimeout(l.Read|l.Write|l.Connect);var e,t=this._instance.traceLevels();if(this._initialized?t.network>=1&&(e=[],e.push("closed "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||(e.push("\n"),e.push(this._exception.toString())),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))):t.network>=2&&(e=[],e.push("failed to establish "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),e.push("\n"),e.push(this._exception.toString()),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))),null!==this._startPromise&&(this._startPromise.fail(this._exception),this._startPromise=null),this._sendStreams.length>0){if(!this._writeStream.isEmpty()){var n=this._sendStreams[0];this._writeStream.swap(n.stream)}for(var i=0;i<this._sendStreams.length;++i){var o=this._sendStreams[i];o.requestId>0&&this._asyncRequests.delete(o.requestId),o.completed(this._exception)}this._sendStreams=[]}for(var s=this._asyncRequests.entries;null!==s;s=s.next)s.value.__completedEx(this._exception);if(this._asyncRequests.clear(),null!==this._callback){try{this._callback.closed(this)}catch(c){this._logger.error("connection callback exception:\n"+c+"\n"+this._desc)}this._callback=null}0===this._dispatchCount&&this.reap(),this.setState(x)},toString:function(){return this._desc},timedOut:function(){this._state<=v?this.setState(S,new Ice.ConnectTimeoutException):this._state<E?this.setState(S,new Ice.TimeoutException):this._state===E&&this.setState(S,new Ice.CloseTimeoutException)},type:function(){return this._type},timeout:function(){return this._endpoint.timeout()},getInfo:function(){if(this._state>=S)throw this._exception;var e=this._transceiver.getInfo();return e.adapterName=null!==this._adapter?this._adapter.getName():"",e.incoming=this._incoming,e},exception:function(e){this.setState(S,e)},invokeException:function(e,t){this.setState(S,e),t>0&&(r.assert(this._dispatchCount>0),this._dispatchCount-=t,r.assert(this._dispatchCount>=0),0===this._dispatchCount&&(this._state===x&&this.reap(),this.checkState()))},setState:function(e,t){if(void 0!==t){if(r.assert(t instanceof Ice.LocalException),r.assert(e>=E),this._state===e)return;null===this._exception&&(this._exception=t,this._warn&&this._validated&&(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&this._state===E||this.warning("connection exception",this._exception)))}if(this._endpoint.datagram()&&e===E&&(e=S),this._state<=v&&e===E&&(e=S),this._state!==e){try{switch(e){case m:r.assert(!1);break;case v:if(this._state!==m)return void r.assert(this._state===S);this._endpoint.datagram()||this._incoming||this._transceiver.register();break;case y:if(this._state!==w&&this._state!==v)return;this._transceiver.register();break;case w:if(this._state!==y&&this._state!==v)return;this._state===y&&this._transceiver.unregister();break;case E:if(this._state>=S)return;this._state===w&&this._transceiver.register();break;case S:if(this._state===x)return;this._transceiver.unregister();break;case x:r.assert(this._state===S),this._transceiver.close(),this._communicator=null}}catch(t){if(!(t instanceof Ice.LocalException))throw t;var n="unexpected connection exception:\n "+this._desc+"\n"+t.toString();this._instance.initializationData().logger.error(n)}if(null!==this._monitor&&(e===y?(this._monitor.add(this),this._acmLastActivity>0&&(this._acmLastActivity=Date.now())):this._state===y&&this._monitor.remove(this)),this._state=e,this._state===E&&0===this._dispatchCount)try{this.initiateShutdown()}catch(t){if(!(t instanceof Ice.LocalException))throw t;this.setState(S,t)}else this._state===S&&this.finish();this.checkState()}},initiateShutdown:function(){if(r.assert(this._state===E),r.assert(0===this._dispatchCount),r.assert(!this._shutdownInitiated),!this._endpoint.datagram()){var t=new n(this._instance,u.currentProtocolEncoding);t.writeBlob(u.magic),u.currentProtocol.__write(t),u.currentProtocolEncoding.__write(t),t.writeByte(u.closeConnectionMsg),t.writeByte(0),t.writeInt(u.headerSize);var i=this.sendMessage(O.createForStream(t,!1,!1));(i&e.Sent)>0&&this.scheduleTimeout(l.Write,this.closeTimeout())}},heartbeat:function(){if(r.assert(this._state===y),!this._endpoint.datagram()){var e=new n(this._instance,u.currentProtocolEncoding);e.writeBlob(u.magic),u.currentProtocol.__write(e),u.currentProtocolEncoding.__write(e),e.writeByte(u.validateConnectionMsg),e.writeByte(0),e.writeInt(u.headerSize);try{this.sendMessage(O.createForStream(e,!1,!1))}catch(t){this.setState(S,t),r.assert(null!==this._exception)}}},initialize:function(){var e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);return e!=l.None?(this.scheduleTimeout(e,this.connectTimeout()),!1):(this._desc=this._transceiver.toString(),this._initialized=!0,this.setState(v),!0)},validate:function(){if(!this._endpoint.datagram())if(null!==this._adapter){if(0===this._writeStream.size&&(this._writeStream.writeBlob(u.magic),u.currentProtocol.__write(this._writeStream),u.currentProtocolEncoding.__write(this._writeStream),this._writeStream.writeByte(u.validateConnectionMsg),this._writeStream.writeByte(0),this._writeStream.writeInt(u.headerSize),d.traceSend(this._writeStream,this._logger,this._traceLevels),this._writeStream.prepareWrite()),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return this.scheduleTimeout(l.Write,this.connectTimeout()),!1}else{if(0===this._readStream.size&&(this._readStream.resize(u.headerSize),this._readStream.pos=0),this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer))return this.scheduleTimeout(l.Read,this.connectTimeout()),!1;r.assert(this._readStream.pos===u.headerSize),this._readStream.pos=0;var e=this._readStream.readBlob(4);if(e[0]!==u.magic[0]||e[1]!==u.magic[1]||e[2]!==u.magic[2]||e[3]!==u.magic[3]){var t=new Ice.BadMagicException;throw t.badMagic=e,t}this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding);var n=this._readStream.readByte();if(n!==u.validateConnectionMsg)throw new Ice.ConnectionNotValidatedException;this._readStream.readByte();var i=this._readStream.readInt();if(i!==u.headerSize)throw new Ice.IllegalMessageSizeException;d.traceRecv(this._readStream,this._logger,this._traceLevels),this._validated=!0}this._writeStream.resize(0),this._writeStream.pos=0,this._readStream.resize(u.headerSize),this._readHeader=!0,this._readStream.pos=0;var o=this._instance.traceLevels();if(o.network>=1){var s=[];this._endpoint.datagram()?(s.push("starting to send "),s.push(this._endpoint.protocol()),s.push(" messages\n"),s.push(this._transceiver.toDetailedString())):(s=[],s.push("established "),s.push(this._endpoint.protocol()),s.push(" connection\n"),s.push(this.toString())),this._instance.initializationData().logger.trace(o.networkCat,s.join(""))}return!0},sendNextMessage:function(){if(0!==this._sendStreams.length){r.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{for(;;){var e=this._sendStreams.shift();if(this._writeStream.swap(e.stream),e.sent(),0===this._sendStreams.length)break;if(this._state>=S)return;e=this._sendStreams[0],r.assert(!e.prepared);var t=e.stream;if(t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,null!==e.outAsync?d.trace("sending asynchronous request",t,this._logger,this._traceLevels):d.traceSend(t,this._logger,this._traceLevels),this._writeStream.swap(e.stream),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return r.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(l.Write,this._endpoint.timeout())}}catch(n){if(n instanceof Ice.LocalException)return void this.setState(S,n);throw n}r.assert(this._writeStream.isEmpty()),this._state===E&&this.scheduleTimeout(l.Write,this.closeTimeout())}},sendMessage:function(t){if(this._sendStreams.length>0)return t.doAdopt(),this._sendStreams.push(t),e.Queued;r.assert(this._state<S),r.assert(!t.prepared);var n=t.stream;return n.pos=10,n.writeInt(n.size),n.prepareWrite(),t.prepared=!0,t.outAsync?d.trace("sending asynchronous request",t.stream,this._logger,this._traceLevels):d.traceSend(t.stream,this._logger,this._traceLevels),this.write(t.stream.buffer)?(t.sent(),this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),e.Sent):(t.doAdopt(),this._writeStream.swap(t.stream),this._sendStreams.push(t),this.scheduleTimeout(l.Write,this._endpoint.timeout()),e.Queued)},parseMessage:function(){r.assert(this._state>v&&this._state<S);var e=new b(this._instance);this._readStream.swap(e.stream),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0,this._validated=!0,r.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;var t=e.stream.readByte();if(e.compress=e.stream.readByte(),2===e.compress){var n=new Ice.FeatureNotSupportedException;throw n.unsupportedFeature="Cannot uncompress compressed message",n}switch(e.stream.pos=u.headerSize,t){case u.closeConnectionMsg:d.traceRecv(e.stream,this._logger,this._traceLevels),this._endpoint.datagram()?this._warn&&this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc):this.setState(S,new Ice.CloseConnectionException);break;case u.requestMsg:this._state===E?d.trace("received request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels):(d.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.invokeNum=1,e.servantManager=this._servantManager,e.adapter=this._adapter,++this._dispatchCount);break;case u.requestBatchMsg:if(this._state===E)d.trace("received batch request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels);else{if(d.traceRecv(e.stream,this._logger,this._traceLevels),e.invokeNum=e.stream.readInt(),e.invokeNum<0)throw e.invokeNum=0,new Ice.UnmarshalOutOfBoundsException;e.servantManager=this._servantManager,e.adapter=this._adapter,this._dispatchCount+=e.invokeNum}break;case u.replyMsg:d.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.outAsync=this._asyncRequests.get(e.requestId),e.outAsync?(this._asyncRequests.delete(e.requestId),++this._dispatchCount):e=null,this.checkClose();break;case u.validateConnectionMsg:d.traceRecv(e.stream,this._logger,this._traceLevels),null!==this._callback&&(e.heartbeatCallback=this._callback,++this._dispatchCount);break;default:throw d.trace("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels),new Ice.UnknownMessageException}}catch(n){if(!(n instanceof Ice.LocalException))throw n;this._endpoint.datagram()?this._warn&&this._logger.warning("datagram connection exception:\n"+n+"\n"+this._desc):this.setState(S,n)}return e},invokeAll:function(e,t,n,i,r,o){var s=null;try{for(;t>0;){var a=!this._endpoint.datagram()&&0!==n;s=new c(this._instance,this,o,a,i,n),s.invoke(r,e),--t,s=null}e.clear()}catch(h){if(!(h instanceof Ice.LocalException))throw h;this.invokeException(h,t)}},scheduleTimeout:function(e,t){if(!(0>t)){var n=this;0!==(e&l.Read)&&(this._readTimeoutId=this._timer.schedule(function(){n.timedOut()},t),this._readTimeoutScheduled=!0),0!==(e&(l.Write|l.Connect))&&(this._writeTimeoutId=this._timer.schedule(function(){n.timedOut()},t),this._writeTimeoutScheduled=!0)}},unscheduleTimeout:function(e){0!==(e&l.Read)&&this._readTimeoutScheduled&&(this._timer.cancel(this._readTimeoutId),this._readTimeoutScheduled=!1),0!==(e&(l.Write|l.Connect))&&this._writeTimeoutScheduled&&(this._timer.cancel(this._writeTimeoutId),this._writeTimeoutScheduled=!1)},connectTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideConnectTimeout?e.overrideConnectTimeoutValue:this._endpoint.timeout()},closeTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideCloseTimeout?e.overrideCloseTimeoutValue:this._endpoint.timeout()},warning:function(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())},checkState:function(){if(!(this._state<w||this._dispatchCount>0)){var e;if(this._holdPromises.length>0){for(e=0;e<this._holdPromises.length;++e)this._holdPromises[e].succeed();this._holdPromises=[]}if(this._state===x&&this._finishedPromises.length>0){for(this._adapter=null,e=0;e<this._finishedPromises.length;++e)this._finishedPromises[e].succeed();this._finishedPromises=[]}}},reap:function(){null!==this._monitor&&this._monitor.reap(this)},read:function(e){var t=e.position,n=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("received "),this._endpoint.datagram()?i.push(e.limit):(i.push(e.position-t),i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n},write:function(e){var t=e.position,n=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("sent "),i.push(e.position-t),this._endpoint.datagram()||(i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n}});P.ObjectAdapterDeactivated=0,P.CommunicatorDestroyed=1,Ice.ConnectionI=P;var O=C({__init__:function(){this.stream=null,this.outAsync=null,this.compress=!1,this.requestId=0,this.prepared=!1},canceled:function(){r.assert(null!==this.outAsync),this.outAsync=null},doAdopt:function(){if(this.adopt){var e=new n(this.stream.instance,u.currentProtocolEncoding);e.swap(this.stream),this.stream=e,this.adopt=!1}},sent:function(){null!==this.outAsync&&this.outAsync.__sent()},completed:function(e){null!==this.outAsync&&this.outAsync.__completedEx(e)}});O.createForStream=function(e,t,n){var i=new O;return i.stream=e,i.compress=t,i.adopt=n,i.isSent=!1,i.requestId=0,i.outAsync=null,i},O.create=function(e,t,n,i){var r=new O;return r.stream=t,r.compress=n,r.outAsync=e,r.requestId=i,r.isSent=!1,r.adopt=!1,r}}(),function(){var e=Ice.Context,t=Ice.InitializationException,n=Ice.Class({__init__:function(){this._context=new e},getContext:function(){return new e(this._context)},setContext:function(t){null!==t&&t.size>0?this._context=new e(t):this._context.clear()},containsKey:function(e){return null===e&&(e=""),this._context.has(e)},get:function(e){null===e&&(e="");var t=this._context.get(e);return null===t&&(t=""),t},put:function(e,t){null===e&&(e=""),null===t&&(t="");var n=this._context.get(e);return null===n&&(n=""),this._context.set(e,t),n},remove:function(e){null===e&&(e="");var t=this._context.get(e);return this._context.delete(e),null===t&&(t=""),t},write:function(t,n){if(0===t.size)Ice.ContextHelper.write(n,this._context);else{var i=null;0===this._context.size?i=t:(i=new e(this._context),i.merge(t)),Ice.ContextHelper.write(n,i)}}});n.create=function(e){if(0===e.length||"None"===e)return null;if("Shared"===e)return new n;throw new t("'"+e+"' is not a valid value for Ice.ImplicitContext")},Ice.ImplicitContextI=n}(),function(){var e=Ice.Class,t=Ice.Debug,n=e({__init__:function(e,t,n,i){if(void 0===e)return this.timeout=6e4,this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnInvocation,void(this.close=Ice.ACMClose.CloseOnInvocationAndIdle);var r;r="Ice.ACM.Client"!=n&&"Ice.ACM.Server"!=n||0!==e.getProperty(n+".Timeout").length?n+".Timeout":n,this.timeout=1e3*e.getPropertyAsIntWithDefault(r,i.timeout/1e3);var o=e.getPropertyAsIntWithDefault(n+".Heartbeat",i.heartbeat.value);o>=0&&o<=Ice.ACMHeartbeat.maxValue?this.heartbeat=Ice.ACMHeartbeat.valueOf(o):(t.warning("invalid value for property `"+n+".Heartbeat', default value will be used instead"),this.heartbeat=i.heartbeat);var s=e.getPropertyAsIntWithDefault(n+".Close",i.close.value);s>=0&&s<=Ice.ACMClose.maxValue?this.close=Ice.ACMClose.valueOf(s):(t.warning("invalid value for property `"+n+".Close', default value will be used instead"),this.close=i.close)}}),i=e({add:function(){t.assert(!1)},remove:function(){t.assert(!1)},reap:function(){t.assert(!1)},acm:function(){return t.assert(!1),null},getACM:function(){return t.assert(!1),0}}),r=e(i,{__init__:function(e,t){this._instance=e,this._config=t,this._reapedConnections=[],this._connections=[]},destroy:function(){null!==this._instance&&(this._instance=null,this._connections=null)},add:function(e){if(0!==this._config.timeout&&(this._connections.push(e),1==this._connections.length)){var t=this;this._timerToken=this._instance.timer().scheduleRepeated(function(){t.runTimerTask()},this._config.timeout/2)}},remove:function(e){if(0!==this._config.timeout){var n=this._connections.indexOf(e);return t.assert(n>=0),this._connections.splice(n,1),0===this._connections.length?void this._instance.timer().cancel(this._timerToken):void 0}},reap:function(e){this._reapedConnections.push(e)},acm:function(e,i,r){t.assert(null!==this._instance);var s=new n;return s.timeout=this._config.timeout,s.close=this._config.close,s.heartbeat=this._config.heartbeat,void 0!==e&&(s.timeout=1e3*e),void 0!==i&&(s.close=i),void 0!==r&&(s.heartbeat=r),new o(this,this._instance.timer(),s)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},swapReapedConnections:function(){if(0===this._reapedConnections.length)return null;var e=this._reapedConnections;return this._reapedConnections=[],e},runTimerTask:function(){if(null!==this._instance)for(var e=Date.now(),t=0;t<this._connections.length;t++)try{this._connections[t].monitor(e,this._config)}catch(n){this.handleException(n)}},handleException:function(e){null!==this._instance&&this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}}),o=e(i,{__init__:function(e,t,n){this._parent=e,this._timer=t,this._config=n,this._connection=null},add:function(e){if(t.assert(null===this._connection),this._connection=e,this._config.timeout>0){var n=this;this._timerToken=this._timer.scheduleRepeated(function(){n.runTimerTask()},this._config.timeout/2)}},remove:function(e){t.assert(this._connection===e),this._connection=null,this._config.timeout>0&&this._timer.cancel(this._timerToken)},reap:function(e){this._parent.reap(e)},acm:function(e,t,n){return this._parent.acm(e,t,n)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},runTimerTask:function(){try{this.connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}});Ice.FactoryACMMonitor=r,Ice.ACMConfig=n}(),function(){var e=(Ice.AsyncResult,Ice.AsyncStatus),t=Ice.BasicStream,n=Ice.ConnectionRequestHandler,i=Ice.Debug,r=(Ice.ExUtil,Ice.RetryException),o=(Ice.OutgoingAsync,Ice.Protocol),s=Ice.ReferenceMode,c=Ice.LocalException,a=(Ice.Promise,Ice.Class({__init__:function(e,n){this._reference=e,this._connect=!0,this._response=e.getMode()===s.ModeTwoway,this._proxy=n,this._proxies=[],this._initialized=!1,this._batchRequestInProgress=!1,this._batchStream=new t(e.getInstance(),o.currentProtocolEncoding),this._connection=null,this._compress=!1,this._exception=null,this._requests=[]},connect:function(e){var t=this;e===this._proxy&&this._connect&&(this._connect=!1,this._reference.getConnection().then(function(e,n){t.setConnection(e,n)},function(e){t.setException(e)}));try{if(!this.initialized())return this._proxies.push(e),this}catch(n){throw n}return this._connectionRequestHandler?(e.__setRequestHandler(this,this._connectionRequestHandler),this._connectionRequestHandler):this},update:function(e,t){return e===this?t:this},prepareBatchRequest:function(e){return this.initialized()?void this._connection.prepareBatchRequest(e):(this._batchRequestInProgress=!0,void this._batchStream.swap(e))},finishBatchRequest:function(e){return this.initialized()?void this._connection.finishBatchRequest(e,this._compress):(i.assert(this._batchRequestInProgress),this._batchRequestInProgress=!1,this._batchStream.swap(e),void this._requests.push(new h(this._batchStream)))},abortBatchRequest:function(){if(!this.initialized()){i.assert(this._batchRequestInProgress),this._batchRequestInProgress=!1;var e=new t(this._reference.getInstance(),o.currentProtocolEncoding);return void this._batchStream.swap(e)}this._connection.abortBatchRequest()},sendAsyncRequest:function(t){this._initialized||t.__cancelable(this);try{if(!this.initialized())return this._requests.push(new h(t)),e.Queued}catch(n){throw new r(n)}return t.__send(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e,t){if(null===this._exception){if(!this.initialized()){for(var n=0;n<this._requests.length;n++)if(this._requests[n].out===e)return e.__completedEx(t),void this._requests.splice(n,1);i.assert(!1)}this._connection.asyncRequestCanceled(e,t)}},getReference:function(){return this._reference},getConnection:function(){if(null!==this._exception)throw this._exception;return this._connection},setConnection:function(e,t){i.assert(null===this._exception&&null===this._connection),this._connection=e,this._compress=t;var n=this._reference.getRouterInfo();if(null!==n){var r=this;return void n.addProxy(this._proxy).then(function(){r.flushRequests()},function(e){r.setException(e)})}this.flushRequests()},setException:function(e){i.assert(!this._initialized&&null===this._exception),this._exception=e,this._proxies.length=0,this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(t){}for(var n=0;n<this._requests.length;++n){var r=this._requests[n];null!==r.out&&r.out.__completedEx(this._exception)}this._requests.length=0},initialized:function(){if(this._initialized)return i.assert(null!==this._connection),!0;if(null!==this._exception)throw this._exception;return this._initialized},flushRequests:function(){i.assert(null!==this._connection&&!this._initialized);for(var e=null;this._requests.length>0;){var s=this._requests[0];try{if(null!==s.os){var a=new t(s.os.instance,o.currentProtocolEncoding);this._connection.prepareBatchRequest(a);try{s.os.pos=0,a.writeBlob(s.os.readBlob(s.os.size))}catch(h){throw this._connection.abortBatchRequest(),h}this._connection.finishBatchRequest(a,this._compress)}else s.out.__send(this._connection,this._compress,this._response)}catch(h){if(h instanceof r){e=h.inner;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(u){}s.out.__retryException(h.inner)}else i.assert(h instanceof c),e=h,s.out.__completedEx(h)}this._requests.shift()}if(this._reference.getCacheConnection()&&null===e){this._connectionRequestHandler=new n(this._reference,this._connection,this._compress);for(var l in this._proxies)this._proxies[l].__setRequestHandler(this,this._connectionRequestHandler)}i.assert(!this._initialized),this._exception=e,this._initialized=null===this._exception;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(u){}this._proxies.length=0,this._proxy=null}}));Ice.ConnectRequestHandler=a;var h=function(e){this.os=null,this.out=null,e instanceof t?(this.os=new t(e.instance,o.currentProtocolEncoding),this.os.swap(e)):this.out=e}}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.ObjectPrx,i=Ice.StringUtil,r=Ice.Identity,o=Ice.Class({__init__:function(e){this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(var n=0;n<t.length;n++){var r;try{r=i.toInt(t[n])}catch(o){r=0}if(0===n&&-1===r)break;this._retryIntervals[n]=r>0?r:0}}else this._retryIntervals=[0]},stringToProxy:function(e){var t=this._instance.referenceFactory().createFromString(e,null);return this.referenceToProxy(t)},proxyToString:function(e){return null!==e?e.__reference().toString():""},propertyToProxy:function(e){var t=this._instance.initializationData().properties.getProperty(e),n=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(n)},proxyToProperty:function(e,n){return null!==e?e.__reference().toProperty(n):new t},streamToProxy:function(e,t){var n=new r;n.__read(e);var i=this._instance.referenceFactory().createFromStream(n,e);return this.referenceToProxy(i,t)},referenceToProxy:function(e,t){if(null!==e){var i=t?new t:new n;return i.__setup(e),i}return null},proxyToStream:function(e,t){if(null!==e){var n=e.__reference();n.getIdentity().__write(t),n.streamWrite(t)}else{var i=new r("","");i.__write(t)}},checkRetryAfterException:function(t,n,i,r){var o=this._instance.traceLevels(),s=this._instance.initializationData().logger;if(n.getMode()===Ice.Reference.ModeBatchOneway||n.getMode()===Ice.Reference.ModeBatchDatagram)throw t;if(t instanceof Ice.ObjectNotExistException){var c=t;if(null!==n.getRouterInfo()&&"ice_add_proxy"===c.operation)return n.getRouterInfo().clearCache(n),o.retry>=1&&s.trace(o.retryCat,"retrying operation call to add proxy to router\n"+t.toString()),null!==i&&(i.value=0),r;if(!n.isIndirect())throw t;if(n.isWellKnown()){var a=n.getLocatorInfo();null!==a&&a.clearCache(n)}}else if(t instanceof Ice.RequestFailedException)throw t;if(t instanceof Ice.MarshalException)throw t;if(t instanceof Ice.CommunicatorDestroyedException||t instanceof Ice.ObjectAdapterDeactivatedException)throw t;if(t instanceof Ice.InvocationTimeoutException||t instanceof Ice.InvocationCanceledException)throw t;++r,e.assert(r>0);var h;if(r===this._retryIntervals.length+1&&t instanceof Ice.CloseConnectionException)h=0;else{if(r>this._retryIntervals.length)throw o.retry>=1&&s.trace(o.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+t.toString()),t;h=this._retryIntervals[r-1]}if(o.retry>=1){var u="retrying operation call";h>0&&(u+=" in "+h+"ms"),u+=" because of exception\n"+t.toString(),s.trace(o.retryCat,u)}return e.assert(null!==i),i.value=h,r}});Ice.ProxyFactory=o}(),function(){var e=Ice.FormatType,t=Ice.EndpointSelectionType,n=Ice.Protocol,i=function(i,r){this.defaultProtocol=i.getPropertyWithDefault("Ice.Default.Protocol",void 0!==Ice.TcpEndpointFactory?"tcp":"ws");
var o=i.getProperty("Ice.Default.Host");if(this.defaultHost=o.length>0?o:null,o=i.getProperty("Ice.Default.SourceAddress"),this.defaultSourceAddress=o.length>0?o:null,o=i.getProperty("Ice.Override.Timeout"),o.length>0?(this.overrideTimeout=!0,this.overrideTimeoutValue=i.getPropertyAsInt("Ice.Override.Timeout"),this.overrideTimeoutValue<1&&-1!==this.overrideTimeoutValue&&(this.overrideTimeoutValue=-1,r.warning("invalid value for Ice.Override.Timeout `"+i.getProperty("Ice.Override.Timeout")+"': defaulting to -1"))):(this.overrideTimeout=!1,this.overrideTimeoutValue=-1),o=i.getProperty("Ice.Override.ConnectTimeout"),o.length>0?(this.overrideConnectTimeout=!0,this.overrideConnectTimeoutValue=i.getPropertyAsInt("Ice.Override.ConnectTimeout"),this.overrideConnectTimeoutValue<1&&-1!==this.overrideConnectTimeoutValue&&(this.overrideConnectTimeoutValue=-1,r.warning("invalid value for Ice.Override.ConnectTimeout `"+i.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1"))):(this.overrideConnectTimeout=!1,this.overrideConnectTimeoutValue=-1),o=i.getProperty("Ice.Override.CloseTimeout"),o.length>0?(this.overrideCloseTimeout=!0,this.overrideCloseTimeoutValue=i.getPropertyAsInt("Ice.Override.CloseTimeout"),this.overrideCloseTimeoutValue<1&&-1!==this.overrideCloseTimeoutValue&&(this.overrideCloseTimeoutValue=-1,r.warning("invalid value for Ice.Override.CloseTimeout `"+i.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1"))):(this.overrideCloseTimeout=!1,this.overrideCloseTimeoutValue=-1),this.overrideCompress=!1,this.overrideSecure=!1,o=i.getPropertyWithDefault("Ice.Default.EndpointSelection","Random"),"Random"===o)this.defaultEndpointSelection=t.Random;else{if("Ordered"!==o){var s=new Ice.EndpointSelectionTypeParseException;throw s.str="illegal value `"+o+"'; expected `Random' or `Ordered'",s}this.defaultEndpointSelection=t.Ordered}this.defaultTimeout=i.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4),this.defaultTimeout<1&&-1!==this.defaultTimeout&&(this.defaultTimeout=6e4,r.warning("invalid value for Ice.Default.Timeout `"+i.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")),this.defaultLocatorCacheTimeout=i.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1),this.defaultLocatorCacheTimeout<-1&&(this.defaultLocatorCacheTimeout=-1,r.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+i.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")),this.defaultInvocationTimeout=i.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1),this.defaultInvocationTimeout<1&&-1!==this.defaultInvocationTimeout&&(this.defaultInvocationTimeout=-1,r.warning("invalid value for Ice.Default.InvocationTimeout `"+i.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")),this.defaultPreferSecure=i.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0,o=i.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(n.currentEncoding)),this.defaultEncoding=Ice.stringToEncodingVersion(o),n.checkSupportedEncoding(this.defaultEncoding);var c=i.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=c?e.SlicedFormat:e.CompactFormat};Ice.DefaultsAndOverrides=i}(),function(){var e=Ice.StringUtil,t=Ice.Identity,n=Ice.IdentityParseException;Ice.stringToIdentity=function(i){for(var r=new t,o=-1,s=0;-1!==(s=i.indexOf("/",s));){for(var c=0;s-c>0&&"\\"==i.charAt(s-c-1);)c++;if(c%2===0){if(-1!=o){var a=new n;throw a.str="unescaped backslash in identity `"+i+"'",a}o=s}s++}if(-1==o){r.category="";try{r.name=e.unescapeString(i)}catch(h){var a=new n;throw a.str="invalid identity name `"+i+"': "+a.toString(),a}}else{try{r.category=e.unescapeString(i,0,o)}catch(h){var a=new n;throw a.str="invalid category in identity `"+i+"': "+a.toString(),a}if(o+1<i.length)try{r.name=e.unescapeString(i,o+1,i.length)}catch(h){var a=new n;throw a.str="invalid name in identity `"+i+"': "+a.toString(),a}else r.name=""}return r},Ice.identityToString=function(t){return null===t.category||0===t.category.length?e.escapeString(t.name,"/"):e.escapeString(t.category,"/")+"/"+e.escapeString(t.name,"/")},Ice.proxyIdentityCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();return 0!==(n=i.name.localeCompare(r.name))?n:i.category.localeCompare(r.category)},Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();if(0!==(n=i.name.localeCompare(r.name)))return n;if(0!==(n=i.category.localeCompare(r.category)))return n;var o=e.ice_getFacet(),s=t.ice_getFacet();return null===o&&null===s?0:null===o?-1:null===s?1:o.localeCompare(s)}}(),function(){var e=Ice.HashMap,t=Ice.RouterInfo,n=Ice.RouterPrx,i=Ice.Class({__init__:function(){this._table=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear()},find:function(e){if(null===e)return null;var i=n.uncheckedCast(e.ice_router(null)),r=this._table.get(i);return void 0===r&&(r=new t(i),this._table.set(i,r)),r},erase:function(e){var t=null;if(null!==e){var i=n.uncheckedCast(e.ice_router(null));t=this._table.get(i),this._table.delete(i)}return t}});Ice.RouterManager=i}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.Promise,i=Ice.Protocol,r=Ice.LocatorRegisterPrx,o=Ice.Class,s=o({__init__:function(e,n,i){this._locator=e,this._locatorRegistry=null,this._table=n,this._background=i,this._adapterRequests=new t,this._objectRequests=new t(t.compareEquals)},destroy:function(){this._locatorRegistry=null,this._table.clear()},equals:function(e){return this===e?!0:e instanceof s?this._locator.equals(e._locator):!1},hashCode:function(){return this._locator.hashCode()},getLocator:function(){return this._locator},getLocatorRegistry:function(){if(null!==this._locatorRegistry)return(new n).succeed(this._locatorRegistry);var e=this;return this._locator.getRegistry().then(function(t){return e._locatorRegistry=r.uncheckedCast(t.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered)),e._locatorRegistry})},getEndpoints:function(t,i,r,o){var s=o||new n;e.assert(t.isIndirect());var c=null,a={value:!1};if(t.isWellKnown()){var h=this._table.getObjectReference(t.getIdentity(),r,a);if(!a.value){if(!this._background||null===h)return this.getObjectRequest(t).addCallback(t,null,r,s),s;this.getObjectRequest(t).addCallback(t,null,r,null)}if(h.isIndirect()){if(!h.isWellKnown())return this.getEndpoints(h,t,r,s),s}else c=h.getEndpoints()}else if(c=this._table.getAdapterEndpoints(t.getAdapterId(),r,a),!a.value){if(!this._background||null===c)return this.getAdapterRequest(t).addCallback(t,i,r,s),s;this.getAdapterRequest(t).addCallback(t,i,r,null)}return e.assert(null!==c),t.getInstance().traceLevels().location>=1&&this.getEndpointsTrace(t,c,!0),s.succeed(c,!0),s},clearCache:function(t){if(e.assert(t.isIndirect()),t.isWellKnown()){var n=this._table.removeObjectReference(t.getIdentity());null!==n&&(n.isIndirect()?n.isWellKnown()||this.clearCache(n):t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table",t,n.getEndpoints()))}else{var i=this._table.removeAdapterEndpoints(t.getAdapterId());null!==i&&t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table\n",t,i)}},trace:function(t,n,i){e.assert(n.isIndirect());var r=[];r.push(t),r.push("\n"),n.isWellKnown()?(r.push("object = "),r.push(n.getInstance().identityToString(n.getIdentity())),r.push("\n")):(r.push("adapter = "),r.push(n.getAdapterId()),r.push("\n")),r.push("endpoints = ");for(var o=0;o<i.length;o++)r.push(i[o].toString()),o+1<i.length&&r.push(":");n.getInstance().initializationData().logger.trace(n.getInstance().traceLevels().locationCat,r.join(""))},getEndpointsException:function(t,n){e.assert(t.isIndirect());var i,r,o=t.getInstance();try{throw n}catch(s){if(s instanceof Ice.AdapterNotFoundException)throw o.traceLevels().location>=1&&(i=[],i.push("adapter not found\n"),i.push("adapter = "),i.push(t.getAdapterId()),o.initializationData().logger.trace(o.traceLevels().locationCat,i.join(""))),r=new Ice.NotRegisteredException,r.kindOfObject="object adapter",r.id=t.getAdapterId(),r;if(s instanceof Ice.ObjectNotFoundException)throw o.traceLevels().location>=1&&(i=[],i.push("object not found\n"),i.push("object = "),i.push(o.identityToString(t.getIdentity())),o.initializationData().logger.trace(o.traceLevels().locationCat,i.join(""))),r=new Ice.NotRegisteredException,r.kindOfObject="object",r.id=o.identityToString(t.getIdentity()),r;if(s instanceof Ice.NotRegisteredException)throw s;if(s instanceof Ice.LocalException)throw o.traceLevels().location>=1&&(i=[],i.push("couldn't contact the locator to retrieve adapter endpoints\n"),t.getAdapterId().length>0?(i.push("adapter = "),i.push(t.getAdapterId()),i.push("\n")):(i.push("object = "),i.push(o.identityToString(t.getIdentity())),i.push("\n")),i.push("reason = "+s.toString()),o.initializationData().logger.trace(o.traceLevels().locationCat,i.join(""))),s;e.assert(!1)}},getEndpointsTrace:function(e,t,n){if(null!==t&&t.length>0)n?this.trace("found endpoints in locator table",e,t):this.trace("retrieved endpoints from locator, adding to locator table",e,t);else{var i=e.getInstance(),r=[];r.push("no endpoints configured for "),e.getAdapterId().length>0?(r.push("adapter\n"),r.push("adapter = "),r.push(e.getAdapterId()),r.push("\n")):(r.push("object\n"),r.push("object = "),r.push(i.identityToString(e.getIdentity())),r.push("\n")),i.initializationData().logger.trace(i.traceLevels().locationCat,r.join(""))}},getAdapterRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for adapter by id\n"),n.push("adapter = "),n.push(e.getAdapterId()),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._adapterRequests.get(e.getAdapterId());return void 0!==i?i:(i=new u(this,e),this._adapterRequests.set(e.getAdapterId(),i),i)},getObjectRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for object by id\n"),n.push("object = "),n.push(t.identityToString(e.getIdentity())),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._objectRequests.get(e.getIdentity());return void 0!==i?i:(i=new h(this,e),this._objectRequests.set(e.getIdentity(),i),i)},finishRequest:function(t,n,i,r){if(null===i||i.__reference().isIndirect())for(var o=0;o<n.length;++o)this._table.removeObjectReference(n[o].getIdentity());t.isWellKnown()?(null===i||i.__reference().isWellKnown()?r&&this._table.removeObjectReference(t.getIdentity()):this._table.addObjectReference(t.getIdentity(),i.__reference()),e.assert(this._objectRequests.has(t.getIdentity())),this._objectRequests.delete(t.getIdentity())):(null===i||i.__reference().isIndirect()?r&&this._table.removeAdapterEndpoints(t.getAdapterId()):this._table.addAdapterEndpoints(t.getAdapterId(),i.__reference().getEndpoints()),e.assert(this._adapterRequests.has(t.getAdapterId())),this._adapterRequests.delete(t.getAdapterId()))}});Ice.LocatorInfo=s;var c=o({__init__:function(e,t,n){this._ref=e,this._ttl=t,this._promise=n},response:function(e,t){var n=null;if(null!==t){var r=t.__reference();if(this._ref.isWellKnown()&&!i.isSupported(this._ref.getEncoding(),r.getEncoding()));else if(r.isIndirect()){if(this._ref.isWellKnown()&&!r.isWellKnown()){var o=this;return void e.getEndpoints(r,this._ref,this._ttl).then(function(e,t){null!==o._promise&&o._promise.succeed(e,t)},function(e){null!==o._promise&&o._promise.fail(e)})}}else n=r.getEndpoints()}this._ref.getInstance().traceLevels().location>=1&&e.getEndpointsTrace(this._ref,n,!1),null!==this._promise&&this._promise.succeed(null===n?[]:n,!1)},exception:function(e,t){try{e.getEndpointsException(this._ref,t)}catch(n){null!==this._promise&&this._promise.fail(n)}}}),a=o({__init__:function(e,t){this._locatorInfo=e,this._ref=t,this._callbacks=[],this._wellKnownRefs=[],this._sent=!1,this._response=!1,this._proxy=null,this._exception=null},addCallback:function(e,t,n,i){var r=new c(e,n,i);this._response?r.response(this._locatorInfo,this._proxy):null!==this._exception?r.exception(this._locatorInfo,this._exception):(this._callbacks.push(r),null!==t&&this._wellKnownRefs.push(t),this._sent||(this._sent=!0,this.send()))},response:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,!1),this._response=!0,this._proxy=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].response(this._locatorInfo,e)},exception:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException),this._exception=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].exception(this._locatorInfo,e)}}),h=o(a,{__init__:function(t,n){a.call(this,t,n),e.assert(n.isWellKnown())},send:function(){try{var e=this;this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then(function(t){e.response(t)},function(t){e.exception(t)})}catch(t){this.exception(t)}}}),u=o(a,{__init__:function(t,n){a.call(this,t,n),e.assert(n.isIndirect())},send:function(){try{var e=this;this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then(function(t){e.response(t)},function(t){e.exception(t)})}catch(t){this.exception(t)}}})}(),function(){var e=(Ice.Debug,Ice.HashMap),t=Ice.ConnectRequestHandler,n=Ice.Class({__init__:function(t){this._instance=t,this._handlers=new e(e.compareEquals)},getRequestHandler:function(e,n){if(e.getCacheConnection()){var i=this._handlers.get(e);return i?i:(i=new t(e,n),this._handlers.set(e,i),i)}return new t(e,n)},removeRequestHandler:function(e,t){e.getCacheConnection()&&this._handlers.get(e)===t&&this._handlers.delete(e)}});Ice.RequestHandlerFactory=n}(),function(){var e=Ice.HashMap,t=Ice.LocatorInfo,n=Ice.LocatorTable,i=Ice.LocatorPrx,r=Ice.Class({__init__:function(t){this._background=t.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0,this._table=new e(e.compareEquals),this._locatorTables=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear(),this._locatorTables.clear()},find:function(e){if(null===e)return null;var r=i.uncheckedCast(e.ice_locator(null)),o=this._table.get(r);if(void 0===o){var s=this._locatorTables.get(r.ice_getIdentity());void 0===s&&(s=new n,this._locatorTables.set(r.ice_getIdentity(),s)),o=new t(r,s,this._background),this._table.set(r,o)}return o}});Ice.LocatorManager=r}(),function(){var e=(Ice.AsyncResultBase,Ice.ObjectAdapterI),t=Ice.Promise,n=Ice.Class({__init__:function(e,n){this._instance=e,this._communicator=n,this._adapters=[],this._adapterNamesInUse=[],this._shutdownPromise=new t},shutdown:function(){return null===this._instance?this._shutdownPromise:(this._instance=null,this._communicator=null,this._shutdownPromise=t.all(this._adapters.map(function(e){return e.deactivate()})),this._shutdownPromise)},waitForShutdown:function(){var e=this;return this._shutdownPromise.then(function(){return t.all(e._adapters.map(function(e){return e.waitForDeactivate()}))})},isShutdown:function(){return null===this._instance},destroy:function(){var e=this;return this.waitForShutdown().then(function(){return t.all(e._adapters.map(function(e){return e.destroy()}))})},createObjectAdapter:function(t,n,i){if(null===this._instance)throw new Ice.ObjectAdapterDeactivatedException;var r=null;try{if(0===t.length){var o=Ice.generateUUID();r=new e(this._instance,this._communicator,this,o,null,!0,i)}else{if(-1!==this._adapterNamesInUse.indexOf(t))throw new Ice.AlreadyRegisteredException("object adapter",t);r=new e(this._instance,this._communicator,this,t,n,!1,i),this._adapterNamesInUse.push(t)}this._adapters.push(r)}catch(s){i.fail(s,i)}},removeObjectAdapter:function(e){if(null!==this._instance){var t=this._adapters.indexOf(e);-1!==t&&this._adapters.splice(t,1),t=this._adapterNamesInUse.indexOf(e.getName()),-1!==t&&this._adapterNamesInUse.splice(t,1)}}});Ice.ObjectAdapterFactory=n}(),function(){Slice.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),IceMX.Metrics=Slice.defineObject(function(e,t,n,i,r){Ice.Object.call(this),this.id=void 0!==e?e:null,this.total=void 0!==t?t:new Ice.Long(0,0),this.current=void 0!==n?n:0,this.totalLifetime=void 0!==i?i:new Ice.Long(0,0),this.failures=void 0!==r?r:0},Ice.Object,void 0,1,["::Ice::Object","::IceMX::Metrics"],-1,function(e){e.writeString(this.id),e.writeLong(this.total),e.writeInt(this.current),e.writeLong(this.totalLifetime),e.writeInt(this.failures)},function(e){this.id=e.readString(),this.total=e.readLong(),this.current=e.readInt(),this.totalLifetime=e.readLong(),this.failures=e.readInt()},!1),IceMX.MetricsPrx=Slice.defineProxy(Ice.ObjectPrx,IceMX.Metrics.ice_staticId,void 0),Slice.defineOperations(IceMX.Metrics,IceMX.MetricsPrx),IceMX.MetricsFailures=Slice.defineStruct(function(e,t){this.id=void 0!==e?e:null,this.failures=void 0!==t?t:null},!1,function(e){e.writeString(this.id),IceMX.StringIntDictHelper.write(e,this.failures)},function(e){this.id=e.readString(),this.failures=IceMX.StringIntDictHelper.read(e)},2,!1),Slice.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",!1),Slice.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",!1,"IceMX.Metrics"),Slice.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",!1,void 0,void 0,Ice.ArrayUtil.equals),IceMX.UnknownMetricsView=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"IceMX::UnknownMetricsView",void 0,void 0,!1,!1),IceMX.MetricsAdmin=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::IceMX::MetricsAdmin"],-1,void 0,void 0,!1),IceMX.MetricsAdminPrx=Slice.defineProxy(Ice.ObjectPrx,IceMX.MetricsAdmin.ice_staticId,void 0),Slice.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,{getMetricsViewNames:[,,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,!0],getMapMetricsFailures:[,,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]}),IceMX.ThreadMetrics=Slice.defineObject(function(e,t,n,i,r,o,s,c){IceMX.Metrics.call(this,e,t,n,i,r),this.inUseForIO=void 0!==o?o:0,this.inUseForUser=void 0!==s?s:0,this.inUseForOther=void 0!==c?c:0},IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"],-1,function(e){e.writeInt(this.inUseForIO),e.writeInt(this.inUseForUser),e.writeInt(this.inUseForOther)},function(e){this.inUseForIO=e.readInt(),this.inUseForUser=e.readInt(),this.inUseForOther=e.readInt()},!1),IceMX.ThreadMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.ThreadMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.ThreadMetrics,IceMX.ThreadMetricsPrx),IceMX.DispatchMetrics=Slice.defineObject(function(e,t,n,i,r,o,s,c){IceMX.Metrics.call(this,e,t,n,i,r),this.userException=void 0!==o?o:0,this.size=void 0!==s?s:new Ice.Long(0,0),this.replySize=void 0!==c?c:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.userException),e.writeLong(this.size),e.writeLong(this.replySize)},function(e){this.userException=e.readInt(),this.size=e.readLong(),this.replySize=e.readLong()},!1),IceMX.DispatchMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.DispatchMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.DispatchMetrics,IceMX.DispatchMetricsPrx),IceMX.ChildInvocationMetrics=Slice.defineObject(function(e,t,n,i,r,o,s){IceMX.Metrics.call(this,e,t,n,i,r),this.size=void 0!==o?o:new Ice.Long(0,0),this.replySize=void 0!==s?s:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.size),e.writeLong(this.replySize)},function(e){this.size=e.readLong(),this.replySize=e.readLong()},!1),IceMX.ChildInvocationMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.ChildInvocationMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.ChildInvocationMetrics,IceMX.ChildInvocationMetricsPrx),IceMX.CollocatedMetrics=Slice.defineObject(function(e,t,n,i,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,s)},IceMX.ChildInvocationMetrics,void 0,2,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"],-1,void 0,void 0,!1),IceMX.CollocatedMetricsPrx=Slice.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.CollocatedMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.CollocatedMetrics,IceMX.CollocatedMetricsPrx),IceMX.RemoteMetrics=Slice.defineObject(function(e,t,n,i,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,s)},IceMX.ChildInvocationMetrics,void 0,3,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"],-1,void 0,void 0,!1),IceMX.RemoteMetricsPrx=Slice.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.RemoteMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.RemoteMetrics,IceMX.RemoteMetricsPrx),IceMX.InvocationMetrics=Slice.defineObject(function(e,t,n,i,r,o,s,c,a){IceMX.Metrics.call(this,e,t,n,i,r),this.retry=void 0!==o?o:0,this.userException=void 0!==s?s:0,this.remotes=void 0!==c?c:null,this.collocated=void 0!==a?a:null},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.retry),e.writeInt(this.userException),IceMX.MetricsMapHelper.write(e,this.remotes),IceMX.MetricsMapHelper.write(e,this.collocated)},function(e){this.retry=e.readInt(),this.userException=e.readInt(),this.remotes=IceMX.MetricsMapHelper.read(e),this.collocated=IceMX.MetricsMapHelper.read(e)},!1),IceMX.InvocationMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.InvocationMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.InvocationMetrics,IceMX.InvocationMetricsPrx),IceMX.ConnectionMetrics=Slice.defineObject(function(e,t,n,i,r,o,s){IceMX.Metrics.call(this,e,t,n,i,r),this.receivedBytes=void 0!==o?o:new Ice.Long(0,0),this.sentBytes=void 0!==s?s:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.receivedBytes),e.writeLong(this.sentBytes)},function(e){this.receivedBytes=e.readLong(),this.sentBytes=e.readLong()},!1),IceMX.ConnectionMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.ConnectionMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.ConnectionMetrics,IceMX.ConnectionMetricsPrx)}(),function(){var e=(Ice.ArrayUtil,Ice.AsyncResultBase),t=Ice.ConnectionI,n=(Ice.ConnectionReaper,Ice.Debug),i=Ice.HashMap,r=Ice.Promise,o=(Ice.EndpointSelectionType,Ice.FactoryACMMonitor),s=Ice.Class,c=s({__init__:function(e,t){this._communicator=e,this._instance=t,this._destroyed=!1,this._monitor=new o(this._instance,this._instance.clientACM()),this._connectionsByEndpoint=new a,this._pending=new i(i.compareEquals),this._pendingConnectCount=0,this._waitPromise=null},destroy:function(){this._destroyed||(this._connectionsByEndpoint.forEach(function(e){e.destroy(t.CommunicatorDestroyed)}),this._destroyed=!0,this._communicator=null,this.checkFinished())},waitUntilFinished:function(){return this._waitPromise=new r,this.checkFinished(),this._waitPromise},create:function(e,t,i){n.assert(e.length>0);var o=this.applyOverrides(e);try{var s={value:!1},c=this.findConnectionByEndpoint(o,s);if(null!==c)return(new r).succeed(c,s.value)}catch(a){return(new r).fail(a)}var u=new h(this,o,t,i);return u.start()},setRouterInfo:function(e){var t=this;return Ice.Promise.try(function(){if(t._destroyed)throw new Ice.CommunicatorDestroyedException;return e.getClientEndpoints()}).then(function(n){for(var i=e.getAdapter(),r=t._instance.defaultsAndOverrides(),o=0;o<n.length;++o){var s=n[o];r.overrideTimeout&&(s=s.changeTimeout(r.overrideTimeoutValue)),s=s.changeCompress(!1);for(var c=0;c<t._connectionsByEndpoint.length;++c){var a=t._connectionsByEndpoint[c];a.endpoint().equals(s)&&a.setAdapter(i)}}})},removeAdapter:function(e){this._destroyed||this._connectionsByEndpoint.forEach(function(t){t.getAdapter()===e&&t.setAdapter(null)})},flushAsyncBatchRequests:function(){var t=new e(this._communicator,"flushBatchRequests",null,null,null);return this._destroyed?void t.succeed():(r.all(this._connectionsByEndpoint.map(function(e){return e.isActiveOrHolding()?e.flushBatchRequests().exception(function(e){if(!(e instanceof Ice.LocalException))throw e}):void 0})).then(function(){t.succeed(t)},function(e){t.fail(e,t)}),t)},applyOverrides:function(e){for(var t=this._instance.defaultsAndOverrides(),n=[],i=0;i<e.length;++i){var r=e[i];n.push(t.overrideTimeout?r.changeTimeout(t.overrideTimeoutValue):r)}return n},findConnectionByEndpoint:function(e,t){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var i=this._instance.defaultsAndOverrides();n.assert(e.length>0);for(var r=0;r<e.length;++r){var o=e[r];if(!this._pending.has(o)){var s=this._connectionsByEndpoint.get(o);if(void 0!==s)for(var c=0;c<s.length;++c)if(s[c].isActiveOrHolding())return t.value=i.overrideCompress?i.overrideCompressValue:o.compress(),s[c]}}return null},incPendingConnectCount:function(){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;++this._pendingConnectCount},decPendingConnectCount:function(){--this._pendingConnectCount,n.assert(this._pendingConnectCount>=0),this._destroyed&&0===this._pendingConnectCount&&this.checkFinished()},getConnection:function(e,t,n){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var i=this._monitor.swapReapedConnections();if(null!==i)for(var r=0;r<i.length;++r){var o=i[r];this._connectionsByEndpoint.removeConnection(o.endpoint(),o),this._connectionsByEndpoint.removeConnection(o.endpoint().changeCompress(!0),o)}for(;;){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var s=this.findConnectionByEndpoint(e,n);if(null!==s)return s;if(this.addToPending(t,e))return null;break}return t.nextEndpoint(),null},createConnection:function(e,i){n.assert(this._pending.has(i)&&null!==e);var r=null;try{if(this._destroyed)throw new Ice.CommunicatorDestroyedException;r=new t(this._communicator,this._instance,this._monitor,e,i.changeCompress(!1),!1,null)}catch(o){if(o instanceof Ice.LocalException)try{e.close()}catch(s){}throw o}return this._connectionsByEndpoint.set(r.endpoint(),r),this._connectionsByEndpoint.set(r.endpoint().changeCompress(!0),r),r},finishGetConnection:function(e,t,n,i){var r=[];null!==i&&r.push(i);var o,s,c=[];for(o=0;o<e.length;++o){var a=e[o],h=this._pending.get(a);if(void 0!==h){this._pending.delete(a);for(var u=0;u<h.length;++u)s=h[u],s.hasEndpoint(t)?-1===r.indexOf(s)&&r.push(s):-1===c.indexOf(s)&&c.push(s)}}for(o=0;o<r.length;++o){s=r[o],s.removeFromPending();var l=c.indexOf(s);-1!==l&&c.splice(l,1)}for(o=0;o<c.length;++o)s=c[o],s.removeFromPending();var d,p=this._instance.defaultsAndOverrides();for(d=p.overrideCompress?p.overrideCompressValue:t.compress(),o=0;o<c.length;++o)s=c[o],s.getConnection();for(o=0;o<r.length;++o)s=r[o],s.setConnection(n,d);this.checkFinished()},finishGetConnectionEx:function(e,t,i){var r=[];null!==i&&r.push(i);var o,s,c=[];for(o=0;o<e.length;++o){var a=e[o],h=this._pending.get(a);if(void 0!==h){this._pending.delete(a);for(var u=0;u<h.length;++u)s=h[u],s.removeEndpoints(e)?-1===r.indexOf(s)&&r.push(s):-1===c.indexOf(s)&&c.push(s)}}for(o=0;o<c.length;++o)s=c[o],n.assert(-1===r.indexOf(s)),s.removeFromPending();for(this.checkFinished(),o=0;o<c.length;++o)s=c[o],s.getConnection();for(o=0;o<r.length;++o)s=r[o],s.setException(t)},addToPending:function(e,t){var n,i,r=!1;if(null!==e)for(i=0;i<t.length;++i){n=t[i];var o=this._pending.get(n);void 0!==o&&(r=!0,-1===o.indexOf(e)&&o.push(e))}if(r)return!0;for(i=0;i<t.length;++i)n=t[i],this._pending.has(n)||this._pending.set(n,[]);return!1},removeFromPending:function(e,t){for(var n=0;n<t.length;++n){var i=t[n],r=this._pending.get(i);if(void 0!==r){var o=r.indexOf(e);-1!==o&&r.splice(o,1)}}},handleConnectionException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("connection to endpoint failed"),i.push(e instanceof Ice.CommunicatorDestroyedException?"\n":t?", trying next endpoint\n":" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},handleException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("couldn't resolve endpoint host"),i.push(e instanceof Ice.CommunicatorDestroyedException?"\n":t?", trying next endpoint\n":" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},checkFinished:function(){if(!(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0)){var e=this;r.all(e._connectionsByEndpoint.map(function(e){return e.waitUntilFinished().exception(function(){n.assert(!1)})})).then(function(){var t=e._monitor.swapReapedConnections();if(null!==t){for(var i=[],r=e._connectionsByEndpoint.entries;null!==r;r=r.next)for(var o=r.value,s=0;s<o.length;++s)-1===i.indexOf(o[s])&&i.push(o[s]);n.assert(t.length===i.length),e._connectionsByEndpoint.clear()}else n.assert(0===e._connectionsByEndpoint.size);n.assert(null!==e._waitPromise),e._waitPromise.succeed(),e._monitor.destroy()})}}});Ice.OutgoingConnectionFactory=c;var a=s(i,{__init__:function(e){i.call(this,e||i.compareEquals)},set:function(e,r){var o=this.get(e);return void 0===o&&(o=[],i.prototype.set.call(this,e,o)),n.assert(r instanceof t),void o.push(r)},removeConnection:function(e,t){var i=this.get(e);n.assert(null!==i);var r=i.indexOf(t);n.assert(-1!==r),i.splice(r,1),0===i.length&&this.delete(e)},map:function(e){var t=[];return this.forEach(function(n){t.push(e(n))}),t},forEach:function(e){for(var t=this._head;null!==t;t=t._next)for(var n=0;n<t.value.length;++n)e(t.value[n])}}),h=s({__init__:function(e,t,n,i){this._factory=e,this._endpoints=t,this._hasMore=n,this._selType=i,this._promise=new r,this._index=0,this._current=null},connectionStartCompleted:function(e){e.activate(),this._factory.finishGetConnection(this._endpoints,this._current,e,this)},connectionStartFailed:function(e,t){n.assert(null!==this._current),t instanceof Ice.LocalException?(this._factory.handleConnectionException(t,this._hasMore||this._index<this._endpoints.length),t instanceof Ice.CommunicatorDestroyedException?this._factory.finishGetConnectionEx(this._endpoints,t,this):this._index<this._endpoints.length?this.nextEndpoint():this._factory.finishGetConnectionEx(this._endpoints,t,this)):this._factory.finishGetConnectionEx(this._endpoints,t,this)},setConnection:function(e,t){this._promise.succeed(e,t),this._factory.decPendingConnectCount()},setException:function(e){this._promise.fail(e),this._factory.decPendingConnectCount()},hasEndpoint:function(e){return-1!==this.findEndpoint(e)},findEndpoint:function(e){for(var t=0;t<this._endpoints.length;++t)if(e.equals(this._endpoints[t]))return t;return-1},removeEndpoints:function(e){for(var t=0;t<e.length;++t){var n=this.findEndpoint(e[t]);-1!==n&&this._endpoints.splice(n,1)}return this._index=0,0===this._endpoints.length},removeFromPending:function(){this._factory.removeFromPending(this,this._endpoints)},start:function(){try{this._factory.incPendingConnectCount()}catch(e){return void this._promise.fail(e)}return this.getConnection(),this._promise},getConnection:function(){try{var e={value:!1},t=this._factory.getConnection(this._endpoints,this,e);if(null===t)return;this._promise.succeed(t,e.value),this._factory.decPendingConnectCount()
}catch(n){this._promise.fail(n),this._factory.decPendingConnectCount()}},nextEndpoint:function(){var e=null,t=this._factory._instance.traceLevels();try{if(n.assert(this._index<this._endpoints.length),this._current=this._endpoints[this._index++],t.network>=2){var i=[];i.push("trying to establish "),i.push(this._current.protocol()),i.push(" connection to "),i.push(this._current.toConnectorString()),this._factory._instance.initializationData().logger.trace(t.networkCat,i.join(""))}e=this._factory.createConnection(this._current.connect(),this._current);var r=this;e.start().then(function(){r.connectionStartCompleted(e)},function(t){r.connectionStartFailed(e,t)})}catch(o){if(t.network>=2){var i=[];i.push("failed to establish "),i.push(this._current.protocol()),i.push(" connection to "),i.push(this._current.toString()),i.push(o.toString()),this._factory._instance.initializationData().logger.trace(t.networkCat,i.join(""))}this.connectionStartFailed(e,o)}}})}(),function(){Ice.Process=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Process"],-1,void 0,void 0,!1),Ice.ProcessPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.Process.ice_staticId,void 0),Slice.defineOperations(Ice.Process,Ice.ProcessPrx,{shutdown:[,,,,,,,,,,],writeMessage:[,,,,,,[[7],[3]],,,,]})}(),function(){var e=Ice.TcpEndpointI,t=Ice.Class({__init__:function(e){this._instance=e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(t,n){var i=new e(this._instance);return i.initWithOptions(t,n),i},read:function(t){var n=new e(this._instance);return n.initWithStream(t),n},destroy:function(){this._instance=null},clone:function(e){return new t(e)}});Ice.TcpEndpointFactory=t}(),function(){Slice.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.PropertiesAdmin=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::PropertiesAdmin"],-1,void 0,void 0,!1),Ice.PropertiesAdminPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.PropertiesAdmin.ice_staticId,void 0),Slice.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,{getProperty:[,,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,1,,,[["Ice.PropertyDictHelper"]],,,,]})}(),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,n=Ice.DefaultsAndOverrides,i=Ice.EndpointFactoryManager,r=(Ice.HashMap,Ice.ImplicitContextI),o=Ice.LocatorManager,s=(Ice.Logger,Ice.ObjectAdapterFactory),c=Ice.ObjectFactoryManager,a=Ice.OutgoingConnectionFactory,h=(Ice.Promise,Ice.Properties),u=Ice.ProxyFactory,l=Ice.RetryQueue,d=Ice.RouterManager,p=Ice.Timer,_=Ice.TraceLevels,f=Ice.ReferenceFactory,I=Ice.RequestHandlerFactory,g=Ice.ACMConfig,m=0,v=1,y=2,w=Ice.Class({__init__:function(e){this._state=m,this._initData=e,this._traceLevels=null,this._defaultsAndOverrides=null,this._messageSizeMax=0,this._batchAutoFlushSize=0,this._clientACM=null,this._implicitContext=null,this._routerManager=null,this._locatorManager=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._outgoingConnectionFactory=null,this._servantFactoryManager=null,this._objectAdapterFactory=null,this._retryQueue=null,this._endpointHostResolver=null,this._endpointFactoryManager=null},initializationData:function(){return this._initData},traceLevels:function(){return t.assert(null!==this._traceLevels),this._traceLevels},defaultsAndOverrides:function(){return t.assert(null!==this._defaultsAndOverrides),this._defaultsAndOverrides},routerManager:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._routerManager),this._routerManager},locatorManager:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._locatorManager),this._locatorManager},referenceFactory:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._referenceFactory),this._referenceFactory},requestHandlerFactory:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._requestHandlerFactory),this._requestHandlerFactory},proxyFactory:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._proxyFactory),this._proxyFactory},outgoingConnectionFactory:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._outgoingConnectionFactory),this._outgoingConnectionFactory},servantFactoryManager:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._servantFactoryManager),this._servantFactoryManager},objectAdapterFactory:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._objectAdapterFactory),this._objectAdapterFactory},retryQueue:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._retryQueue),this._retryQueue},timer:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._timer),this._timer},endpointFactoryManager:function(){if(this._state===y)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._endpointFactoryManager),this._endpointFactoryManager},messageSizeMax:function(){return this._messageSizeMax},batchAutoFlushSize:function(){return this._batchAutoFlushSize},clientACM:function(){return this._clientACM},getImplicitContext:function(){return this._implicitContext},stringToIdentity:function(e){return Ice.stringToIdentity(e)},identityToString:function(e){return Ice.identityToString(e)},setDefaultLocator:function(e){if(this._state==y)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultLocator(e)},setDefaultRouter:function(e){if(this._state==y)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultRouter(e)},setLogger:function(e){this._initData.logger=e},finishSetup:function(e,t){try{null===this._initData.properties&&(this._initData.properties=h.createProperties()),void 0===Ice.__oneOfDone&&(Ice.__printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0,Ice.__oneOfDone=!0),null===this._initData.logger&&(this._initData.logger=Ice.getProcessLogger()),this._traceLevels=new _(this._initData.properties),this._defaultsAndOverrides=new n(this._initData.properties,this._initData.logger);var m=1024,v=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",m);this._messageSizeMax=1>v||v>2147483647/1024?2147483647:1024*v,0===this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0?this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0&&(this._batchAutoFlushSize=this._messageSizeMax):(v=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024),this._batchAutoFlushSize=1>v?v:v>2147483647/1024?2147483647:1024*v),this._clientACM=new g(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new g(this._initData.properties,this._initData.logger,"Ice.ACM",new g)),this._implicitContext=r.create(this._initData.properties.getProperty("Ice.ImplicitContext")),this._routerManager=new d,this._locatorManager=new o(this._initData.properties),this._referenceFactory=new f(this,e),this._requestHandlerFactory=new I(this,e),this._proxyFactory=new u(this),this._endpointFactoryManager=new i(this);var y=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",!1),w=new Ice.TcpEndpointFactory(y);this._endpointFactoryManager.add(w);var E=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",!1),S=new Ice.WSEndpointFactory(E,w.clone(E));this._endpointFactoryManager.add(S);var x=new Ice.ProtocolInstance(this,IceSSL.EndpointType,"ssl",!0),b=new Ice.TcpEndpointFactory(x);this._endpointFactoryManager.add(b);var C=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",!0),P=new Ice.WSEndpointFactory(C,b.clone(C));this._endpointFactoryManager.add(P),this._outgoingConnectionFactory=new a(e,this),this._servantFactoryManager=new c,this._objectAdapterFactory=new s(this,e),this._retryQueue=new l(this),this._timer=new p(this._initData.logger);var O=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));null!==O&&(this._referenceFactory=this._referenceFactory.setDefaultRouter(O));var M=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));null!==M&&(this._referenceFactory=this._referenceFactory.setDefaultLocator(M)),null!==t&&t.succeed(e)}catch(k){if(null===t)throw k instanceof Ice.LocalException&&this.destroy(),k;k instanceof Ice.LocalException?this.destroy().finally(function(){t.fail(k)}):t.fail(k)}},destroy:function(){var t=new e(null,"destroy",null,this,null);if(this._state==v)return this._destroyPromises||(this._destroyPromises=[]),this._destroyPromises.push(t),t;this._state=v;var n=this;return Ice.Promise.try(function(){return n._objectAdapterFactory?n._objectAdapterFactory.shutdown():void 0}).then(function(){return null!==n._outgoingConnectionFactory&&n._outgoingConnectionFactory.destroy(),null!==n._objectAdapterFactory?n._objectAdapterFactory.destroy():void 0}).then(function(){return null!==n._outgoingConnectionFactory?n._outgoingConnectionFactory.waitUntilFinished():void 0}).then(function(){n._retryQueue&&n._retryQueue.destroy(),n._timer&&n._timer.destroy(),n._servantFactoryManager&&n._servantFactoryManager.destroy(),n._routerManager&&n._routerManager.destroy(),n._locatorManager&&n._locatorManager.destroy(),n._endpointFactoryManager&&n._endpointFactoryManager.destroy();var e;if(n._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){var i=n._initData.properties.getUnusedProperties();if(i.length>0){var r=[];for(r.push("The following properties were set but never read:"),e=0;e<i.length;++e)r.push("\n    "),r.push(i[e]);n._initData.logger.warning(r.join(""))}}if(n._objectAdapterFactory=null,n._outgoingConnectionFactory=null,n._retryQueue=null,n._timer=null,n._servantFactoryManager=null,n._referenceFactory=null,n._requestHandlerFactory=null,n._proxyFactory=null,n._routerManager=null,n._locatorManager=null,n._endpointFactoryManager=null,n._state=y,this._destroyPromises)for(e=0;e<this._destroyPromises.length;++e)this._destroyPromises[e].succeed(this._destroyPromises[e]);t.succeed(t)}).exception(function(e){if(this._destroyPromises)for(var n=0;n<this._destroyPromises.length;++n)this._destroyPromises[n].fail(e,this._destroyPromises[n]);t.fail(e,t)}),t}});Ice.Instance=w}(),function(){Slice.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0)}(),function(){var e=Ice.Instance,t=(Ice.Promise,Ice.Class({__init__:function(t){this._instance=new e(t)},finishSetup:function(e){this._instance.finishSetup(this,e)},destroy:function(){return this._instance.destroy()},shutdown:function(){this._instance.objectAdapterFactory().shutdown()},waitForShutdown:function(){return this._instance.objectAdapterFactory().waitForShutdown()},isShutdown:function(){return this._instance.objectAdapterFactory().isShutdown()},stringToProxy:function(e){return this._instance.proxyFactory().stringToProxy(e)},proxyToString:function(e){return this._instance.proxyFactory().proxyToString(e)},propertyToProxy:function(e){return this._instance.proxyFactory().propertyToProxy(e)},proxyToProperty:function(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)},stringToIdentity:function(e){return this._instance.stringToIdentity(e)},identityToString:function(e){return this._instance.identityToString(e)},createObjectAdapter:function(e){var t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,t),t},createObjectAdapterWithEndpoints:function(e,t){0===e.length&&(e=Ice.generateUUID()),this.getProperties().setProperty(e+".Endpoints",t);var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,n),n},createObjectAdapterWithRouter:function(e,t){0===e.length&&(e=Ice.generateUUID());for(var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null),i=this.proxyToProperty(t,e+".Router"),r=i.entries;null!==r;r=r.next)this.getProperties().setProperty(r.key,r.value);return this._instance.objectAdapterFactory().createObjectAdapter(e,t,n),n},addObjectFactory:function(e,t){this._instance.servantFactoryManager().add(e,t)},findObjectFactory:function(e){return this._instance.servantFactoryManager().find(e)},getImplicitContext:function(){return this._instance.getImplicitContext()},getProperties:function(){return this._instance.initializationData().properties},getLogger:function(){return this._instance.initializationData().logger},getDefaultRouter:function(){return this._instance.referenceFactory().getDefaultRouter()},setDefaultRouter:function(e){this._instance.setDefaultRouter(e)},getDefaultLocator:function(){return this._instance.referenceFactory().getDefaultLocator()},setDefaultLocator:function(e){this._instance.setDefaultLocator(e)},flushBatchRequests:function(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}}));Object.defineProperty(t.prototype,"instance",{get:function(){return this._instance}}),Ice.Communicator=t}(),function(){var e=Ice.Protocol;Ice.InitializationData=function(){this.properties=null,this.logger=null},Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;return e.properties=this.properties,e.logger=this.logger,e},Ice.initialize=function(e,t){var n=null,i=null;if(e instanceof Array)n=e;else if(e instanceof Ice.InitializationData)i=e;else if(void 0!==e&&null!==e)throw new Ice.InitializationException("invalid argument to initialize");if(void 0!==t&&null!==t){if(!(t instanceof Ice.InitializationData&&null===i))throw new Ice.InitializationException("invalid argument to initialize");i=t}i=null===i?new Ice.InitializationData:i.clone(),i.properties=Ice.createProperties(n,i.properties);var r=new Ice.Communicator(i);return r.finishSetup(null),r},Ice.createProperties=function(e,t){return new Ice.Properties(e,t)},Ice.currentProtocol=function(){return e.currentProtocol.clone()},Ice.currentEncoding=function(){return e.currentEncoding.clone()}}(),window.Ice=Ice,window.IceMX=IceMX,window.IceSSL=IceSSL}();